var ga=Object.defineProperty;var xa=(t,e,r)=>e in t?ga(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r;var re=(t,e,r)=>xa(t,typeof e!="symbol"?e+"":e,r);import{g as _r,r as f,R as de,c as O,u as ba,j as a,X as rr,L as Ye,T as sr,S as Nt,a as va,b as ya}from"./Layout-DYpB_8kD.js";import{F as be,S as ws}from"./server-D1mkh0iz.js";import{C as ar}from"./circle-alert-C17EQUvl.js";import{I as wa,C as _a}from"./info-B3V3uJ_6.js";var ja=typeof Element<"u",Na=typeof Map=="function",Sa=typeof Set=="function",Ea=typeof ArrayBuffer=="function"&&!!ArrayBuffer.isView;function yt(t,e){if(t===e)return!0;if(t&&e&&typeof t=="object"&&typeof e=="object"){if(t.constructor!==e.constructor)return!1;var r,s,n;if(Array.isArray(t)){if(r=t.length,r!=e.length)return!1;for(s=r;s--!==0;)if(!yt(t[s],e[s]))return!1;return!0}var i;if(Na&&t instanceof Map&&e instanceof Map){if(t.size!==e.size)return!1;for(i=t.entries();!(s=i.next()).done;)if(!e.has(s.value[0]))return!1;for(i=t.entries();!(s=i.next()).done;)if(!yt(s.value[1],e.get(s.value[0])))return!1;return!0}if(Sa&&t instanceof Set&&e instanceof Set){if(t.size!==e.size)return!1;for(i=t.entries();!(s=i.next()).done;)if(!e.has(s.value[0]))return!1;return!0}if(Ea&&ArrayBuffer.isView(t)&&ArrayBuffer.isView(e)){if(r=t.length,r!=e.length)return!1;for(s=r;s--!==0;)if(t[s]!==e[s])return!1;return!0}if(t.constructor===RegExp)return t.source===e.source&&t.flags===e.flags;if(t.valueOf!==Object.prototype.valueOf&&typeof t.valueOf=="function"&&typeof e.valueOf=="function")return t.valueOf()===e.valueOf();if(t.toString!==Object.prototype.toString&&typeof t.toString=="function"&&typeof e.toString=="function")return t.toString()===e.toString();if(n=Object.keys(t),r=n.length,r!==Object.keys(e).length)return!1;for(s=r;s--!==0;)if(!Object.prototype.hasOwnProperty.call(e,n[s]))return!1;if(ja&&t instanceof Element)return!1;for(s=r;s--!==0;)if(!((n[s]==="_owner"||n[s]==="__v"||n[s]==="__o")&&t.$$typeof)&&!yt(t[n[s]],e[n[s]]))return!1;return!0}return t!==t&&e!==e}var ka=function(e,r){try{return yt(e,r)}catch(s){if((s.message||"").match(/stack|recursion/i))return console.warn("react-fast-compare cannot handle circular refs"),!1;throw s}};const Aa=_r(ka);var Ta=function(t,e,r,s,n,i,o,l){if(!t){var c;if(e===void 0)c=new Error("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{var d=[r,s,n,i,o,l],u=0;c=new Error(e.replace(/%s/g,function(){return d[u++]})),c.name="Invariant Violation"}throw c.framesToPop=1,c}},Ra=Ta;const Ir=_r(Ra);var Oa=function(e,r,s,n){var i=s?s.call(n,e,r):void 0;if(i!==void 0)return!!i;if(e===r)return!0;if(typeof e!="object"||!e||typeof r!="object"||!r)return!1;var o=Object.keys(e),l=Object.keys(r);if(o.length!==l.length)return!1;for(var c=Object.prototype.hasOwnProperty.bind(r),d=0;d<o.length;d++){var u=o[d];if(!c(u))return!1;var h=e[u],p=r[u];if(i=s?s.call(n,h,p,u):void 0,i===!1||i===void 0&&h!==p)return!1}return!0};const Ca=_r(Oa);var _s=(t=>(t.BASE="base",t.BODY="body",t.HEAD="head",t.HTML="html",t.LINK="link",t.META="meta",t.NOSCRIPT="noscript",t.SCRIPT="script",t.STYLE="style",t.TITLE="title",t.FRAGMENT="Symbol(react.fragment)",t))(_s||{}),Bt={link:{rel:["amphtml","canonical","alternate"]},script:{type:["application/ld+json"]},meta:{charset:"",name:["generator","robots","description"],property:["og:type","og:title","og:url","og:image","og:image:alt","og:description","twitter:url","twitter:title","twitter:description","twitter:image","twitter:image:alt","twitter:card","twitter:site"]}},$r=Object.values(_s),jr={accesskey:"accessKey",charset:"charSet",class:"className",contenteditable:"contentEditable",contextmenu:"contextMenu","http-equiv":"httpEquiv",itemprop:"itemProp",tabindex:"tabIndex"},Pa=Object.entries(jr).reduce((t,[e,r])=>(t[r]=e,t),{}),X="data-rh",Pe={DEFAULT_TITLE:"defaultTitle",DEFER:"defer",ENCODE_SPECIAL_CHARACTERS:"encodeSpecialCharacters",ON_CHANGE_CLIENT_STATE:"onChangeClientState",TITLE_TEMPLATE:"titleTemplate",PRIORITIZE_SEO_TAGS:"prioritizeSeoTags"},Ie=(t,e)=>{for(let r=t.length-1;r>=0;r-=1){const s=t[r];if(Object.prototype.hasOwnProperty.call(s,e))return s[e]}return null},Ia=t=>{let e=Ie(t,"title");const r=Ie(t,Pe.TITLE_TEMPLATE);if(Array.isArray(e)&&(e=e.join("")),r&&e)return r.replace(/%s/g,()=>e);const s=Ie(t,Pe.DEFAULT_TITLE);return e||s||void 0},$a=t=>Ie(t,Pe.ON_CHANGE_CLIENT_STATE)||(()=>{}),Ft=(t,e)=>e.filter(r=>typeof r[t]<"u").map(r=>r[t]).reduce((r,s)=>({...r,...s}),{}),La=(t,e)=>e.filter(r=>typeof r.base<"u").map(r=>r.base).reverse().reduce((r,s)=>{if(!r.length){const n=Object.keys(s);for(let i=0;i<n.length;i+=1){const l=n[i].toLowerCase();if(t.indexOf(l)!==-1&&s[l])return r.concat(s)}}return r},[]),Da=t=>console&&typeof console.warn=="function"&&console.warn(t),Fe=(t,e,r)=>{const s={};return r.filter(n=>Array.isArray(n[t])?!0:(typeof n[t]<"u"&&Da(`Helmet: ${t} should be of type "Array". Instead found type "${typeof n[t]}"`),!1)).map(n=>n[t]).reverse().reduce((n,i)=>{const o={};i.filter(c=>{let d;const u=Object.keys(c);for(let p=0;p<u.length;p+=1){const m=u[p],g=m.toLowerCase();e.indexOf(g)!==-1&&!(d==="rel"&&c[d].toLowerCase()==="canonical")&&!(g==="rel"&&c[g].toLowerCase()==="stylesheet")&&(d=g),e.indexOf(m)!==-1&&(m==="innerHTML"||m==="cssText"||m==="itemprop")&&(d=m)}if(!d||!c[d])return!1;const h=c[d].toLowerCase();return s[d]||(s[d]={}),o[d]||(o[d]={}),s[d][h]?!1:(o[d][h]=!0,!0)}).reverse().forEach(c=>n.push(c));const l=Object.keys(o);for(let c=0;c<l.length;c+=1){const d=l[c],u={...s[d],...o[d]};s[d]=u}return n},[]).reverse()},Ua=(t,e)=>{if(Array.isArray(t)&&t.length){for(let r=0;r<t.length;r+=1)if(t[r][e])return!0}return!1},qa=t=>({baseTag:La(["href"],t),bodyAttributes:Ft("bodyAttributes",t),defer:Ie(t,Pe.DEFER),encode:Ie(t,Pe.ENCODE_SPECIAL_CHARACTERS),htmlAttributes:Ft("htmlAttributes",t),linkTags:Fe("link",["rel","href"],t),metaTags:Fe("meta",["name","charset","http-equiv","property","itemprop"],t),noscriptTags:Fe("noscript",["innerHTML"],t),onChangeClientState:$a(t),scriptTags:Fe("script",["src","innerHTML"],t),styleTags:Fe("style",["cssText"],t),title:Ia(t),titleAttributes:Ft("titleAttributes",t),prioritizeSeoTags:Ua(t,Pe.PRIORITIZE_SEO_TAGS)}),js=t=>Array.isArray(t)?t.join(""):t,Ma=(t,e)=>{const r=Object.keys(t);for(let s=0;s<r.length;s+=1)if(e[r[s]]&&e[r[s]].includes(t[r[s]]))return!0;return!1},Ht=(t,e)=>Array.isArray(t)?t.reduce((r,s)=>(Ma(s,e)?r.priority.push(s):r.default.push(s),r),{priority:[],default:[]}):{default:t,priority:[]},Lr=(t,e)=>({...t,[e]:void 0}),za=["noscript","script","style"],nr=(t,e=!0)=>e===!1?String(t):String(t).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#x27;"),Ns=t=>Object.keys(t).reduce((e,r)=>{const s=typeof t[r]<"u"?`${r}="${t[r]}"`:`${r}`;return e?`${e} ${s}`:s},""),Ba=(t,e,r,s)=>{const n=Ns(r),i=js(e);return n?`<${t} ${X}="true" ${n}>${nr(i,s)}</${t}>`:`<${t} ${X}="true">${nr(i,s)}</${t}>`},Fa=(t,e,r=!0)=>e.reduce((s,n)=>{const i=n,o=Object.keys(i).filter(d=>!(d==="innerHTML"||d==="cssText")).reduce((d,u)=>{const h=typeof i[u]>"u"?u:`${u}="${nr(i[u],r)}"`;return d?`${d} ${h}`:h},""),l=i.innerHTML||i.cssText||"",c=za.indexOf(t)===-1;return`${s}<${t} ${X}="true" ${o}${c?"/>":`>${l}</${t}>`}`},""),Ss=(t,e={})=>Object.keys(t).reduce((r,s)=>{const n=jr[s];return r[n||s]=t[s],r},e),Ha=(t,e,r)=>{const s={key:e,[X]:!0},n=Ss(r,s);return[de.createElement("title",n,e)]},wt=(t,e)=>e.map((r,s)=>{const n={key:s,[X]:!0};return Object.keys(r).forEach(i=>{const l=jr[i]||i;if(l==="innerHTML"||l==="cssText"){const c=r.innerHTML||r.cssText;n.dangerouslySetInnerHTML={__html:c}}else n[l]=r[i]}),de.createElement(t,n)}),V=(t,e,r=!0)=>{switch(t){case"title":return{toComponent:()=>Ha(t,e.title,e.titleAttributes),toString:()=>Ba(t,e.title,e.titleAttributes,r)};case"bodyAttributes":case"htmlAttributes":return{toComponent:()=>Ss(e),toString:()=>Ns(e)};default:return{toComponent:()=>wt(t,e),toString:()=>Fa(t,e,r)}}},Wa=({metaTags:t,linkTags:e,scriptTags:r,encode:s})=>{const n=Ht(t,Bt.meta),i=Ht(e,Bt.link),o=Ht(r,Bt.script);return{priorityMethods:{toComponent:()=>[...wt("meta",n.priority),...wt("link",i.priority),...wt("script",o.priority)],toString:()=>`${V("meta",n.priority,s)} ${V("link",i.priority,s)} ${V("script",o.priority,s)}`},metaTags:n.default,linkTags:i.default,scriptTags:o.default}},Va=t=>{const{baseTag:e,bodyAttributes:r,encode:s=!0,htmlAttributes:n,noscriptTags:i,styleTags:o,title:l="",titleAttributes:c,prioritizeSeoTags:d}=t;let{linkTags:u,metaTags:h,scriptTags:p}=t,m={toComponent:()=>{},toString:()=>""};return d&&({priorityMethods:m,linkTags:u,metaTags:h,scriptTags:p}=Wa(t)),{priority:m,base:V("base",e,s),bodyAttributes:V("bodyAttributes",r,s),htmlAttributes:V("htmlAttributes",n,s),link:V("link",u,s),meta:V("meta",h,s),noscript:V("noscript",i,s),script:V("script",p,s),style:V("style",o,s),title:V("title",{title:l,titleAttributes:c},s)}},ir=Va,ut=[],Es=!!(typeof window<"u"&&window.document&&window.document.createElement),or=class{constructor(t,e){re(this,"instances",[]);re(this,"canUseDOM",Es);re(this,"context");re(this,"value",{setHelmet:t=>{this.context.helmet=t},helmetInstances:{get:()=>this.canUseDOM?ut:this.instances,add:t=>{(this.canUseDOM?ut:this.instances).push(t)},remove:t=>{const e=(this.canUseDOM?ut:this.instances).indexOf(t);(this.canUseDOM?ut:this.instances).splice(e,1)}}});this.context=t,this.canUseDOM=e||!1,e||(t.helmet=ir({baseTag:[],bodyAttributes:{},htmlAttributes:{},linkTags:[],metaTags:[],noscriptTags:[],scriptTags:[],styleTags:[],title:"",titleAttributes:{}}))}},Ka={},ks=de.createContext(Ka),xe,As=(xe=class extends f.Component{constructor(r){super(r);re(this,"helmetData");this.helmetData=new or(this.props.context||{},xe.canUseDOM)}render(){return de.createElement(ks.Provider,{value:this.helmetData.value},this.props.children)}},re(xe,"canUseDOM",Es),xe),_e=(t,e)=>{const r=document.head||document.querySelector("head"),s=r.querySelectorAll(`${t}[${X}]`),n=[].slice.call(s),i=[];let o;return e&&e.length&&e.forEach(l=>{const c=document.createElement(t);for(const d in l)if(Object.prototype.hasOwnProperty.call(l,d))if(d==="innerHTML")c.innerHTML=l.innerHTML;else if(d==="cssText")c.styleSheet?c.styleSheet.cssText=l.cssText:c.appendChild(document.createTextNode(l.cssText));else{const u=d,h=typeof l[u]>"u"?"":l[u];c.setAttribute(d,h)}c.setAttribute(X,"true"),n.some((d,u)=>(o=u,c.isEqualNode(d)))?n.splice(o,1):i.push(c)}),n.forEach(l=>{var c;return(c=l.parentNode)==null?void 0:c.removeChild(l)}),i.forEach(l=>r.appendChild(l)),{oldTags:n,newTags:i}},lr=(t,e)=>{const r=document.getElementsByTagName(t)[0];if(!r)return;const s=r.getAttribute(X),n=s?s.split(","):[],i=[...n],o=Object.keys(e);for(const l of o){const c=e[l]||"";r.getAttribute(l)!==c&&r.setAttribute(l,c),n.indexOf(l)===-1&&n.push(l);const d=i.indexOf(l);d!==-1&&i.splice(d,1)}for(let l=i.length-1;l>=0;l-=1)r.removeAttribute(i[l]);n.length===i.length?r.removeAttribute(X):r.getAttribute(X)!==o.join(",")&&r.setAttribute(X,o.join(","))},Ga=(t,e)=>{typeof t<"u"&&document.title!==t&&(document.title=js(t)),lr("title",e)},Dr=(t,e)=>{const{baseTag:r,bodyAttributes:s,htmlAttributes:n,linkTags:i,metaTags:o,noscriptTags:l,onChangeClientState:c,scriptTags:d,styleTags:u,title:h,titleAttributes:p}=t;lr("body",s),lr("html",n),Ga(h,p);const m={baseTag:_e("base",r),linkTags:_e("link",i),metaTags:_e("meta",o),noscriptTags:_e("noscript",l),scriptTags:_e("script",d),styleTags:_e("style",u)},g={},b={};Object.keys(m).forEach(v=>{const{newTags:x,oldTags:w}=m[v];x.length&&(g[v]=x),w.length&&(b[v]=m[v].oldTags)}),e&&e(),c(t,g,b)},He=null,Ja=t=>{He&&cancelAnimationFrame(He),t.defer?He=requestAnimationFrame(()=>{Dr(t,()=>{He=null})}):(Dr(t),He=null)},Ya=Ja,Ur=class extends f.Component{constructor(){super(...arguments);re(this,"rendered",!1)}shouldComponentUpdate(e){return!Ca(e,this.props)}componentDidUpdate(){this.emitChange()}componentWillUnmount(){const{helmetInstances:e}=this.props.context;e.remove(this),this.emitChange()}emitChange(){const{helmetInstances:e,setHelmet:r}=this.props.context;let s=null;const n=qa(e.get().map(i=>{const o={...i.props};return delete o.context,o}));As.canUseDOM?Ya(n):ir&&(s=ir(n)),r(s)}init(){if(this.rendered)return;this.rendered=!0;const{helmetInstances:e}=this.props.context;e.add(this),this.emitChange()}render(){return this.init(),null}},tr,Qa=(tr=class extends f.Component{shouldComponentUpdate(t){return!Aa(Lr(this.props,"helmetData"),Lr(t,"helmetData"))}mapNestedChildrenToProps(t,e){if(!e)return null;switch(t.type){case"script":case"noscript":return{innerHTML:e};case"style":return{cssText:e};default:throw new Error(`<${t.type} /> elements are self-closing and can not contain children. Refer to our API for more information.`)}}flattenArrayTypeChildren(t,e,r,s){return{...e,[t.type]:[...e[t.type]||[],{...r,...this.mapNestedChildrenToProps(t,s)}]}}mapObjectTypeChildren(t,e,r,s){switch(t.type){case"title":return{...e,[t.type]:s,titleAttributes:{...r}};case"body":return{...e,bodyAttributes:{...r}};case"html":return{...e,htmlAttributes:{...r}};default:return{...e,[t.type]:{...r}}}}mapArrayTypeChildrenToProps(t,e){let r={...e};return Object.keys(t).forEach(s=>{r={...r,[s]:t[s]}}),r}warnOnInvalidChildren(t,e){return Ir($r.some(r=>t.type===r),typeof t.type=="function"?"You may be attempting to nest <Helmet> components within each other, which is not allowed. Refer to our API for more information.":`Only elements types ${$r.join(", ")} are allowed. Helmet does not support rendering <${t.type}> elements. Refer to our API for more information.`),Ir(!e||typeof e=="string"||Array.isArray(e)&&!e.some(r=>typeof r!="string"),`Helmet expects a string as a child of <${t.type}>. Did you forget to wrap your children in braces? ( <${t.type}>{\`\`}</${t.type}> ) Refer to our API for more information.`),!0}mapChildrenToProps(t,e){let r={};return de.Children.forEach(t,s=>{if(!s||!s.props)return;const{children:n,...i}=s.props,o=Object.keys(i).reduce((c,d)=>(c[Pa[d]||d]=i[d],c),{});let{type:l}=s;switch(typeof l=="symbol"?l=l.toString():this.warnOnInvalidChildren(s,n),l){case"Symbol(react.fragment)":e=this.mapChildrenToProps(n,e);break;case"link":case"meta":case"noscript":case"script":case"style":r=this.flattenArrayTypeChildren(s,r,o,n);break;default:e=this.mapObjectTypeChildren(s,e,o,n);break}}),this.mapArrayTypeChildrenToProps(r,e)}render(){const{children:t,...e}=this.props;let r={...e},{helmetData:s}=e;if(t&&(r=this.mapChildrenToProps(t,r)),s&&!(s instanceof or)){const n=s;s=new or(n.context,!0),delete r.helmetData}return s?de.createElement(Ur,{...r,context:s.value}):de.createElement(ks.Consumer,null,n=>de.createElement(Ur,{...r,context:n}))}},re(tr,"defaultProps",{defer:!0,encodeSpecialCharacters:!0,prioritizeSeoTags:!1}),tr);/**
 * react-router v7.13.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */var qr="popstate";function Xa(t={}){function e(s,n){let{pathname:i,search:o,hash:l}=s.location;return cr("",{pathname:i,search:o,hash:l},n.state&&n.state.usr||null,n.state&&n.state.key||"default")}function r(s,n){return typeof n=="string"?n:Qe(n)}return en(e,r,null,t)}function I(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function ee(t,e){if(!t){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function Za(){return Math.random().toString(36).substring(2,10)}function Mr(t,e){return{usr:t.state,key:t.key,idx:e}}function cr(t,e,r=null,s){return{pathname:typeof t=="string"?t:t.pathname,search:"",hash:"",...typeof e=="string"?qe(e):e,state:r,key:e&&e.key||s||Za()}}function Qe({pathname:t="/",search:e="",hash:r=""}){return e&&e!=="?"&&(t+=e.charAt(0)==="?"?e:"?"+e),r&&r!=="#"&&(t+=r.charAt(0)==="#"?r:"#"+r),t}function qe(t){let e={};if(t){let r=t.indexOf("#");r>=0&&(e.hash=t.substring(r),t=t.substring(0,r));let s=t.indexOf("?");s>=0&&(e.search=t.substring(s),t=t.substring(0,s)),t&&(e.pathname=t)}return e}function en(t,e,r,s={}){let{window:n=document.defaultView,v5Compat:i=!1}=s,o=n.history,l="POP",c=null,d=u();d==null&&(d=0,o.replaceState({...o.state,idx:d},""));function u(){return(o.state||{idx:null}).idx}function h(){l="POP";let v=u(),x=v==null?null:v-d;d=v,c&&c({action:l,location:b.location,delta:x})}function p(v,x){l="PUSH";let w=cr(b.location,v,x);d=u()+1;let y=Mr(w,d),N=b.createHref(w);try{o.pushState(y,"",N)}catch(_){if(_ instanceof DOMException&&_.name==="DataCloneError")throw _;n.location.assign(N)}i&&c&&c({action:l,location:b.location,delta:1})}function m(v,x){l="REPLACE";let w=cr(b.location,v,x);d=u();let y=Mr(w,d),N=b.createHref(w);o.replaceState(y,"",N),i&&c&&c({action:l,location:b.location,delta:0})}function g(v){return tn(v)}let b={get action(){return l},get location(){return t(n,o)},listen(v){if(c)throw new Error("A history only accepts one active listener");return n.addEventListener(qr,h),c=v,()=>{n.removeEventListener(qr,h),c=null}},createHref(v){return e(n,v)},createURL:g,encodeLocation(v){let x=g(v);return{pathname:x.pathname,search:x.search,hash:x.hash}},push:p,replace:m,go(v){return o.go(v)}};return b}function tn(t,e=!1){let r="http://localhost";typeof window<"u"&&(r=window.location.origin!=="null"?window.location.origin:window.location.href),I(r,"No window.location.(origin|href) available to create URL");let s=typeof t=="string"?t:Qe(t);return s=s.replace(/ $/,"%20"),!e&&s.startsWith("//")&&(s=r+s),new URL(s,r)}function Ts(t,e,r="/"){return rn(t,e,r,!1)}function rn(t,e,r,s){let n=typeof e=="string"?qe(e):e,i=ne(n.pathname||"/",r);if(i==null)return null;let o=Rs(t);sn(o);let l=null;for(let c=0;l==null&&c<o.length;++c){let d=fn(i);l=mn(o[c],d,s)}return l}function Rs(t,e=[],r=[],s="",n=!1){let i=(o,l,c=n,d)=>{let u={relativePath:d===void 0?o.path||"":d,caseSensitive:o.caseSensitive===!0,childrenIndex:l,route:o};if(u.relativePath.startsWith("/")){if(!u.relativePath.startsWith(s)&&c)return;I(u.relativePath.startsWith(s),`Absolute route path "${u.relativePath}" nested under path "${s}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),u.relativePath=u.relativePath.slice(s.length)}let h=ae([s,u.relativePath]),p=r.concat(u);o.children&&o.children.length>0&&(I(o.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${h}".`),Rs(o.children,e,p,h,c)),!(o.path==null&&!o.index)&&e.push({path:h,score:un(h,o.index),routesMeta:p})};return t.forEach((o,l)=>{var c;if(o.path===""||!((c=o.path)!=null&&c.includes("?")))i(o,l);else for(let d of Os(o.path))i(o,l,!0,d)}),e}function Os(t){let e=t.split("/");if(e.length===0)return[];let[r,...s]=e,n=r.endsWith("?"),i=r.replace(/\?$/,"");if(s.length===0)return n?[i,""]:[i];let o=Os(s.join("/")),l=[];return l.push(...o.map(c=>c===""?i:[i,c].join("/"))),n&&l.push(...o),l.map(c=>t.startsWith("/")&&c===""?"/":c)}function sn(t){t.sort((e,r)=>e.score!==r.score?r.score-e.score:hn(e.routesMeta.map(s=>s.childrenIndex),r.routesMeta.map(s=>s.childrenIndex)))}var an=/^:[\w-]+$/,nn=3,on=2,ln=1,cn=10,dn=-2,zr=t=>t==="*";function un(t,e){let r=t.split("/"),s=r.length;return r.some(zr)&&(s+=dn),e&&(s+=on),r.filter(n=>!zr(n)).reduce((n,i)=>n+(an.test(i)?nn:i===""?ln:cn),s)}function hn(t,e){return t.length===e.length&&t.slice(0,-1).every((s,n)=>s===e[n])?t[t.length-1]-e[e.length-1]:0}function mn(t,e,r=!1){let{routesMeta:s}=t,n={},i="/",o=[];for(let l=0;l<s.length;++l){let c=s[l],d=l===s.length-1,u=i==="/"?e:e.slice(i.length)||"/",h=St({path:c.relativePath,caseSensitive:c.caseSensitive,end:d},u),p=c.route;if(!h&&d&&r&&!s[s.length-1].route.index&&(h=St({path:c.relativePath,caseSensitive:c.caseSensitive,end:!1},u)),!h)return null;Object.assign(n,h.params),o.push({params:n,pathname:ae([i,h.pathname]),pathnameBase:vn(ae([i,h.pathnameBase])),route:p}),h.pathnameBase!=="/"&&(i=ae([i,h.pathnameBase]))}return o}function St(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[r,s]=pn(t.path,t.caseSensitive,t.end),n=e.match(r);if(!n)return null;let i=n[0],o=i.replace(/(.)\/+$/,"$1"),l=n.slice(1);return{params:s.reduce((d,{paramName:u,isOptional:h},p)=>{if(u==="*"){let g=l[p]||"";o=i.slice(0,i.length-g.length).replace(/(.)\/+$/,"$1")}const m=l[p];return h&&!m?d[u]=void 0:d[u]=(m||"").replace(/%2F/g,"/"),d},{}),pathname:i,pathnameBase:o,pattern:t}}function pn(t,e=!1,r=!0){ee(t==="*"||!t.endsWith("*")||t.endsWith("/*"),`Route path "${t}" will be treated as if it were "${t.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${t.replace(/\*$/,"/*")}".`);let s=[],n="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(o,l,c)=>(s.push({paramName:l,isOptional:c!=null}),c?"/?([^\\/]+)?":"/([^\\/]+)")).replace(/\/([\w-]+)\?(\/|$)/g,"(/$1)?$2");return t.endsWith("*")?(s.push({paramName:"*"}),n+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):r?n+="\\/*$":t!==""&&t!=="/"&&(n+="(?:(?=\\/|$))"),[new RegExp(n,e?void 0:"i"),s]}function fn(t){try{return t.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return ee(!1,`The URL path "${t}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${e}).`),t}}function ne(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let r=e.endsWith("/")?e.length-1:e.length,s=t.charAt(r);return s&&s!=="/"?null:t.slice(r)||"/"}var gn=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i;function xn(t,e="/"){let{pathname:r,search:s="",hash:n=""}=typeof t=="string"?qe(t):t,i;return r?(r=r.replace(/\/\/+/g,"/"),r.startsWith("/")?i=Br(r.substring(1),"/"):i=Br(r,e)):i=e,{pathname:i,search:yn(s),hash:wn(n)}}function Br(t,e){let r=e.replace(/\/+$/,"").split("/");return t.split("/").forEach(n=>{n===".."?r.length>1&&r.pop():n!=="."&&r.push(n)}),r.length>1?r.join("/"):"/"}function Wt(t,e,r,s){return`Cannot include a '${t}' character in a manually specified \`to.${e}\` field [${JSON.stringify(s)}].  Please separate it out to the \`to.${r}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function bn(t){return t.filter((e,r)=>r===0||e.route.path&&e.route.path.length>0)}function Cs(t){let e=bn(t);return e.map((r,s)=>s===e.length-1?r.pathname:r.pathnameBase)}function Ps(t,e,r,s=!1){let n;typeof t=="string"?n=qe(t):(n={...t},I(!n.pathname||!n.pathname.includes("?"),Wt("?","pathname","search",n)),I(!n.pathname||!n.pathname.includes("#"),Wt("#","pathname","hash",n)),I(!n.search||!n.search.includes("#"),Wt("#","search","hash",n)));let i=t===""||n.pathname==="",o=i?"/":n.pathname,l;if(o==null)l=r;else{let h=e.length-1;if(!s&&o.startsWith("..")){let p=o.split("/");for(;p[0]==="..";)p.shift(),h-=1;n.pathname=p.join("/")}l=h>=0?e[h]:"/"}let c=xn(n,l),d=o&&o!=="/"&&o.endsWith("/"),u=(i||o===".")&&r.endsWith("/");return!c.pathname.endsWith("/")&&(d||u)&&(c.pathname+="/"),c}var ae=t=>t.join("/").replace(/\/\/+/g,"/"),vn=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),yn=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,wn=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t,_n=class{constructor(t,e,r,s=!1){this.status=t,this.statusText=e||"",this.internal=s,r instanceof Error?(this.data=r.toString(),this.error=r):this.data=r}};function jn(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}function Nn(t){return t.map(e=>e.route.path).filter(Boolean).join("/").replace(/\/\/*/g,"/")||"/"}var Is=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";function $s(t,e){let r=t;if(typeof r!="string"||!gn.test(r))return{absoluteURL:void 0,isExternal:!1,to:r};let s=r,n=!1;if(Is)try{let i=new URL(window.location.href),o=r.startsWith("//")?new URL(i.protocol+r):new URL(r),l=ne(o.pathname,e);o.origin===i.origin&&l!=null?r=l+o.search+o.hash:n=!0}catch{ee(!1,`<Link to="${r}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}return{absoluteURL:s,isExternal:n,to:r}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");var Ls=["POST","PUT","PATCH","DELETE"];new Set(Ls);var Sn=["GET",...Ls];new Set(Sn);var Me=f.createContext(null);Me.displayName="DataRouter";var Ct=f.createContext(null);Ct.displayName="DataRouterState";var En=f.createContext(!1),Ds=f.createContext({isTransitioning:!1});Ds.displayName="ViewTransition";var kn=f.createContext(new Map);kn.displayName="Fetchers";var An=f.createContext(null);An.displayName="Await";var K=f.createContext(null);K.displayName="Navigation";var nt=f.createContext(null);nt.displayName="Location";var te=f.createContext({outlet:null,matches:[],isDataRoute:!1});te.displayName="Route";var Nr=f.createContext(null);Nr.displayName="RouteError";var Us="REACT_ROUTER_ERROR",Tn="REDIRECT",Rn="ROUTE_ERROR_RESPONSE";function On(t){if(t.startsWith(`${Us}:${Tn}:{`))try{let e=JSON.parse(t.slice(28));if(typeof e=="object"&&e&&typeof e.status=="number"&&typeof e.statusText=="string"&&typeof e.location=="string"&&typeof e.reloadDocument=="boolean"&&typeof e.replace=="boolean")return e}catch{}}function Cn(t){if(t.startsWith(`${Us}:${Rn}:{`))try{let e=JSON.parse(t.slice(40));if(typeof e=="object"&&e&&typeof e.status=="number"&&typeof e.statusText=="string")return new _n(e.status,e.statusText,e.data)}catch{}}function Pn(t,{relative:e}={}){I(it(),"useHref() may be used only in the context of a <Router> component.");let{basename:r,navigator:s}=f.useContext(K),{hash:n,pathname:i,search:o}=ot(t,{relative:e}),l=i;return r!=="/"&&(l=i==="/"?r:ae([r,i])),s.createHref({pathname:l,search:o,hash:n})}function it(){return f.useContext(nt)!=null}function ie(){return I(it(),"useLocation() may be used only in the context of a <Router> component."),f.useContext(nt).location}var qs="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function Ms(t){f.useContext(K).static||f.useLayoutEffect(t)}function Pt(){let{isDataRoute:t}=f.useContext(te);return t?Kn():In()}function In(){I(it(),"useNavigate() may be used only in the context of a <Router> component.");let t=f.useContext(Me),{basename:e,navigator:r}=f.useContext(K),{matches:s}=f.useContext(te),{pathname:n}=ie(),i=JSON.stringify(Cs(s)),o=f.useRef(!1);return Ms(()=>{o.current=!0}),f.useCallback((c,d={})=>{if(ee(o.current,qs),!o.current)return;if(typeof c=="number"){r.go(c);return}let u=Ps(c,JSON.parse(i),n,d.relative==="path");t==null&&e!=="/"&&(u.pathname=u.pathname==="/"?e:ae([e,u.pathname])),(d.replace?r.replace:r.push)(u,d.state,d)},[e,r,i,n,t])}f.createContext(null);function $n(){let{matches:t}=f.useContext(te),e=t[t.length-1];return e?e.params:{}}function ot(t,{relative:e}={}){let{matches:r}=f.useContext(te),{pathname:s}=ie(),n=JSON.stringify(Cs(r));return f.useMemo(()=>Ps(t,JSON.parse(n),s,e==="path"),[t,n,s,e])}function Ln(t,e){return zs(t,e)}function zs(t,e,r,s,n){var w;I(it(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:i}=f.useContext(K),{matches:o}=f.useContext(te),l=o[o.length-1],c=l?l.params:{},d=l?l.pathname:"/",u=l?l.pathnameBase:"/",h=l&&l.route;{let y=h&&h.path||"";Fs(d,!h||y.endsWith("*")||y.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${d}" (under <Route path="${y}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${y}"> to <Route path="${y==="/"?"*":`${y}/*`}">.`)}let p=ie(),m;if(e){let y=typeof e=="string"?qe(e):e;I(u==="/"||((w=y.pathname)==null?void 0:w.startsWith(u)),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${u}" but pathname "${y.pathname}" was given in the \`location\` prop.`),m=y}else m=p;let g=m.pathname||"/",b=g;if(u!=="/"){let y=u.replace(/^\//,"").split("/");b="/"+g.replace(/^\//,"").split("/").slice(y.length).join("/")}let v=Ts(t,{pathname:b});ee(h||v!=null,`No routes matched location "${m.pathname}${m.search}${m.hash}" `),ee(v==null||v[v.length-1].route.element!==void 0||v[v.length-1].route.Component!==void 0||v[v.length-1].route.lazy!==void 0,`Matched leaf route at location "${m.pathname}${m.search}${m.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let x=zn(v&&v.map(y=>Object.assign({},y,{params:Object.assign({},c,y.params),pathname:ae([u,i.encodeLocation?i.encodeLocation(y.pathname.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:y.pathname]),pathnameBase:y.pathnameBase==="/"?u:ae([u,i.encodeLocation?i.encodeLocation(y.pathnameBase.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:y.pathnameBase])})),o,r,s,n);return e&&x?f.createElement(nt.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...m},navigationType:"POP"}},x):x}function Dn(){let t=Vn(),e=jn(t)?`${t.status} ${t.statusText}`:t instanceof Error?t.message:JSON.stringify(t),r=t instanceof Error?t.stack:null,s="rgba(200,200,200, 0.5)",n={padding:"0.5rem",backgroundColor:s},i={padding:"2px 4px",backgroundColor:s},o=null;return console.error("Error handled by React Router default ErrorBoundary:",t),o=f.createElement(f.Fragment,null,f.createElement("p",null,"ðŸ’¿ Hey developer ðŸ‘‹"),f.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",f.createElement("code",{style:i},"ErrorBoundary")," or"," ",f.createElement("code",{style:i},"errorElement")," prop on your route.")),f.createElement(f.Fragment,null,f.createElement("h2",null,"Unexpected Application Error!"),f.createElement("h3",{style:{fontStyle:"italic"}},e),r?f.createElement("pre",{style:n},r):null,o)}var Un=f.createElement(Dn,null),Bs=class extends f.Component{constructor(t){super(t),this.state={location:t.location,revalidation:t.revalidation,error:t.error}}static getDerivedStateFromError(t){return{error:t}}static getDerivedStateFromProps(t,e){return e.location!==t.location||e.revalidation!=="idle"&&t.revalidation==="idle"?{error:t.error,location:t.location,revalidation:t.revalidation}:{error:t.error!==void 0?t.error:e.error,location:e.location,revalidation:t.revalidation||e.revalidation}}componentDidCatch(t,e){this.props.onError?this.props.onError(t,e):console.error("React Router caught the following error during render",t)}render(){let t=this.state.error;if(this.context&&typeof t=="object"&&t&&"digest"in t&&typeof t.digest=="string"){const r=Cn(t.digest);r&&(t=r)}let e=t!==void 0?f.createElement(te.Provider,{value:this.props.routeContext},f.createElement(Nr.Provider,{value:t,children:this.props.component})):this.props.children;return this.context?f.createElement(qn,{error:t},e):e}};Bs.contextType=En;var Vt=new WeakMap;function qn({children:t,error:e}){let{basename:r}=f.useContext(K);if(typeof e=="object"&&e&&"digest"in e&&typeof e.digest=="string"){let s=On(e.digest);if(s){let n=Vt.get(e);if(n)throw n;let i=$s(s.location,r);if(Is&&!Vt.get(e))if(i.isExternal||s.reloadDocument)window.location.href=i.absoluteURL||i.to;else{const o=Promise.resolve().then(()=>window.__reactRouterDataRouter.navigate(i.to,{replace:s.replace}));throw Vt.set(e,o),o}return f.createElement("meta",{httpEquiv:"refresh",content:`0;url=${i.absoluteURL||i.to}`})}}return t}function Mn({routeContext:t,match:e,children:r}){let s=f.useContext(Me);return s&&s.static&&s.staticContext&&(e.route.errorElement||e.route.ErrorBoundary)&&(s.staticContext._deepestRenderedBoundaryId=e.route.id),f.createElement(te.Provider,{value:t},r)}function zn(t,e=[],r=null,s=null,n=null){if(t==null){if(!r)return null;if(r.errors)t=r.matches;else if(e.length===0&&!r.initialized&&r.matches.length>0)t=r.matches;else return null}let i=t,o=r==null?void 0:r.errors;if(o!=null){let u=i.findIndex(h=>h.route.id&&(o==null?void 0:o[h.route.id])!==void 0);I(u>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(o).join(",")}`),i=i.slice(0,Math.min(i.length,u+1))}let l=!1,c=-1;if(r)for(let u=0;u<i.length;u++){let h=i[u];if((h.route.HydrateFallback||h.route.hydrateFallbackElement)&&(c=u),h.route.id){let{loaderData:p,errors:m}=r,g=h.route.loader&&!p.hasOwnProperty(h.route.id)&&(!m||m[h.route.id]===void 0);if(h.route.lazy||g){l=!0,c>=0?i=i.slice(0,c+1):i=[i[0]];break}}}let d=r&&s?(u,h)=>{var p,m;s(u,{location:r.location,params:((m=(p=r.matches)==null?void 0:p[0])==null?void 0:m.params)??{},unstable_pattern:Nn(r.matches),errorInfo:h})}:void 0;return i.reduceRight((u,h,p)=>{let m,g=!1,b=null,v=null;r&&(m=o&&h.route.id?o[h.route.id]:void 0,b=h.route.errorElement||Un,l&&(c<0&&p===0?(Fs("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),g=!0,v=null):c===p&&(g=!0,v=h.route.hydrateFallbackElement||null)));let x=e.concat(i.slice(0,p+1)),w=()=>{let y;return m?y=b:g?y=v:h.route.Component?y=f.createElement(h.route.Component,null):h.route.element?y=h.route.element:y=u,f.createElement(Mn,{match:h,routeContext:{outlet:u,matches:x,isDataRoute:r!=null},children:y})};return r&&(h.route.ErrorBoundary||h.route.errorElement||p===0)?f.createElement(Bs,{location:r.location,revalidation:r.revalidation,component:b,error:m,children:w(),routeContext:{outlet:null,matches:x,isDataRoute:!0},onError:d}):w()},null)}function Sr(t){return`${t} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function Bn(t){let e=f.useContext(Me);return I(e,Sr(t)),e}function Fn(t){let e=f.useContext(Ct);return I(e,Sr(t)),e}function Hn(t){let e=f.useContext(te);return I(e,Sr(t)),e}function Er(t){let e=Hn(t),r=e.matches[e.matches.length-1];return I(r.route.id,`${t} can only be used on routes that contain a unique "id"`),r.route.id}function Wn(){return Er("useRouteId")}function Vn(){var s;let t=f.useContext(Nr),e=Fn("useRouteError"),r=Er("useRouteError");return t!==void 0?t:(s=e.errors)==null?void 0:s[r]}function Kn(){let{router:t}=Bn("useNavigate"),e=Er("useNavigate"),r=f.useRef(!1);return Ms(()=>{r.current=!0}),f.useCallback(async(n,i={})=>{ee(r.current,qs),r.current&&(typeof n=="number"?await t.navigate(n):await t.navigate(n,{fromRouteId:e,...i}))},[t,e])}var Fr={};function Fs(t,e,r){!e&&!Fr[t]&&(Fr[t]=!0,ee(!1,r))}f.memo(Gn);function Gn({routes:t,future:e,state:r,onError:s}){return zs(t,void 0,r,s,e)}function F(t){I(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function Jn({basename:t="/",children:e=null,location:r,navigationType:s="POP",navigator:n,static:i=!1,unstable_useTransitions:o}){I(!it(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let l=t.replace(/^\/*/,"/"),c=f.useMemo(()=>({basename:l,navigator:n,static:i,unstable_useTransitions:o,future:{}}),[l,n,i,o]);typeof r=="string"&&(r=qe(r));let{pathname:d="/",search:u="",hash:h="",state:p=null,key:m="default"}=r,g=f.useMemo(()=>{let b=ne(d,l);return b==null?null:{location:{pathname:b,search:u,hash:h,state:p,key:m},navigationType:s}},[l,d,u,h,p,m,s]);return ee(g!=null,`<Router basename="${l}"> is not able to match the URL "${d}${u}${h}" because it does not start with the basename, so the <Router> won't render anything.`),g==null?null:f.createElement(K.Provider,{value:c},f.createElement(nt.Provider,{children:e,value:g}))}function Hr({children:t,location:e}){return Ln(dr(t),e)}function dr(t,e=[]){let r=[];return f.Children.forEach(t,(s,n)=>{if(!f.isValidElement(s))return;let i=[...e,n];if(s.type===f.Fragment){r.push.apply(r,dr(s.props.children,i));return}I(s.type===F,`[${typeof s.type=="string"?s.type:s.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),I(!s.props.index||!s.props.children,"An index route cannot have child routes.");let o={id:s.props.id||i.join("-"),caseSensitive:s.props.caseSensitive,element:s.props.element,Component:s.props.Component,index:s.props.index,path:s.props.path,middleware:s.props.middleware,loader:s.props.loader,action:s.props.action,hydrateFallbackElement:s.props.hydrateFallbackElement,HydrateFallback:s.props.HydrateFallback,errorElement:s.props.errorElement,ErrorBoundary:s.props.ErrorBoundary,hasErrorBoundary:s.props.hasErrorBoundary===!0||s.props.ErrorBoundary!=null||s.props.errorElement!=null,shouldRevalidate:s.props.shouldRevalidate,handle:s.props.handle,lazy:s.props.lazy};s.props.children&&(o.children=dr(s.props.children,i)),r.push(o)}),r}var _t="get",jt="application/x-www-form-urlencoded";function It(t){return typeof HTMLElement<"u"&&t instanceof HTMLElement}function Yn(t){return It(t)&&t.tagName.toLowerCase()==="button"}function Qn(t){return It(t)&&t.tagName.toLowerCase()==="form"}function Xn(t){return It(t)&&t.tagName.toLowerCase()==="input"}function Zn(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}function ei(t,e){return t.button===0&&(!e||e==="_self")&&!Zn(t)}var ht=null;function ti(){if(ht===null)try{new FormData(document.createElement("form"),0),ht=!1}catch{ht=!0}return ht}var ri=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function Kt(t){return t!=null&&!ri.has(t)?(ee(!1,`"${t}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${jt}"`),null):t}function si(t,e){let r,s,n,i,o;if(Qn(t)){let l=t.getAttribute("action");s=l?ne(l,e):null,r=t.getAttribute("method")||_t,n=Kt(t.getAttribute("enctype"))||jt,i=new FormData(t)}else if(Yn(t)||Xn(t)&&(t.type==="submit"||t.type==="image")){let l=t.form;if(l==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let c=t.getAttribute("formaction")||l.getAttribute("action");if(s=c?ne(c,e):null,r=t.getAttribute("formmethod")||l.getAttribute("method")||_t,n=Kt(t.getAttribute("formenctype"))||Kt(l.getAttribute("enctype"))||jt,i=new FormData(l,t),!ti()){let{name:d,type:u,value:h}=t;if(u==="image"){let p=d?`${d}.`:"";i.append(`${p}x`,"0"),i.append(`${p}y`,"0")}else d&&i.append(d,h)}}else{if(It(t))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');r=_t,s=null,n=jt,o=t}return i&&n==="text/plain"&&(o=i,i=void 0),{action:s,method:r.toLowerCase(),encType:n,formData:i,body:o}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");function kr(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function ai(t,e,r,s){let n=typeof t=="string"?new URL(t,typeof window>"u"?"server://singlefetch/":window.location.origin):t;return r?n.pathname.endsWith("/")?n.pathname=`${n.pathname}_.${s}`:n.pathname=`${n.pathname}.${s}`:n.pathname==="/"?n.pathname=`_root.${s}`:e&&ne(n.pathname,e)==="/"?n.pathname=`${e.replace(/\/$/,"")}/_root.${s}`:n.pathname=`${n.pathname.replace(/\/$/,"")}.${s}`,n}async function ni(t,e){if(t.id in e)return e[t.id];try{let r=await import(t.module);return e[t.id]=r,r}catch(r){return console.error(`Error loading route module \`${t.module}\`, reloading page...`),console.error(r),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function ii(t){return t==null?!1:t.href==null?t.rel==="preload"&&typeof t.imageSrcSet=="string"&&typeof t.imageSizes=="string":typeof t.rel=="string"&&typeof t.href=="string"}async function oi(t,e,r){let s=await Promise.all(t.map(async n=>{let i=e.routes[n.route.id];if(i){let o=await ni(i,r);return o.links?o.links():[]}return[]}));return ui(s.flat(1).filter(ii).filter(n=>n.rel==="stylesheet"||n.rel==="preload").map(n=>n.rel==="stylesheet"?{...n,rel:"prefetch",as:"style"}:{...n,rel:"prefetch"}))}function Wr(t,e,r,s,n,i){let o=(c,d)=>r[d]?c.route.id!==r[d].route.id:!0,l=(c,d)=>{var u;return r[d].pathname!==c.pathname||((u=r[d].route.path)==null?void 0:u.endsWith("*"))&&r[d].params["*"]!==c.params["*"]};return i==="assets"?e.filter((c,d)=>o(c,d)||l(c,d)):i==="data"?e.filter((c,d)=>{var h;let u=s.routes[c.route.id];if(!u||!u.hasLoader)return!1;if(o(c,d)||l(c,d))return!0;if(c.route.shouldRevalidate){let p=c.route.shouldRevalidate({currentUrl:new URL(n.pathname+n.search+n.hash,window.origin),currentParams:((h=r[0])==null?void 0:h.params)||{},nextUrl:new URL(t,window.origin),nextParams:c.params,defaultShouldRevalidate:!0});if(typeof p=="boolean")return p}return!0}):[]}function li(t,e,{includeHydrateFallback:r}={}){return ci(t.map(s=>{let n=e.routes[s.route.id];if(!n)return[];let i=[n.module];return n.clientActionModule&&(i=i.concat(n.clientActionModule)),n.clientLoaderModule&&(i=i.concat(n.clientLoaderModule)),r&&n.hydrateFallbackModule&&(i=i.concat(n.hydrateFallbackModule)),n.imports&&(i=i.concat(n.imports)),i}).flat(1))}function ci(t){return[...new Set(t)]}function di(t){let e={},r=Object.keys(t).sort();for(let s of r)e[s]=t[s];return e}function ui(t,e){let r=new Set;return new Set(e),t.reduce((s,n)=>{let i=JSON.stringify(di(n));return r.has(i)||(r.add(i),s.push({key:i,link:n})),s},[])}function Hs(){let t=f.useContext(Me);return kr(t,"You must render this element inside a <DataRouterContext.Provider> element"),t}function hi(){let t=f.useContext(Ct);return kr(t,"You must render this element inside a <DataRouterStateContext.Provider> element"),t}var Ar=f.createContext(void 0);Ar.displayName="FrameworkContext";function Ws(){let t=f.useContext(Ar);return kr(t,"You must render this element inside a <HydratedRouter> element"),t}function mi(t,e){let r=f.useContext(Ar),[s,n]=f.useState(!1),[i,o]=f.useState(!1),{onFocus:l,onBlur:c,onMouseEnter:d,onMouseLeave:u,onTouchStart:h}=e,p=f.useRef(null);f.useEffect(()=>{if(t==="render"&&o(!0),t==="viewport"){let b=x=>{x.forEach(w=>{o(w.isIntersecting)})},v=new IntersectionObserver(b,{threshold:.5});return p.current&&v.observe(p.current),()=>{v.disconnect()}}},[t]),f.useEffect(()=>{if(s){let b=setTimeout(()=>{o(!0)},100);return()=>{clearTimeout(b)}}},[s]);let m=()=>{n(!0)},g=()=>{n(!1),o(!1)};return r?t!=="intent"?[i,p,{}]:[i,p,{onFocus:We(l,m),onBlur:We(c,g),onMouseEnter:We(d,m),onMouseLeave:We(u,g),onTouchStart:We(h,m)}]:[!1,p,{}]}function We(t,e){return r=>{t&&t(r),r.defaultPrevented||e(r)}}function pi({page:t,...e}){let{router:r}=Hs(),s=f.useMemo(()=>Ts(r.routes,t,r.basename),[r.routes,t,r.basename]);return s?f.createElement(gi,{page:t,matches:s,...e}):null}function fi(t){let{manifest:e,routeModules:r}=Ws(),[s,n]=f.useState([]);return f.useEffect(()=>{let i=!1;return oi(t,e,r).then(o=>{i||n(o)}),()=>{i=!0}},[t,e,r]),s}function gi({page:t,matches:e,...r}){let s=ie(),{future:n,manifest:i,routeModules:o}=Ws(),{basename:l}=Hs(),{loaderData:c,matches:d}=hi(),u=f.useMemo(()=>Wr(t,e,d,i,s,"data"),[t,e,d,i,s]),h=f.useMemo(()=>Wr(t,e,d,i,s,"assets"),[t,e,d,i,s]),p=f.useMemo(()=>{if(t===s.pathname+s.search+s.hash)return[];let b=new Set,v=!1;if(e.forEach(w=>{var N;let y=i.routes[w.route.id];!y||!y.hasLoader||(!u.some(_=>_.route.id===w.route.id)&&w.route.id in c&&((N=o[w.route.id])!=null&&N.shouldRevalidate)||y.hasClientLoader?v=!0:b.add(w.route.id))}),b.size===0)return[];let x=ai(t,l,n.unstable_trailingSlashAwareDataRequests,"data");return v&&b.size>0&&x.searchParams.set("_routes",e.filter(w=>b.has(w.route.id)).map(w=>w.route.id).join(",")),[x.pathname+x.search]},[l,n.unstable_trailingSlashAwareDataRequests,c,s,i,u,e,t,o]),m=f.useMemo(()=>li(h,i),[h,i]),g=fi(h);return f.createElement(f.Fragment,null,p.map(b=>f.createElement("link",{key:b,rel:"prefetch",as:"fetch",href:b,...r})),m.map(b=>f.createElement("link",{key:b,rel:"modulepreload",href:b,...r})),g.map(({key:b,link:v})=>f.createElement("link",{key:b,nonce:r.nonce,...v,crossOrigin:v.crossOrigin??r.crossOrigin})))}function xi(...t){return e=>{t.forEach(r=>{typeof r=="function"?r(e):r!=null&&(r.current=e)})}}var bi=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{bi&&(window.__reactRouterVersion="7.13.0")}catch{}function vi({basename:t,children:e,unstable_useTransitions:r,window:s}){let n=f.useRef();n.current==null&&(n.current=Xa({window:s,v5Compat:!0}));let i=n.current,[o,l]=f.useState({action:i.action,location:i.location}),c=f.useCallback(d=>{r===!1?l(d):f.startTransition(()=>l(d))},[r]);return f.useLayoutEffect(()=>i.listen(c),[i,c]),f.createElement(Jn,{basename:t,children:e,location:o.location,navigationType:o.action,navigator:i,unstable_useTransitions:r})}var Vs=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,B=f.forwardRef(function({onClick:e,discover:r="render",prefetch:s="none",relative:n,reloadDocument:i,replace:o,state:l,target:c,to:d,preventScrollReset:u,viewTransition:h,unstable_defaultShouldRevalidate:p,...m},g){let{basename:b,unstable_useTransitions:v}=f.useContext(K),x=typeof d=="string"&&Vs.test(d),w=$s(d,b);d=w.to;let y=Pn(d,{relative:n}),[N,_,j]=mi(s,m),E=ji(d,{replace:o,state:l,target:c,preventScrollReset:u,relative:n,viewTransition:h,unstable_defaultShouldRevalidate:p,unstable_useTransitions:v});function k(q){e&&e(q),q.defaultPrevented||E(q)}let R=f.createElement("a",{...m,...j,href:w.absoluteURL||y,onClick:w.isExternal||i?e:k,ref:xi(g,_),target:c,"data-discover":!x&&r==="render"?"true":void 0});return N&&!x?f.createElement(f.Fragment,null,R,f.createElement(pi,{page:y})):R});B.displayName="Link";var yi=f.forwardRef(function({"aria-current":e="page",caseSensitive:r=!1,className:s="",end:n=!1,style:i,to:o,viewTransition:l,children:c,...d},u){let h=ot(o,{relative:d.relative}),p=ie(),m=f.useContext(Ct),{navigator:g,basename:b}=f.useContext(K),v=m!=null&&Ai(h)&&l===!0,x=g.encodeLocation?g.encodeLocation(h).pathname:h.pathname,w=p.pathname,y=m&&m.navigation&&m.navigation.location?m.navigation.location.pathname:null;r||(w=w.toLowerCase(),y=y?y.toLowerCase():null,x=x.toLowerCase()),y&&b&&(y=ne(y,b)||y);const N=x!=="/"&&x.endsWith("/")?x.length-1:x.length;let _=w===x||!n&&w.startsWith(x)&&w.charAt(N)==="/",j=y!=null&&(y===x||!n&&y.startsWith(x)&&y.charAt(x.length)==="/"),E={isActive:_,isPending:j,isTransitioning:v},k=_?e:void 0,R;typeof s=="function"?R=s(E):R=[s,_?"active":null,j?"pending":null,v?"transitioning":null].filter(Boolean).join(" ");let q=typeof i=="function"?i(E):i;return f.createElement(B,{...d,"aria-current":k,className:R,ref:u,style:q,to:o,viewTransition:l},typeof c=="function"?c(E):c)});yi.displayName="NavLink";var wi=f.forwardRef(({discover:t="render",fetcherKey:e,navigate:r,reloadDocument:s,replace:n,state:i,method:o=_t,action:l,onSubmit:c,relative:d,preventScrollReset:u,viewTransition:h,unstable_defaultShouldRevalidate:p,...m},g)=>{let{unstable_useTransitions:b}=f.useContext(K),v=Ei(),x=ki(l,{relative:d}),w=o.toLowerCase()==="get"?"get":"post",y=typeof l=="string"&&Vs.test(l),N=_=>{if(c&&c(_),_.defaultPrevented)return;_.preventDefault();let j=_.nativeEvent.submitter,E=(j==null?void 0:j.getAttribute("formmethod"))||o,k=()=>v(j||_.currentTarget,{fetcherKey:e,method:E,navigate:r,replace:n,state:i,relative:d,preventScrollReset:u,viewTransition:h,unstable_defaultShouldRevalidate:p});b&&r!==!1?f.startTransition(()=>k()):k()};return f.createElement("form",{ref:g,method:w,action:x,onSubmit:s?c:N,...m,"data-discover":!y&&t==="render"?"true":void 0})});wi.displayName="Form";function _i(t){return`${t} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function Ks(t){let e=f.useContext(Me);return I(e,_i(t)),e}function ji(t,{target:e,replace:r,state:s,preventScrollReset:n,relative:i,viewTransition:o,unstable_defaultShouldRevalidate:l,unstable_useTransitions:c}={}){let d=Pt(),u=ie(),h=ot(t,{relative:i});return f.useCallback(p=>{if(ei(p,e)){p.preventDefault();let m=r!==void 0?r:Qe(u)===Qe(h),g=()=>d(t,{replace:m,state:s,preventScrollReset:n,relative:i,viewTransition:o,unstable_defaultShouldRevalidate:l});c?f.startTransition(()=>g()):g()}},[u,d,h,r,s,e,t,n,i,o,l,c])}var Ni=0,Si=()=>`__${String(++Ni)}__`;function Ei(){let{router:t}=Ks("useSubmit"),{basename:e}=f.useContext(K),r=Wn(),s=t.fetch,n=t.navigate;return f.useCallback(async(i,o={})=>{let{action:l,method:c,encType:d,formData:u,body:h}=si(i,e);if(o.navigate===!1){let p=o.fetcherKey||Si();await s(p,r,o.action||l,{unstable_defaultShouldRevalidate:o.unstable_defaultShouldRevalidate,preventScrollReset:o.preventScrollReset,formData:u,body:h,formMethod:o.method||c,formEncType:o.encType||d,flushSync:o.flushSync})}else await n(o.action||l,{unstable_defaultShouldRevalidate:o.unstable_defaultShouldRevalidate,preventScrollReset:o.preventScrollReset,formData:u,body:h,formMethod:o.method||c,formEncType:o.encType||d,replace:o.replace,state:o.state,fromRouteId:r,flushSync:o.flushSync,viewTransition:o.viewTransition})},[s,n,e,r])}function ki(t,{relative:e}={}){let{basename:r}=f.useContext(K),s=f.useContext(te);I(s,"useFormAction must be used inside a RouteContext");let[n]=s.matches.slice(-1),i={...ot(t||".",{relative:e})},o=ie();if(t==null){i.search=o.search;let l=new URLSearchParams(i.search),c=l.getAll("index");if(c.some(u=>u==="")){l.delete("index"),c.filter(h=>h).forEach(h=>l.append("index",h));let u=l.toString();i.search=u?`?${u}`:""}}return(!t||t===".")&&n.route.index&&(i.search=i.search?i.search.replace(/^\?/,"?index&"):"?index"),r!=="/"&&(i.pathname=i.pathname==="/"?r:ae([r,i.pathname])),Qe(i)}function Ai(t,{relative:e}={}){let r=f.useContext(Ds);I(r!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:s}=Ks("useViewTransitionState"),n=ot(t,{relative:e});if(!r.isTransitioning)return!1;let i=ne(r.currentLocation.pathname,s)||r.currentLocation.pathname,o=ne(r.nextLocation.pathname,s)||r.nextLocation.pathname;return St(n.pathname,o)!=null||St(n.pathname,i)!=null}/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ti=[["path",{d:"M22 12h-2.48a2 2 0 0 0-1.93 1.46l-2.35 8.36a.25.25 0 0 1-.48 0L9.24 2.18a.25.25 0 0 0-.48 0l-2.35 8.36A2 2 0 0 1 4.49 12H2",key:"169zse"}]],ye=O("activity",Ti);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ri=[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]],Oi=O("arrow-left",Ri);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ci=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]],$e=O("arrow-right",Ci);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Pi=[["path",{d:"M12 7v14",key:"1akyts"}],["path",{d:"M3 18a1 1 0 0 1-1-1V4a1 1 0 0 1 1-1h5a4 4 0 0 1 4 4 4 4 0 0 1 4-4h5a1 1 0 0 1 1 1v13a1 1 0 0 1-1 1h-6a3 3 0 0 0-3 3 3 3 0 0 0-3-3z",key:"ruj8y"}]],$t=O("book-open",Pi);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ii=[["path",{d:"M12 18V5",key:"adv99a"}],["path",{d:"M15 13a4.17 4.17 0 0 1-3-4 4.17 4.17 0 0 1-3 4",key:"1e3is1"}],["path",{d:"M17.598 6.5A3 3 0 1 0 12 5a3 3 0 1 0-5.598 1.5",key:"1gqd8o"}],["path",{d:"M17.997 5.125a4 4 0 0 1 2.526 5.77",key:"iwvgf7"}],["path",{d:"M18 18a4 4 0 0 0 2-7.464",key:"efp6ie"}],["path",{d:"M19.967 17.483A4 4 0 1 1 12 18a4 4 0 1 1-7.967-.517",key:"1gq6am"}],["path",{d:"M6 18a4 4 0 0 1-2-7.464",key:"k1g0md"}],["path",{d:"M6.003 5.125a4 4 0 0 0-2.526 5.77",key:"q97ue3"}]],we=O("brain",Ii);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $i=[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]],lt=O("calendar",$i);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Li=[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]],Di=O("check",Li);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ui=[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]],qi=O("chevron-left",Ui);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Mi=[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]],Z=O("chevron-right",Mi);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zi=[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]],Bi=O("circle-check-big",zi);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Fi=[["path",{d:"M12 6v6l4 2",key:"mmk7yg"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]],ur=O("clock",Fi);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Hi=[["path",{d:"M12 20v2",key:"1lh1kg"}],["path",{d:"M12 2v2",key:"tus03m"}],["path",{d:"M17 20v2",key:"1rnc9c"}],["path",{d:"M17 2v2",key:"11trls"}],["path",{d:"M2 12h2",key:"1t8f8n"}],["path",{d:"M2 17h2",key:"7oei6x"}],["path",{d:"M2 7h2",key:"asdhe0"}],["path",{d:"M20 12h2",key:"1q8mjw"}],["path",{d:"M20 17h2",key:"1fpfkl"}],["path",{d:"M20 7h2",key:"1o8tra"}],["path",{d:"M7 20v2",key:"4gnj0m"}],["path",{d:"M7 2v2",key:"1i4yhu"}],["rect",{x:"4",y:"4",width:"16",height:"16",rx:"2",key:"1vbyd7"}],["rect",{x:"8",y:"8",width:"8",height:"8",rx:"1",key:"z9xiuo"}]],Tr=O("cpu",Hi);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Wi=[["ellipse",{cx:"12",cy:"5",rx:"9",ry:"3",key:"msslwz"}],["path",{d:"M3 5V19A9 3 0 0 0 21 19V5",key:"1wlel7"}],["path",{d:"M3 12A9 3 0 0 0 21 12",key:"mv7ke4"}]],Lt=O("database",Wi);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Vi=[["path",{d:"M12 15V3",key:"m9g1x1"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["path",{d:"m7 10 5 5 5-5",key:"brsn70"}]],Ki=O("download",Vi);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Gi=[["path",{d:"m12 14 4-4",key:"9kzdfg"}],["path",{d:"M3.34 19a10 10 0 1 1 17.32 0",key:"19p75a"}]],Ji=O("gauge",Gi);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Yi=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 2a14.5 14.5 0 0 0 0 20 14.5 14.5 0 0 0 0-20",key:"13o1zl"}],["path",{d:"M2 12h20",key:"9i4pu4"}]],Q=O("globe",Yi);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Qi=[["line",{x1:"4",x2:"20",y1:"9",y2:"9",key:"4lhtct"}],["line",{x1:"4",x2:"20",y1:"15",y2:"15",key:"vyu0kd"}],["line",{x1:"10",x2:"8",y1:"3",y2:"21",key:"1ggp8o"}],["line",{x1:"16",x2:"14",y1:"3",y2:"21",key:"weycgp"}]],Gs=O("hash",Qi);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Xi=[["path",{d:"M3 14h3a2 2 0 0 1 2 2v3a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-7a9 9 0 0 1 18 0v7a2 2 0 0 1-2 2h-1a2 2 0 0 1-2-2v-3a2 2 0 0 1 2-2h3",key:"1xhozi"}]],Zi=O("headphones",Xi);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const eo=[["path",{d:"M15 21v-8a1 1 0 0 0-1-1h-4a1 1 0 0 0-1 1v8",key:"5wwlr5"}],["path",{d:"M3 10a2 2 0 0 1 .709-1.528l7-6a2 2 0 0 1 2.582 0l7 6A2 2 0 0 1 21 10v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"r6nss1"}]],to=O("house",eo);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ro=[["path",{d:"m15.5 7.5 2.3 2.3a1 1 0 0 0 1.4 0l2.1-2.1a1 1 0 0 0 0-1.4L19 4",key:"g0fldk"}],["path",{d:"m21 2-9.6 9.6",key:"1j0ho8"}],["circle",{cx:"7.5",cy:"15.5",r:"5.5",key:"yqb3hr"}]],so=O("key",ro);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ao=[["path",{d:"M12.83 2.18a2 2 0 0 0-1.66 0L2.6 6.08a1 1 0 0 0 0 1.83l8.58 3.91a2 2 0 0 0 1.66 0l8.58-3.9a1 1 0 0 0 0-1.83z",key:"zw3jo"}],["path",{d:"M2 12a1 1 0 0 0 .58.91l8.6 3.91a2 2 0 0 0 1.65 0l8.58-3.9A1 1 0 0 0 22 12",key:"1wduqc"}],["path",{d:"M2 17a1 1 0 0 0 .58.91l8.6 3.91a2 2 0 0 0 1.65 0l8.58-3.9A1 1 0 0 0 22 17",key:"kqbvx6"}]],Js=O("layers",ao);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const no=[["path",{d:"M22 17a2 2 0 0 1-2 2H6.828a2 2 0 0 0-1.414.586l-2.202 2.202A.71.71 0 0 1 2 21.286V5a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2z",key:"18887p"}]],Et=O("message-square",no);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const io=[["rect",{x:"16",y:"16",width:"6",height:"6",rx:"1",key:"4q2zg0"}],["rect",{x:"2",y:"16",width:"6",height:"6",rx:"1",key:"8cvhb9"}],["rect",{x:"9",y:"2",width:"6",height:"6",rx:"1",key:"1egb70"}],["path",{d:"M5 16v-3a1 1 0 0 1 1-1h12a1 1 0 0 1 1 1v3",key:"1jsf9p"}],["path",{d:"M12 12V8",key:"2874zd"}]],oo=O("network",io);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lo=[["rect",{x:"14",y:"3",width:"5",height:"18",rx:"1",key:"kaeet6"}],["rect",{x:"5",y:"3",width:"5",height:"18",rx:"1",key:"1wsw3u"}]],co=O("pause",lo);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const uo=[["path",{d:"M13 21h8",key:"1jsn5i"}],["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}]],ho=O("pen-line",uo);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mo=[["path",{d:"M5 5a2 2 0 0 1 3.008-1.728l11.997 6.998a2 2 0 0 1 .003 3.458l-12 7A2 2 0 0 1 5 19z",key:"10ikf1"}]],Vr=O("play",mo);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const po=[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]],fo=O("save",po);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const go=[["path",{d:"m21 21-4.34-4.34",key:"14j7rj"}],["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}]],De=O("search",go);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xo=[["circle",{cx:"18",cy:"5",r:"3",key:"gq8acd"}],["circle",{cx:"6",cy:"12",r:"3",key:"w7nqdw"}],["circle",{cx:"18",cy:"19",r:"3",key:"1xt0gg"}],["line",{x1:"8.59",x2:"15.42",y1:"13.51",y2:"17.49",key:"47mynk"}],["line",{x1:"15.41",x2:"8.59",y1:"6.51",y2:"10.49",key:"1n3mei"}]],Rr=O("share-2",xo);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bo=[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}],["path",{d:"M12 8v4",key:"1got3b"}],["path",{d:"M12 16h.01",key:"1drbdi"}]],vo=O("shield-alert",bo);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yo=[["path",{d:"M18 7V5a1 1 0 0 0-1-1H6.5a.5.5 0 0 0-.4.8l4.5 6a2 2 0 0 1 0 2.4l-4.5 6a.5.5 0 0 0 .4.8H17a1 1 0 0 0 1-1v-2",key:"wuwx1p"}]],wo=O("sigma",yo);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _o=[["path",{d:"M11.017 2.814a1 1 0 0 1 1.966 0l1.051 5.558a2 2 0 0 0 1.594 1.594l5.558 1.051a1 1 0 0 1 0 1.966l-5.558 1.051a2 2 0 0 0-1.594 1.594l-1.051 5.558a1 1 0 0 1-1.966 0l-1.051-5.558a2 2 0 0 0-1.594-1.594l-5.558-1.051a1 1 0 0 1 0-1.966l5.558-1.051a2 2 0 0 0 1.594-1.594z",key:"1s2grr"}],["path",{d:"M20 2v4",key:"1rf3ol"}],["path",{d:"M22 4h-4",key:"gwowj6"}],["circle",{cx:"4",cy:"20",r:"2",key:"6kqj1y"}]],kt=O("sparkles",_o);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jo=[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]],Ue=O("triangle-alert",jo);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const No=[["path",{d:"m16 13 5.223 3.482a.5.5 0 0 0 .777-.416V7.87a.5.5 0 0 0-.752-.432L16 10.5",key:"ftymec"}],["rect",{x:"2",y:"6",width:"14",height:"12",rx:"2",key:"158x01"}]],So=O("video",No);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Eo=[["path",{d:"M11 4.702a.705.705 0 0 0-1.203-.498L6.413 7.587A1.4 1.4 0 0 1 5.416 8H3a1 1 0 0 0-1 1v6a1 1 0 0 0 1 1h2.416a1.4 1.4 0 0 1 .997.413l3.383 3.384A.705.705 0 0 0 11 19.298z",key:"uqj9uw"}],["path",{d:"M16 9a5 5 0 0 1 0 6",key:"1q6k2b"}],["path",{d:"M19.364 18.364a9 9 0 0 0 0-12.728",key:"ijwkga"}]],ko=O("volume-2",Eo);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ao=[["path",{d:"M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14z",key:"1xq2db"}]],Dt=O("zap",Ao);function Ut(t,e){var r={};for(var s in t)Object.prototype.hasOwnProperty.call(t,s)&&e.indexOf(s)<0&&(r[s]=t[s]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var n=0,s=Object.getOwnPropertySymbols(t);n<s.length;n++)e.indexOf(s[n])<0&&Object.prototype.propertyIsEnumerable.call(t,s[n])&&(r[s[n]]=t[s[n]]);return r}function To(t,e,r,s){function n(i){return i instanceof r?i:new r(function(o){o(i)})}return new(r||(r=Promise))(function(i,o){function l(u){try{d(s.next(u))}catch(h){o(h)}}function c(u){try{d(s.throw(u))}catch(h){o(h)}}function d(u){u.done?i(u.value):n(u.value).then(l,c)}d((s=s.apply(t,e||[])).next())})}const Ro=t=>t?(...e)=>t(...e):(...e)=>fetch(...e);class Or extends Error{constructor(e,r="FunctionsError",s){super(e),this.name=r,this.context=s}}class Oo extends Or{constructor(e){super("Failed to send a request to the Edge Function","FunctionsFetchError",e)}}class Kr extends Or{constructor(e){super("Relay Error invoking the Edge Function","FunctionsRelayError",e)}}class Gr extends Or{constructor(e){super("Edge Function returned a non-2xx status code","FunctionsHttpError",e)}}var hr;(function(t){t.Any="any",t.ApNortheast1="ap-northeast-1",t.ApNortheast2="ap-northeast-2",t.ApSouth1="ap-south-1",t.ApSoutheast1="ap-southeast-1",t.ApSoutheast2="ap-southeast-2",t.CaCentral1="ca-central-1",t.EuCentral1="eu-central-1",t.EuWest1="eu-west-1",t.EuWest2="eu-west-2",t.EuWest3="eu-west-3",t.SaEast1="sa-east-1",t.UsEast1="us-east-1",t.UsWest1="us-west-1",t.UsWest2="us-west-2"})(hr||(hr={}));class Co{constructor(e,{headers:r={},customFetch:s,region:n=hr.Any}={}){this.url=e,this.headers=r,this.region=n,this.fetch=Ro(s)}setAuth(e){this.headers.Authorization=`Bearer ${e}`}invoke(e){return To(this,arguments,void 0,function*(r,s={}){var n;let i,o;try{const{headers:l,method:c,body:d,signal:u,timeout:h}=s;let p={},{region:m}=s;m||(m=this.region);const g=new URL(`${this.url}/${r}`);m&&m!=="any"&&(p["x-region"]=m,g.searchParams.set("forceFunctionRegion",m));let b;d&&(l&&!Object.prototype.hasOwnProperty.call(l,"Content-Type")||!l)?typeof Blob<"u"&&d instanceof Blob||d instanceof ArrayBuffer?(p["Content-Type"]="application/octet-stream",b=d):typeof d=="string"?(p["Content-Type"]="text/plain",b=d):typeof FormData<"u"&&d instanceof FormData?b=d:(p["Content-Type"]="application/json",b=JSON.stringify(d)):d&&typeof d!="string"&&!(typeof Blob<"u"&&d instanceof Blob)&&!(d instanceof ArrayBuffer)&&!(typeof FormData<"u"&&d instanceof FormData)?b=JSON.stringify(d):b=d;let v=u;h&&(o=new AbortController,i=setTimeout(()=>o.abort(),h),u?(v=o.signal,u.addEventListener("abort",()=>o.abort())):v=o.signal);const x=yield this.fetch(g.toString(),{method:c||"POST",headers:Object.assign(Object.assign(Object.assign({},p),this.headers),l),body:b,signal:v}).catch(_=>{throw new Oo(_)}),w=x.headers.get("x-relay-error");if(w&&w==="true")throw new Kr(x);if(!x.ok)throw new Gr(x);let y=((n=x.headers.get("Content-Type"))!==null&&n!==void 0?n:"text/plain").split(";")[0].trim(),N;return y==="application/json"?N=yield x.json():y==="application/octet-stream"||y==="application/pdf"?N=yield x.blob():y==="text/event-stream"?N=x:y==="multipart/form-data"?N=yield x.formData():N=yield x.text(),{data:N,error:null,response:x}}catch(l){return{data:null,error:l,response:l instanceof Gr||l instanceof Kr?l.context:void 0}}finally{i&&clearTimeout(i)}})}}var Po=class extends Error{constructor(t){super(t.message),this.name="PostgrestError",this.details=t.details,this.hint=t.hint,this.code=t.code}},Io=class{constructor(t){var e,r,s;this.shouldThrowOnError=!1,this.method=t.method,this.url=t.url,this.headers=new Headers(t.headers),this.schema=t.schema,this.body=t.body,this.shouldThrowOnError=(e=t.shouldThrowOnError)!==null&&e!==void 0?e:!1,this.signal=t.signal,this.isMaybeSingle=(r=t.isMaybeSingle)!==null&&r!==void 0?r:!1,this.urlLengthLimit=(s=t.urlLengthLimit)!==null&&s!==void 0?s:8e3,t.fetch?this.fetch=t.fetch:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(t,e){return this.headers=new Headers(this.headers),this.headers.set(t,e),this}then(t,e){var r=this;this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers.set("Accept-Profile",this.schema):this.headers.set("Content-Profile",this.schema)),this.method!=="GET"&&this.method!=="HEAD"&&this.headers.set("Content-Type","application/json");const s=this.fetch;let n=s(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async i=>{let o=null,l=null,c=null,d=i.status,u=i.statusText;if(i.ok){var h,p;if(r.method!=="HEAD"){var m;const x=await i.text();x===""||(r.headers.get("Accept")==="text/csv"||r.headers.get("Accept")&&(!((m=r.headers.get("Accept"))===null||m===void 0)&&m.includes("application/vnd.pgrst.plan+text"))?l=x:l=JSON.parse(x))}const b=(h=r.headers.get("Prefer"))===null||h===void 0?void 0:h.match(/count=(exact|planned|estimated)/),v=(p=i.headers.get("content-range"))===null||p===void 0?void 0:p.split("/");b&&v&&v.length>1&&(c=parseInt(v[1])),r.isMaybeSingle&&r.method==="GET"&&Array.isArray(l)&&(l.length>1?(o={code:"PGRST116",details:`Results contain ${l.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},l=null,c=null,d=406,u="Not Acceptable"):l.length===1?l=l[0]:l=null)}else{var g;const b=await i.text();try{o=JSON.parse(b),Array.isArray(o)&&i.status===404&&(l=[],o=null,d=200,u="OK")}catch{i.status===404&&b===""?(d=204,u="No Content"):o={message:b}}if(o&&r.isMaybeSingle&&(!(o==null||(g=o.details)===null||g===void 0)&&g.includes("0 rows"))&&(o=null,d=200,u="OK"),o&&r.shouldThrowOnError)throw new Po(o)}return{error:o,data:l,count:c,status:d,statusText:u}});return this.shouldThrowOnError||(n=n.catch(i=>{var o;let l="",c="",d="";const u=i==null?void 0:i.cause;if(u){var h,p,m,g;const x=(h=u==null?void 0:u.message)!==null&&h!==void 0?h:"",w=(p=u==null?void 0:u.code)!==null&&p!==void 0?p:"";l=`${(m=i==null?void 0:i.name)!==null&&m!==void 0?m:"FetchError"}: ${i==null?void 0:i.message}`,l+=`

Caused by: ${(g=u==null?void 0:u.name)!==null&&g!==void 0?g:"Error"}: ${x}`,w&&(l+=` (${w})`),u!=null&&u.stack&&(l+=`
${u.stack}`)}else{var b;l=(b=i==null?void 0:i.stack)!==null&&b!==void 0?b:""}const v=this.url.toString().length;return(i==null?void 0:i.name)==="AbortError"||(i==null?void 0:i.code)==="ABORT_ERR"?(d="",c="Request was aborted (timeout or manual cancellation)",v>this.urlLengthLimit&&(c+=`. Note: Your request URL is ${v} characters, which may exceed server limits. If selecting many fields, consider using views. If filtering with large arrays (e.g., .in('id', [many IDs])), consider using an RPC function to pass values server-side.`)):((u==null?void 0:u.name)==="HeadersOverflowError"||(u==null?void 0:u.code)==="UND_ERR_HEADERS_OVERFLOW")&&(d="",c="HTTP headers exceeded server limits (typically 16KB)",v>this.urlLengthLimit&&(c+=`. Your request URL is ${v} characters. If selecting many fields, consider using views. If filtering with large arrays (e.g., .in('id', [200+ IDs])), consider using an RPC function instead.`)),{error:{message:`${(o=i==null?void 0:i.name)!==null&&o!==void 0?o:"FetchError"}: ${i==null?void 0:i.message}`,details:l,hint:c,code:d},data:null,count:null,status:0,statusText:""}})),n.then(t,e)}returns(){return this}overrideTypes(){return this}},$o=class extends Io{select(t){let e=!1;const r=(t??"*").split("").map(s=>/\s/.test(s)&&!e?"":(s==='"'&&(e=!e),s)).join("");return this.url.searchParams.set("select",r),this.headers.append("Prefer","return=representation"),this}order(t,{ascending:e=!0,nullsFirst:r,foreignTable:s,referencedTable:n=s}={}){const i=n?`${n}.order`:"order",o=this.url.searchParams.get(i);return this.url.searchParams.set(i,`${o?`${o},`:""}${t}.${e?"asc":"desc"}${r===void 0?"":r?".nullsfirst":".nullslast"}`),this}limit(t,{foreignTable:e,referencedTable:r=e}={}){const s=typeof r>"u"?"limit":`${r}.limit`;return this.url.searchParams.set(s,`${t}`),this}range(t,e,{foreignTable:r,referencedTable:s=r}={}){const n=typeof s>"u"?"offset":`${s}.offset`,i=typeof s>"u"?"limit":`${s}.limit`;return this.url.searchParams.set(n,`${t}`),this.url.searchParams.set(i,`${e-t+1}`),this}abortSignal(t){return this.signal=t,this}single(){return this.headers.set("Accept","application/vnd.pgrst.object+json"),this}maybeSingle(){return this.method==="GET"?this.headers.set("Accept","application/json"):this.headers.set("Accept","application/vnd.pgrst.object+json"),this.isMaybeSingle=!0,this}csv(){return this.headers.set("Accept","text/csv"),this}geojson(){return this.headers.set("Accept","application/geo+json"),this}explain({analyze:t=!1,verbose:e=!1,settings:r=!1,buffers:s=!1,wal:n=!1,format:i="text"}={}){var o;const l=[t?"analyze":null,e?"verbose":null,r?"settings":null,s?"buffers":null,n?"wal":null].filter(Boolean).join("|"),c=(o=this.headers.get("Accept"))!==null&&o!==void 0?o:"application/json";return this.headers.set("Accept",`application/vnd.pgrst.plan+${i}; for="${c}"; options=${l};`),i==="json"?this:this}rollback(){return this.headers.append("Prefer","tx=rollback"),this}returns(){return this}maxAffected(t){return this.headers.append("Prefer","handling=strict"),this.headers.append("Prefer",`max-affected=${t}`),this}};const Jr=new RegExp("[,()]");var Te=class extends $o{eq(t,e){return this.url.searchParams.append(t,`eq.${e}`),this}neq(t,e){return this.url.searchParams.append(t,`neq.${e}`),this}gt(t,e){return this.url.searchParams.append(t,`gt.${e}`),this}gte(t,e){return this.url.searchParams.append(t,`gte.${e}`),this}lt(t,e){return this.url.searchParams.append(t,`lt.${e}`),this}lte(t,e){return this.url.searchParams.append(t,`lte.${e}`),this}like(t,e){return this.url.searchParams.append(t,`like.${e}`),this}likeAllOf(t,e){return this.url.searchParams.append(t,`like(all).{${e.join(",")}}`),this}likeAnyOf(t,e){return this.url.searchParams.append(t,`like(any).{${e.join(",")}}`),this}ilike(t,e){return this.url.searchParams.append(t,`ilike.${e}`),this}ilikeAllOf(t,e){return this.url.searchParams.append(t,`ilike(all).{${e.join(",")}}`),this}ilikeAnyOf(t,e){return this.url.searchParams.append(t,`ilike(any).{${e.join(",")}}`),this}regexMatch(t,e){return this.url.searchParams.append(t,`match.${e}`),this}regexIMatch(t,e){return this.url.searchParams.append(t,`imatch.${e}`),this}is(t,e){return this.url.searchParams.append(t,`is.${e}`),this}isDistinct(t,e){return this.url.searchParams.append(t,`isdistinct.${e}`),this}in(t,e){const r=Array.from(new Set(e)).map(s=>typeof s=="string"&&Jr.test(s)?`"${s}"`:`${s}`).join(",");return this.url.searchParams.append(t,`in.(${r})`),this}notIn(t,e){const r=Array.from(new Set(e)).map(s=>typeof s=="string"&&Jr.test(s)?`"${s}"`:`${s}`).join(",");return this.url.searchParams.append(t,`not.in.(${r})`),this}contains(t,e){return typeof e=="string"?this.url.searchParams.append(t,`cs.${e}`):Array.isArray(e)?this.url.searchParams.append(t,`cs.{${e.join(",")}}`):this.url.searchParams.append(t,`cs.${JSON.stringify(e)}`),this}containedBy(t,e){return typeof e=="string"?this.url.searchParams.append(t,`cd.${e}`):Array.isArray(e)?this.url.searchParams.append(t,`cd.{${e.join(",")}}`):this.url.searchParams.append(t,`cd.${JSON.stringify(e)}`),this}rangeGt(t,e){return this.url.searchParams.append(t,`sr.${e}`),this}rangeGte(t,e){return this.url.searchParams.append(t,`nxl.${e}`),this}rangeLt(t,e){return this.url.searchParams.append(t,`sl.${e}`),this}rangeLte(t,e){return this.url.searchParams.append(t,`nxr.${e}`),this}rangeAdjacent(t,e){return this.url.searchParams.append(t,`adj.${e}`),this}overlaps(t,e){return typeof e=="string"?this.url.searchParams.append(t,`ov.${e}`):this.url.searchParams.append(t,`ov.{${e.join(",")}}`),this}textSearch(t,e,{config:r,type:s}={}){let n="";s==="plain"?n="pl":s==="phrase"?n="ph":s==="websearch"&&(n="w");const i=r===void 0?"":`(${r})`;return this.url.searchParams.append(t,`${n}fts${i}.${e}`),this}match(t){return Object.entries(t).forEach(([e,r])=>{this.url.searchParams.append(e,`eq.${r}`)}),this}not(t,e,r){return this.url.searchParams.append(t,`not.${e}.${r}`),this}or(t,{foreignTable:e,referencedTable:r=e}={}){const s=r?`${r}.or`:"or";return this.url.searchParams.append(s,`(${t})`),this}filter(t,e,r){return this.url.searchParams.append(t,`${e}.${r}`),this}},Lo=class{constructor(t,{headers:e={},schema:r,fetch:s,urlLengthLimit:n=8e3}){this.url=t,this.headers=new Headers(e),this.schema=r,this.fetch=s,this.urlLengthLimit=n}cloneRequestState(){return{url:new URL(this.url.toString()),headers:new Headers(this.headers)}}select(t,e){const{head:r=!1,count:s}=e??{},n=r?"HEAD":"GET";let i=!1;const o=(t??"*").split("").map(d=>/\s/.test(d)&&!i?"":(d==='"'&&(i=!i),d)).join(""),{url:l,headers:c}=this.cloneRequestState();return l.searchParams.set("select",o),s&&c.append("Prefer",`count=${s}`),new Te({method:n,url:l,headers:c,schema:this.schema,fetch:this.fetch,urlLengthLimit:this.urlLengthLimit})}insert(t,{count:e,defaultToNull:r=!0}={}){var s;const n="POST",{url:i,headers:o}=this.cloneRequestState();if(e&&o.append("Prefer",`count=${e}`),r||o.append("Prefer","missing=default"),Array.isArray(t)){const l=t.reduce((c,d)=>c.concat(Object.keys(d)),[]);if(l.length>0){const c=[...new Set(l)].map(d=>`"${d}"`);i.searchParams.set("columns",c.join(","))}}return new Te({method:n,url:i,headers:o,schema:this.schema,body:t,fetch:(s=this.fetch)!==null&&s!==void 0?s:fetch,urlLengthLimit:this.urlLengthLimit})}upsert(t,{onConflict:e,ignoreDuplicates:r=!1,count:s,defaultToNull:n=!0}={}){var i;const o="POST",{url:l,headers:c}=this.cloneRequestState();if(c.append("Prefer",`resolution=${r?"ignore":"merge"}-duplicates`),e!==void 0&&l.searchParams.set("on_conflict",e),s&&c.append("Prefer",`count=${s}`),n||c.append("Prefer","missing=default"),Array.isArray(t)){const d=t.reduce((u,h)=>u.concat(Object.keys(h)),[]);if(d.length>0){const u=[...new Set(d)].map(h=>`"${h}"`);l.searchParams.set("columns",u.join(","))}}return new Te({method:o,url:l,headers:c,schema:this.schema,body:t,fetch:(i=this.fetch)!==null&&i!==void 0?i:fetch,urlLengthLimit:this.urlLengthLimit})}update(t,{count:e}={}){var r;const s="PATCH",{url:n,headers:i}=this.cloneRequestState();return e&&i.append("Prefer",`count=${e}`),new Te({method:s,url:n,headers:i,schema:this.schema,body:t,fetch:(r=this.fetch)!==null&&r!==void 0?r:fetch,urlLengthLimit:this.urlLengthLimit})}delete({count:t}={}){var e;const r="DELETE",{url:s,headers:n}=this.cloneRequestState();return t&&n.append("Prefer",`count=${t}`),new Te({method:r,url:s,headers:n,schema:this.schema,fetch:(e=this.fetch)!==null&&e!==void 0?e:fetch,urlLengthLimit:this.urlLengthLimit})}};function Xe(t){"@babel/helpers - typeof";return Xe=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Xe(t)}function Do(t,e){if(Xe(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var s=r.call(t,e);if(Xe(s)!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function Uo(t){var e=Do(t,"string");return Xe(e)=="symbol"?e:e+""}function qo(t,e,r){return(e=Uo(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function Yr(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);e&&(s=s.filter(function(n){return Object.getOwnPropertyDescriptor(t,n).enumerable})),r.push.apply(r,s)}return r}function mt(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?Yr(Object(r),!0).forEach(function(s){qo(t,s,r[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):Yr(Object(r)).forEach(function(s){Object.defineProperty(t,s,Object.getOwnPropertyDescriptor(r,s))})}return t}var Mo=class Ys{constructor(e,{headers:r={},schema:s,fetch:n,timeout:i,urlLengthLimit:o=8e3}={}){this.url=e,this.headers=new Headers(r),this.schemaName=s,this.urlLengthLimit=o;const l=n??globalThis.fetch;i!==void 0&&i>0?this.fetch=(c,d)=>{const u=new AbortController,h=setTimeout(()=>u.abort(),i),p=d==null?void 0:d.signal;if(p){if(p.aborted)return clearTimeout(h),l(c,d);const m=()=>{clearTimeout(h),u.abort()};return p.addEventListener("abort",m,{once:!0}),l(c,mt(mt({},d),{},{signal:u.signal})).finally(()=>{clearTimeout(h),p.removeEventListener("abort",m)})}return l(c,mt(mt({},d),{},{signal:u.signal})).finally(()=>clearTimeout(h))}:this.fetch=l}from(e){if(!e||typeof e!="string"||e.trim()==="")throw new Error("Invalid relation name: relation must be a non-empty string.");return new Lo(new URL(`${this.url}/${e}`),{headers:new Headers(this.headers),schema:this.schemaName,fetch:this.fetch,urlLengthLimit:this.urlLengthLimit})}schema(e){return new Ys(this.url,{headers:this.headers,schema:e,fetch:this.fetch,urlLengthLimit:this.urlLengthLimit})}rpc(e,r={},{head:s=!1,get:n=!1,count:i}={}){var o;let l;const c=new URL(`${this.url}/rpc/${e}`);let d;const u=m=>m!==null&&typeof m=="object"&&(!Array.isArray(m)||m.some(u)),h=s&&Object.values(r).some(u);h?(l="POST",d=r):s||n?(l=s?"HEAD":"GET",Object.entries(r).filter(([m,g])=>g!==void 0).map(([m,g])=>[m,Array.isArray(g)?`{${g.join(",")}}`:`${g}`]).forEach(([m,g])=>{c.searchParams.append(m,g)})):(l="POST",d=r);const p=new Headers(this.headers);return h?p.set("Prefer",i?`count=${i},return=minimal`:"return=minimal"):i&&p.set("Prefer",`count=${i}`),new Te({method:l,url:c,headers:p,schema:this.schemaName,body:d,fetch:(o=this.fetch)!==null&&o!==void 0?o:fetch,urlLengthLimit:this.urlLengthLimit})}};class zo{constructor(){}static detectEnvironment(){var e;if(typeof WebSocket<"u")return{type:"native",constructor:WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocket<"u")return{type:"native",constructor:globalThis.WebSocket};if(typeof global<"u"&&typeof global.WebSocket<"u")return{type:"native",constructor:global.WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocketPair<"u"&&typeof globalThis.WebSocket>"u")return{type:"cloudflare",error:"Cloudflare Workers detected. WebSocket clients are not supported in Cloudflare Workers.",workaround:"Use Cloudflare Workers WebSocket API for server-side WebSocket handling, or deploy to a different runtime."};if(typeof globalThis<"u"&&globalThis.EdgeRuntime||typeof navigator<"u"&&(!((e=navigator.userAgent)===null||e===void 0)&&e.includes("Vercel-Edge")))return{type:"unsupported",error:"Edge runtime detected (Vercel Edge/Netlify Edge). WebSockets are not supported in edge functions.",workaround:"Use serverless functions or a different deployment target for WebSocket functionality."};const r=globalThis.process;if(r){const s=r.versions;if(s&&s.node){const n=s.node,i=parseInt(n.replace(/^v/,"").split(".")[0]);return i>=22?typeof globalThis.WebSocket<"u"?{type:"native",constructor:globalThis.WebSocket}:{type:"unsupported",error:`Node.js ${i} detected but native WebSocket not found.`,workaround:"Provide a WebSocket implementation via the transport option."}:{type:"unsupported",error:`Node.js ${i} detected without native WebSocket support.`,workaround:`For Node.js < 22, install "ws" package and provide it via the transport option:
import ws from "ws"
new RealtimeClient(url, { transport: ws })`}}}return{type:"unsupported",error:"Unknown JavaScript runtime without WebSocket support.",workaround:"Ensure you're running in a supported environment (browser, Node.js, Deno) or provide a custom WebSocket implementation."}}static getWebSocketConstructor(){const e=this.detectEnvironment();if(e.constructor)return e.constructor;let r=e.error||"WebSocket not supported in this environment.";throw e.workaround&&(r+=`

Suggested solution: ${e.workaround}`),new Error(r)}static createWebSocket(e,r){const s=this.getWebSocketConstructor();return new s(e,r)}static isWebSocketSupported(){try{const e=this.detectEnvironment();return e.type==="native"||e.type==="ws"}catch{return!1}}}const Bo="2.95.3",Fo=`realtime-js/${Bo}`,Ho="1.0.0",Qs="2.0.0",Qr=Qs,mr=1e4,Wo=1e3,Vo=100;var le;(function(t){t[t.connecting=0]="connecting",t[t.open=1]="open",t[t.closing=2]="closing",t[t.closed=3]="closed"})(le||(le={}));var U;(function(t){t.closed="closed",t.errored="errored",t.joined="joined",t.joining="joining",t.leaving="leaving"})(U||(U={}));var Y;(function(t){t.close="phx_close",t.error="phx_error",t.join="phx_join",t.reply="phx_reply",t.leave="phx_leave",t.access_token="access_token"})(Y||(Y={}));var pr;(function(t){t.websocket="websocket"})(pr||(pr={}));var pe;(function(t){t.Connecting="connecting",t.Open="open",t.Closing="closing",t.Closed="closed"})(pe||(pe={}));class Ko{constructor(e){this.HEADER_LENGTH=1,this.USER_BROADCAST_PUSH_META_LENGTH=6,this.KINDS={userBroadcastPush:3,userBroadcast:4},this.BINARY_ENCODING=0,this.JSON_ENCODING=1,this.BROADCAST_EVENT="broadcast",this.allowedMetadataKeys=[],this.allowedMetadataKeys=e??[]}encode(e,r){if(e.event===this.BROADCAST_EVENT&&!(e.payload instanceof ArrayBuffer)&&typeof e.payload.event=="string")return r(this._binaryEncodeUserBroadcastPush(e));let s=[e.join_ref,e.ref,e.topic,e.event,e.payload];return r(JSON.stringify(s))}_binaryEncodeUserBroadcastPush(e){var r;return this._isArrayBuffer((r=e.payload)===null||r===void 0?void 0:r.payload)?this._encodeBinaryUserBroadcastPush(e):this._encodeJsonUserBroadcastPush(e)}_encodeBinaryUserBroadcastPush(e){var r,s;const n=(s=(r=e.payload)===null||r===void 0?void 0:r.payload)!==null&&s!==void 0?s:new ArrayBuffer(0);return this._encodeUserBroadcastPush(e,this.BINARY_ENCODING,n)}_encodeJsonUserBroadcastPush(e){var r,s;const n=(s=(r=e.payload)===null||r===void 0?void 0:r.payload)!==null&&s!==void 0?s:{},o=new TextEncoder().encode(JSON.stringify(n)).buffer;return this._encodeUserBroadcastPush(e,this.JSON_ENCODING,o)}_encodeUserBroadcastPush(e,r,s){var n,i;const o=e.topic,l=(n=e.ref)!==null&&n!==void 0?n:"",c=(i=e.join_ref)!==null&&i!==void 0?i:"",d=e.payload.event,u=this.allowedMetadataKeys?this._pick(e.payload,this.allowedMetadataKeys):{},h=Object.keys(u).length===0?"":JSON.stringify(u);if(c.length>255)throw new Error(`joinRef length ${c.length} exceeds maximum of 255`);if(l.length>255)throw new Error(`ref length ${l.length} exceeds maximum of 255`);if(o.length>255)throw new Error(`topic length ${o.length} exceeds maximum of 255`);if(d.length>255)throw new Error(`userEvent length ${d.length} exceeds maximum of 255`);if(h.length>255)throw new Error(`metadata length ${h.length} exceeds maximum of 255`);const p=this.USER_BROADCAST_PUSH_META_LENGTH+c.length+l.length+o.length+d.length+h.length,m=new ArrayBuffer(this.HEADER_LENGTH+p);let g=new DataView(m),b=0;g.setUint8(b++,this.KINDS.userBroadcastPush),g.setUint8(b++,c.length),g.setUint8(b++,l.length),g.setUint8(b++,o.length),g.setUint8(b++,d.length),g.setUint8(b++,h.length),g.setUint8(b++,r),Array.from(c,x=>g.setUint8(b++,x.charCodeAt(0))),Array.from(l,x=>g.setUint8(b++,x.charCodeAt(0))),Array.from(o,x=>g.setUint8(b++,x.charCodeAt(0))),Array.from(d,x=>g.setUint8(b++,x.charCodeAt(0))),Array.from(h,x=>g.setUint8(b++,x.charCodeAt(0)));var v=new Uint8Array(m.byteLength+s.byteLength);return v.set(new Uint8Array(m),0),v.set(new Uint8Array(s),m.byteLength),v.buffer}decode(e,r){if(this._isArrayBuffer(e)){let s=this._binaryDecode(e);return r(s)}if(typeof e=="string"){const s=JSON.parse(e),[n,i,o,l,c]=s;return r({join_ref:n,ref:i,topic:o,event:l,payload:c})}return r({})}_binaryDecode(e){const r=new DataView(e),s=r.getUint8(0),n=new TextDecoder;switch(s){case this.KINDS.userBroadcast:return this._decodeUserBroadcast(e,r,n)}}_decodeUserBroadcast(e,r,s){const n=r.getUint8(1),i=r.getUint8(2),o=r.getUint8(3),l=r.getUint8(4);let c=this.HEADER_LENGTH+4;const d=s.decode(e.slice(c,c+n));c=c+n;const u=s.decode(e.slice(c,c+i));c=c+i;const h=s.decode(e.slice(c,c+o));c=c+o;const p=e.slice(c,e.byteLength),m=l===this.JSON_ENCODING?JSON.parse(s.decode(p)):p,g={type:this.BROADCAST_EVENT,event:u,payload:m};return o>0&&(g.meta=JSON.parse(h)),{join_ref:null,ref:null,topic:d,event:this.BROADCAST_EVENT,payload:g}}_isArrayBuffer(e){var r;return e instanceof ArrayBuffer||((r=e==null?void 0:e.constructor)===null||r===void 0?void 0:r.name)==="ArrayBuffer"}_pick(e,r){return!e||typeof e!="object"?{}:Object.fromEntries(Object.entries(e).filter(([s])=>r.includes(s)))}}class Xs{constructor(e,r){this.callback=e,this.timerCalc=r,this.timer=void 0,this.tries=0,this.callback=e,this.timerCalc=r}reset(){this.tries=0,clearTimeout(this.timer),this.timer=void 0}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}var C;(function(t){t.abstime="abstime",t.bool="bool",t.date="date",t.daterange="daterange",t.float4="float4",t.float8="float8",t.int2="int2",t.int4="int4",t.int4range="int4range",t.int8="int8",t.int8range="int8range",t.json="json",t.jsonb="jsonb",t.money="money",t.numeric="numeric",t.oid="oid",t.reltime="reltime",t.text="text",t.time="time",t.timestamp="timestamp",t.timestamptz="timestamptz",t.timetz="timetz",t.tsrange="tsrange",t.tstzrange="tstzrange"})(C||(C={}));const Xr=(t,e,r={})=>{var s;const n=(s=r.skipTypes)!==null&&s!==void 0?s:[];return e?Object.keys(e).reduce((i,o)=>(i[o]=Go(o,t,e,n),i),{}):{}},Go=(t,e,r,s)=>{const n=e.find(l=>l.name===t),i=n==null?void 0:n.type,o=r[t];return i&&!s.includes(i)?Zs(i,o):fr(o)},Zs=(t,e)=>{if(t.charAt(0)==="_"){const r=t.slice(1,t.length);return Xo(e,r)}switch(t){case C.bool:return Jo(e);case C.float4:case C.float8:case C.int2:case C.int4:case C.int8:case C.numeric:case C.oid:return Yo(e);case C.json:case C.jsonb:return Qo(e);case C.timestamp:return Zo(e);case C.abstime:case C.date:case C.daterange:case C.int4range:case C.int8range:case C.money:case C.reltime:case C.text:case C.time:case C.timestamptz:case C.timetz:case C.tsrange:case C.tstzrange:return fr(e);default:return fr(e)}},fr=t=>t,Jo=t=>{switch(t){case"t":return!0;case"f":return!1;default:return t}},Yo=t=>{if(typeof t=="string"){const e=parseFloat(t);if(!Number.isNaN(e))return e}return t},Qo=t=>{if(typeof t=="string")try{return JSON.parse(t)}catch{return t}return t},Xo=(t,e)=>{if(typeof t!="string")return t;const r=t.length-1,s=t[r];if(t[0]==="{"&&s==="}"){let i;const o=t.slice(1,r);try{i=JSON.parse("["+o+"]")}catch{i=o?o.split(","):[]}return i.map(l=>Zs(e,l))}return t},Zo=t=>typeof t=="string"?t.replace(" ","T"):t,ea=t=>{const e=new URL(t);return e.protocol=e.protocol.replace(/^ws/i,"http"),e.pathname=e.pathname.replace(/\/+$/,"").replace(/\/socket\/websocket$/i,"").replace(/\/socket$/i,"").replace(/\/websocket$/i,""),e.pathname===""||e.pathname==="/"?e.pathname="/api/broadcast":e.pathname=e.pathname+"/api/broadcast",e.href};class Gt{constructor(e,r,s={},n=mr){this.channel=e,this.event=r,this.payload=s,this.timeout=n,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(e){this.timeout=e,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(e){this.payload=Object.assign(Object.assign({},this.payload),e)}receive(e,r){var s;return this._hasReceived(e)&&r((s=this.receivedResp)===null||s===void 0?void 0:s.response),this.recHooks.push({status:e,callback:r}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const e=r=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=r,this._matchReceive(r)};this.channel._on(this.refEvent,{},e),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(e,r){this.refEvent&&this.channel._trigger(this.refEvent,{status:e,response:r})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:e,response:r}){this.recHooks.filter(s=>s.status===e).forEach(s=>s.callback(r))}_hasReceived(e){return this.receivedResp&&this.receivedResp.status===e}}var Zr;(function(t){t.SYNC="sync",t.JOIN="join",t.LEAVE="leave"})(Zr||(Zr={}));class Ge{constructor(e,r){this.channel=e,this.state={},this.pendingDiffs=[],this.joinRef=null,this.enabled=!1,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const s=(r==null?void 0:r.events)||{state:"presence_state",diff:"presence_diff"};this.channel._on(s.state,{},n=>{const{onJoin:i,onLeave:o,onSync:l}=this.caller;this.joinRef=this.channel._joinRef(),this.state=Ge.syncState(this.state,n,i,o),this.pendingDiffs.forEach(c=>{this.state=Ge.syncDiff(this.state,c,i,o)}),this.pendingDiffs=[],l()}),this.channel._on(s.diff,{},n=>{const{onJoin:i,onLeave:o,onSync:l}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(n):(this.state=Ge.syncDiff(this.state,n,i,o),l())}),this.onJoin((n,i,o)=>{this.channel._trigger("presence",{event:"join",key:n,currentPresences:i,newPresences:o})}),this.onLeave((n,i,o)=>{this.channel._trigger("presence",{event:"leave",key:n,currentPresences:i,leftPresences:o})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(e,r,s,n){const i=this.cloneDeep(e),o=this.transformState(r),l={},c={};return this.map(i,(d,u)=>{o[d]||(c[d]=u)}),this.map(o,(d,u)=>{const h=i[d];if(h){const p=u.map(v=>v.presence_ref),m=h.map(v=>v.presence_ref),g=u.filter(v=>m.indexOf(v.presence_ref)<0),b=h.filter(v=>p.indexOf(v.presence_ref)<0);g.length>0&&(l[d]=g),b.length>0&&(c[d]=b)}else l[d]=u}),this.syncDiff(i,{joins:l,leaves:c},s,n)}static syncDiff(e,r,s,n){const{joins:i,leaves:o}={joins:this.transformState(r.joins),leaves:this.transformState(r.leaves)};return s||(s=()=>{}),n||(n=()=>{}),this.map(i,(l,c)=>{var d;const u=(d=e[l])!==null&&d!==void 0?d:[];if(e[l]=this.cloneDeep(c),u.length>0){const h=e[l].map(m=>m.presence_ref),p=u.filter(m=>h.indexOf(m.presence_ref)<0);e[l].unshift(...p)}s(l,u,c)}),this.map(o,(l,c)=>{let d=e[l];if(!d)return;const u=c.map(h=>h.presence_ref);d=d.filter(h=>u.indexOf(h.presence_ref)<0),e[l]=d,n(l,d,c),d.length===0&&delete e[l]}),e}static map(e,r){return Object.getOwnPropertyNames(e).map(s=>r(s,e[s]))}static transformState(e){return e=this.cloneDeep(e),Object.getOwnPropertyNames(e).reduce((r,s)=>{const n=e[s];return"metas"in n?r[s]=n.metas.map(i=>(i.presence_ref=i.phx_ref,delete i.phx_ref,delete i.phx_ref_prev,i)):r[s]=n,r},{})}static cloneDeep(e){return JSON.parse(JSON.stringify(e))}onJoin(e){this.caller.onJoin=e}onLeave(e){this.caller.onLeave=e}onSync(e){this.caller.onSync=e}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}var es;(function(t){t.ALL="*",t.INSERT="INSERT",t.UPDATE="UPDATE",t.DELETE="DELETE"})(es||(es={}));var Je;(function(t){t.BROADCAST="broadcast",t.PRESENCE="presence",t.POSTGRES_CHANGES="postgres_changes",t.SYSTEM="system"})(Je||(Je={}));var se;(function(t){t.SUBSCRIBED="SUBSCRIBED",t.TIMED_OUT="TIMED_OUT",t.CLOSED="CLOSED",t.CHANNEL_ERROR="CHANNEL_ERROR"})(se||(se={}));class Ce{constructor(e,r={config:{}},s){var n,i;if(this.topic=e,this.params=r,this.socket=s,this.bindings={},this.state=U.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=e.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:"",enabled:!1},private:!1},r.config),this.timeout=this.socket.timeout,this.joinPush=new Gt(this,Y.join,this.params,this.timeout),this.rejoinTimer=new Xs(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=U.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(o=>o.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=U.closed,this.socket._remove(this)}),this._onError(o=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,o),this.state=U.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=U.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("error",o=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,o),this.state=U.errored,this.rejoinTimer.scheduleTimeout())}),this._on(Y.reply,{},(o,l)=>{this._trigger(this._replyEventName(l),o)}),this.presence=new Ge(this),this.broadcastEndpointURL=ea(this.socket.endPoint),this.private=this.params.config.private||!1,!this.private&&(!((i=(n=this.params.config)===null||n===void 0?void 0:n.broadcast)===null||i===void 0)&&i.replay))throw`tried to use replay on public channel '${this.topic}'. It must be a private channel.`}subscribe(e,r=this.timeout){var s,n,i;if(this.socket.isConnected()||this.socket.connect(),this.state==U.closed){const{config:{broadcast:o,presence:l,private:c}}=this.params,d=(n=(s=this.bindings.postgres_changes)===null||s===void 0?void 0:s.map(m=>m.filter))!==null&&n!==void 0?n:[],u=!!this.bindings[Je.PRESENCE]&&this.bindings[Je.PRESENCE].length>0||((i=this.params.config.presence)===null||i===void 0?void 0:i.enabled)===!0,h={},p={broadcast:o,presence:Object.assign(Object.assign({},l),{enabled:u}),postgres_changes:d,private:c};this.socket.accessTokenValue&&(h.access_token=this.socket.accessTokenValue),this._onError(m=>e==null?void 0:e(se.CHANNEL_ERROR,m)),this._onClose(()=>e==null?void 0:e(se.CLOSED)),this.updateJoinPayload(Object.assign({config:p},h)),this.joinedOnce=!0,this._rejoin(r),this.joinPush.receive("ok",async({postgres_changes:m})=>{var g;if(this.socket._isManualToken()||this.socket.setAuth(),m===void 0){e==null||e(se.SUBSCRIBED);return}else{const b=this.bindings.postgres_changes,v=(g=b==null?void 0:b.length)!==null&&g!==void 0?g:0,x=[];for(let w=0;w<v;w++){const y=b[w],{filter:{event:N,schema:_,table:j,filter:E}}=y,k=m&&m[w];if(k&&k.event===N&&Ce.isFilterValueEqual(k.schema,_)&&Ce.isFilterValueEqual(k.table,j)&&Ce.isFilterValueEqual(k.filter,E))x.push(Object.assign(Object.assign({},y),{id:k.id}));else{this.unsubscribe(),this.state=U.errored,e==null||e(se.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=x,e&&e(se.SUBSCRIBED);return}}).receive("error",m=>{this.state=U.errored,e==null||e(se.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(m).join(", ")||"error")))}).receive("timeout",()=>{e==null||e(se.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(e,r={}){return await this.send({type:"presence",event:"track",payload:e},r.timeout||this.timeout)}async untrack(e={}){return await this.send({type:"presence",event:"untrack"},e)}on(e,r,s){return this.state===U.joined&&e===Je.PRESENCE&&(this.socket.log("channel",`resubscribe to ${this.topic} due to change in presence callbacks on joined channel`),this.unsubscribe().then(async()=>await this.subscribe())),this._on(e,r,s)}async httpSend(e,r,s={}){var n;if(r==null)return Promise.reject("Payload is required for httpSend()");const i={apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"};this.socket.accessTokenValue&&(i.Authorization=`Bearer ${this.socket.accessTokenValue}`);const o={method:"POST",headers:i,body:JSON.stringify({messages:[{topic:this.subTopic,event:e,payload:r,private:this.private}]})},l=await this._fetchWithTimeout(this.broadcastEndpointURL,o,(n=s.timeout)!==null&&n!==void 0?n:this.timeout);if(l.status===202)return{success:!0};let c=l.statusText;try{const d=await l.json();c=d.error||d.message||c}catch{}return Promise.reject(new Error(c))}async send(e,r={}){var s,n;if(!this._canPush()&&e.type==="broadcast"){console.warn("Realtime send() is automatically falling back to REST API. This behavior will be deprecated in the future. Please use httpSend() explicitly for REST delivery.");const{event:i,payload:o}=e,l={apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"};this.socket.accessTokenValue&&(l.Authorization=`Bearer ${this.socket.accessTokenValue}`);const c={method:"POST",headers:l,body:JSON.stringify({messages:[{topic:this.subTopic,event:i,payload:o,private:this.private}]})};try{const d=await this._fetchWithTimeout(this.broadcastEndpointURL,c,(s=r.timeout)!==null&&s!==void 0?s:this.timeout);return await((n=d.body)===null||n===void 0?void 0:n.cancel()),d.ok?"ok":"error"}catch(d){return d.name==="AbortError"?"timed out":"error"}}else return new Promise(i=>{var o,l,c;const d=this._push(e.type,e,r.timeout||this.timeout);e.type==="broadcast"&&!(!((c=(l=(o=this.params)===null||o===void 0?void 0:o.config)===null||l===void 0?void 0:l.broadcast)===null||c===void 0)&&c.ack)&&i("ok"),d.receive("ok",()=>i("ok")),d.receive("error",()=>i("error")),d.receive("timeout",()=>i("timed out"))})}updateJoinPayload(e){this.joinPush.updatePayload(e)}unsubscribe(e=this.timeout){this.state=U.leaving;const r=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(Y.close,"leave",this._joinRef())};this.joinPush.destroy();let s=null;return new Promise(n=>{s=new Gt(this,Y.leave,{},e),s.receive("ok",()=>{r(),n("ok")}).receive("timeout",()=>{r(),n("timed out")}).receive("error",()=>{n("error")}),s.send(),this._canPush()||s.trigger("ok",{})}).finally(()=>{s==null||s.destroy()})}teardown(){this.pushBuffer.forEach(e=>e.destroy()),this.pushBuffer=[],this.rejoinTimer.reset(),this.joinPush.destroy(),this.state=U.closed,this.bindings={}}async _fetchWithTimeout(e,r,s){const n=new AbortController,i=setTimeout(()=>n.abort(),s),o=await this.socket.fetch(e,Object.assign(Object.assign({},r),{signal:n.signal}));return clearTimeout(i),o}_push(e,r,s=this.timeout){if(!this.joinedOnce)throw`tried to push '${e}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let n=new Gt(this,e,r,s);return this._canPush()?n.send():this._addToPushBuffer(n),n}_addToPushBuffer(e){if(e.startTimeout(),this.pushBuffer.push(e),this.pushBuffer.length>Vo){const r=this.pushBuffer.shift();r&&(r.destroy(),this.socket.log("channel",`discarded push due to buffer overflow: ${r.event}`,r.payload))}}_onMessage(e,r,s){return r}_isMember(e){return this.topic===e}_joinRef(){return this.joinPush.ref}_trigger(e,r,s){var n,i;const o=e.toLocaleLowerCase(),{close:l,error:c,leave:d,join:u}=Y;if(s&&[l,c,d,u].indexOf(o)>=0&&s!==this._joinRef())return;let p=this._onMessage(o,r,s);if(r&&!p)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(o)?(n=this.bindings.postgres_changes)===null||n===void 0||n.filter(m=>{var g,b,v;return((g=m.filter)===null||g===void 0?void 0:g.event)==="*"||((v=(b=m.filter)===null||b===void 0?void 0:b.event)===null||v===void 0?void 0:v.toLocaleLowerCase())===o}).map(m=>m.callback(p,s)):(i=this.bindings[o])===null||i===void 0||i.filter(m=>{var g,b,v,x,w,y;if(["broadcast","presence","postgres_changes"].includes(o))if("id"in m){const N=m.id,_=(g=m.filter)===null||g===void 0?void 0:g.event;return N&&((b=r.ids)===null||b===void 0?void 0:b.includes(N))&&(_==="*"||(_==null?void 0:_.toLocaleLowerCase())===((v=r.data)===null||v===void 0?void 0:v.type.toLocaleLowerCase()))}else{const N=(w=(x=m==null?void 0:m.filter)===null||x===void 0?void 0:x.event)===null||w===void 0?void 0:w.toLocaleLowerCase();return N==="*"||N===((y=r==null?void 0:r.event)===null||y===void 0?void 0:y.toLocaleLowerCase())}else return m.type.toLocaleLowerCase()===o}).map(m=>{if(typeof p=="object"&&"ids"in p){const g=p.data,{schema:b,table:v,commit_timestamp:x,type:w,errors:y}=g;p=Object.assign(Object.assign({},{schema:b,table:v,commit_timestamp:x,eventType:w,new:{},old:{},errors:y}),this._getPayloadRecords(g))}m.callback(p,s)})}_isClosed(){return this.state===U.closed}_isJoined(){return this.state===U.joined}_isJoining(){return this.state===U.joining}_isLeaving(){return this.state===U.leaving}_replyEventName(e){return`chan_reply_${e}`}_on(e,r,s){const n=e.toLocaleLowerCase(),i={type:n,filter:r,callback:s};return this.bindings[n]?this.bindings[n].push(i):this.bindings[n]=[i],this}_off(e,r){const s=e.toLocaleLowerCase();return this.bindings[s]&&(this.bindings[s]=this.bindings[s].filter(n=>{var i;return!(((i=n.type)===null||i===void 0?void 0:i.toLocaleLowerCase())===s&&Ce.isEqual(n.filter,r))})),this}static isEqual(e,r){if(Object.keys(e).length!==Object.keys(r).length)return!1;for(const s in e)if(e[s]!==r[s])return!1;return!0}static isFilterValueEqual(e,r){return(e??void 0)===(r??void 0)}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(e){this._on(Y.close,{},e)}_onError(e){this._on(Y.error,{},r=>e(r))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(e=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=U.joining,this.joinPush.resend(e))}_getPayloadRecords(e){const r={new:{},old:{}};return(e.type==="INSERT"||e.type==="UPDATE")&&(r.new=Xr(e.columns,e.record)),(e.type==="UPDATE"||e.type==="DELETE")&&(r.old=Xr(e.columns,e.old_record)),r}}const Jt=()=>{},pt={HEARTBEAT_INTERVAL:25e3,RECONNECT_DELAY:10,HEARTBEAT_TIMEOUT_FALLBACK:100},el=[1e3,2e3,5e3,1e4],tl=1e4,rl=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`;class sl{constructor(e,r){var s;if(this.accessTokenValue=null,this.apiKey=null,this._manuallySetToken=!1,this.channels=new Array,this.endPoint="",this.httpEndpoint="",this.headers={},this.params={},this.timeout=mr,this.transport=null,this.heartbeatIntervalMs=pt.HEARTBEAT_INTERVAL,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.heartbeatCallback=Jt,this.ref=0,this.reconnectTimer=null,this.vsn=Qr,this.logger=Jt,this.conn=null,this.sendBuffer=[],this.serializer=new Ko,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._connectionState="disconnected",this._wasManualDisconnect=!1,this._authPromise=null,this._heartbeatSentAt=null,this._resolveFetch=n=>n?(...i)=>n(...i):(...i)=>fetch(...i),!(!((s=r==null?void 0:r.params)===null||s===void 0)&&s.apikey))throw new Error("API key is required to connect to Realtime");this.apiKey=r.params.apikey,this.endPoint=`${e}/${pr.websocket}`,this.httpEndpoint=ea(e),this._initializeOptions(r),this._setupReconnectionTimer(),this.fetch=this._resolveFetch(r==null?void 0:r.fetch)}connect(){if(!(this.isConnecting()||this.isDisconnecting()||this.conn!==null&&this.isConnected())){if(this._setConnectionState("connecting"),this.accessToken&&!this._authPromise&&this._setAuthSafely("connect"),this.transport)this.conn=new this.transport(this.endpointURL());else try{this.conn=zo.createWebSocket(this.endpointURL())}catch(e){this._setConnectionState("disconnected");const r=e.message;throw r.includes("Node.js")?new Error(`${r}

To use Realtime in Node.js, you need to provide a WebSocket implementation:

Option 1: Use Node.js 22+ which has native WebSocket support
Option 2: Install and provide the "ws" package:

  npm install ws

  import ws from "ws"
  const client = new RealtimeClient(url, {
    ...options,
    transport: ws
  })`):new Error(`WebSocket not available: ${r}`)}this._setupConnectionHandlers()}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:this.vsn}))}disconnect(e,r){if(!this.isDisconnecting())if(this._setConnectionState("disconnecting",!0),this.conn){const s=setTimeout(()=>{this._setConnectionState("disconnected")},100);this.conn.onclose=()=>{clearTimeout(s),this._setConnectionState("disconnected")},typeof this.conn.close=="function"&&(e?this.conn.close(e,r??""):this.conn.close()),this._teardownConnection()}else this._setConnectionState("disconnected")}getChannels(){return this.channels}async removeChannel(e){const r=await e.unsubscribe();return r==="ok"&&this._remove(e),this.channels.length===0&&this.disconnect(),r}async removeAllChannels(){const e=await Promise.all(this.channels.map(r=>r.unsubscribe()));return this.channels=[],this.disconnect(),e}log(e,r,s){this.logger(e,r,s)}connectionState(){switch(this.conn&&this.conn.readyState){case le.connecting:return pe.Connecting;case le.open:return pe.Open;case le.closing:return pe.Closing;default:return pe.Closed}}isConnected(){return this.connectionState()===pe.Open}isConnecting(){return this._connectionState==="connecting"}isDisconnecting(){return this._connectionState==="disconnecting"}channel(e,r={config:{}}){const s=`realtime:${e}`,n=this.getChannels().find(i=>i.topic===s);if(n)return n;{const i=new Ce(`realtime:${e}`,r,this);return this.channels.push(i),i}}push(e){const{topic:r,event:s,payload:n,ref:i}=e,o=()=>{this.encode(e,l=>{var c;(c=this.conn)===null||c===void 0||c.send(l)})};this.log("push",`${r} ${s} (${i})`,n),this.isConnected()?o():this.sendBuffer.push(o)}async setAuth(e=null){this._authPromise=this._performAuth(e);try{await this._authPromise}finally{this._authPromise=null}}_isManualToken(){return this._manuallySetToken}async sendHeartbeat(){var e;if(!this.isConnected()){try{this.heartbeatCallback("disconnected")}catch(r){this.log("error","error in heartbeat callback",r)}return}if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this._heartbeatSentAt=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection");try{this.heartbeatCallback("timeout")}catch(r){this.log("error","error in heartbeat callback",r)}this._wasManualDisconnect=!1,(e=this.conn)===null||e===void 0||e.close(Wo,"heartbeat timeout"),setTimeout(()=>{var r;this.isConnected()||(r=this.reconnectTimer)===null||r===void 0||r.scheduleTimeout()},pt.HEARTBEAT_TIMEOUT_FALLBACK);return}this._heartbeatSentAt=Date.now(),this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef});try{this.heartbeatCallback("sent")}catch(r){this.log("error","error in heartbeat callback",r)}this._setAuthSafely("heartbeat")}onHeartbeat(e){this.heartbeatCallback=e}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(e=>e()),this.sendBuffer=[])}_makeRef(){let e=this.ref+1;return e===this.ref?this.ref=0:this.ref=e,this.ref.toString()}_leaveOpenTopic(e){let r=this.channels.find(s=>s.topic===e&&(s._isJoined()||s._isJoining()));r&&(this.log("transport",`leaving duplicate topic "${e}"`),r.unsubscribe())}_remove(e){this.channels=this.channels.filter(r=>r.topic!==e.topic)}_onConnMessage(e){this.decode(e.data,r=>{if(r.topic==="phoenix"&&r.event==="phx_reply"&&r.ref&&r.ref===this.pendingHeartbeatRef){const d=this._heartbeatSentAt?Date.now()-this._heartbeatSentAt:void 0;try{this.heartbeatCallback(r.payload.status==="ok"?"ok":"error",d)}catch(u){this.log("error","error in heartbeat callback",u)}this._heartbeatSentAt=null,this.pendingHeartbeatRef=null}const{topic:s,event:n,payload:i,ref:o}=r,l=o?`(${o})`:"",c=i.status||"";this.log("receive",`${c} ${s} ${n} ${l}`.trim(),i),this.channels.filter(d=>d._isMember(s)).forEach(d=>d._trigger(n,i,o)),this._triggerStateCallbacks("message",r)})}_clearTimer(e){var r;e==="heartbeat"&&this.heartbeatTimer?(clearInterval(this.heartbeatTimer),this.heartbeatTimer=void 0):e==="reconnect"&&((r=this.reconnectTimer)===null||r===void 0||r.reset())}_clearAllTimers(){this._clearTimer("heartbeat"),this._clearTimer("reconnect")}_setupConnectionHandlers(){this.conn&&("binaryType"in this.conn&&(this.conn.binaryType="arraybuffer"),this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=e=>this._onConnError(e),this.conn.onmessage=e=>this._onConnMessage(e),this.conn.onclose=e=>this._onConnClose(e),this.conn.readyState===le.open&&this._onConnOpen())}_teardownConnection(){if(this.conn){if(this.conn.readyState===le.open||this.conn.readyState===le.connecting)try{this.conn.close()}catch(e){this.log("error","Error closing connection",e)}this.conn.onopen=null,this.conn.onerror=null,this.conn.onmessage=null,this.conn.onclose=null,this.conn=null}this._clearAllTimers(),this._terminateWorker(),this.channels.forEach(e=>e.teardown())}_onConnOpen(){this._setConnectionState("connected"),this.log("transport",`connected to ${this.endpointURL()}`),(this._authPromise||(this.accessToken&&!this.accessTokenValue?this.setAuth():Promise.resolve())).then(()=>{this.flushSendBuffer()}).catch(r=>{this.log("error","error waiting for auth on connect",r),this.flushSendBuffer()}),this._clearTimer("reconnect"),this.worker?this.workerRef||this._startWorkerHeartbeat():this._startHeartbeat(),this._triggerStateCallbacks("open")}_startHeartbeat(){this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs)}_startWorkerHeartbeat(){this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const e=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(e),this.workerRef.onerror=r=>{this.log("worker","worker error",r.message),this._terminateWorker()},this.workerRef.onmessage=r=>{r.data.event==="keepAlive"&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}_terminateWorker(){this.workerRef&&(this.log("worker","terminating worker"),this.workerRef.terminate(),this.workerRef=void 0)}_onConnClose(e){var r;this._setConnectionState("disconnected"),this.log("transport","close",e),this._triggerChanError(),this._clearTimer("heartbeat"),this._wasManualDisconnect||(r=this.reconnectTimer)===null||r===void 0||r.scheduleTimeout(),this._triggerStateCallbacks("close",e)}_onConnError(e){this._setConnectionState("disconnected"),this.log("transport",`${e}`),this._triggerChanError(),this._triggerStateCallbacks("error",e);try{this.heartbeatCallback("error")}catch(r){this.log("error","error in heartbeat callback",r)}}_triggerChanError(){this.channels.forEach(e=>e._trigger(Y.error))}_appendParams(e,r){if(Object.keys(r).length===0)return e;const s=e.match(/\?/)?"&":"?",n=new URLSearchParams(r);return`${e}${s}${n}`}_workerObjectUrl(e){let r;if(e)r=e;else{const s=new Blob([rl],{type:"application/javascript"});r=URL.createObjectURL(s)}return r}_setConnectionState(e,r=!1){this._connectionState=e,e==="connecting"?this._wasManualDisconnect=!1:e==="disconnecting"&&(this._wasManualDisconnect=r)}async _performAuth(e=null){let r,s=!1;if(e)r=e,s=!0;else if(this.accessToken)try{r=await this.accessToken()}catch(n){this.log("error","Error fetching access token from callback",n),r=this.accessTokenValue}else r=this.accessTokenValue;s?this._manuallySetToken=!0:this.accessToken&&(this._manuallySetToken=!1),this.accessTokenValue!=r&&(this.accessTokenValue=r,this.channels.forEach(n=>{const i={access_token:r,version:Fo};r&&n.updateJoinPayload(i),n.joinedOnce&&n._isJoined()&&n._push(Y.access_token,{access_token:r})}))}async _waitForAuthIfNeeded(){this._authPromise&&await this._authPromise}_setAuthSafely(e="general"){this._isManualToken()||this.setAuth().catch(r=>{this.log("error",`Error setting auth in ${e}`,r)})}_triggerStateCallbacks(e,r){try{this.stateChangeCallbacks[e].forEach(s=>{try{s(r)}catch(n){this.log("error",`error in ${e} callback`,n)}})}catch(s){this.log("error",`error triggering ${e} callbacks`,s)}}_setupReconnectionTimer(){this.reconnectTimer=new Xs(async()=>{setTimeout(async()=>{await this._waitForAuthIfNeeded(),this.isConnected()||this.connect()},pt.RECONNECT_DELAY)},this.reconnectAfterMs)}_initializeOptions(e){var r,s,n,i,o,l,c,d,u,h,p,m;switch(this.transport=(r=e==null?void 0:e.transport)!==null&&r!==void 0?r:null,this.timeout=(s=e==null?void 0:e.timeout)!==null&&s!==void 0?s:mr,this.heartbeatIntervalMs=(n=e==null?void 0:e.heartbeatIntervalMs)!==null&&n!==void 0?n:pt.HEARTBEAT_INTERVAL,this.worker=(i=e==null?void 0:e.worker)!==null&&i!==void 0?i:!1,this.accessToken=(o=e==null?void 0:e.accessToken)!==null&&o!==void 0?o:null,this.heartbeatCallback=(l=e==null?void 0:e.heartbeatCallback)!==null&&l!==void 0?l:Jt,this.vsn=(c=e==null?void 0:e.vsn)!==null&&c!==void 0?c:Qr,e!=null&&e.params&&(this.params=e.params),e!=null&&e.logger&&(this.logger=e.logger),(e!=null&&e.logLevel||e!=null&&e.log_level)&&(this.logLevel=e.logLevel||e.log_level,this.params=Object.assign(Object.assign({},this.params),{log_level:this.logLevel})),this.reconnectAfterMs=(d=e==null?void 0:e.reconnectAfterMs)!==null&&d!==void 0?d:g=>el[g-1]||tl,this.vsn){case Ho:this.encode=(u=e==null?void 0:e.encode)!==null&&u!==void 0?u:(g,b)=>b(JSON.stringify(g)),this.decode=(h=e==null?void 0:e.decode)!==null&&h!==void 0?h:(g,b)=>b(JSON.parse(g));break;case Qs:this.encode=(p=e==null?void 0:e.encode)!==null&&p!==void 0?p:this.serializer.encode.bind(this.serializer),this.decode=(m=e==null?void 0:e.decode)!==null&&m!==void 0?m:this.serializer.decode.bind(this.serializer);break;default:throw new Error(`Unsupported serializer version: ${this.vsn}`)}if(this.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.workerUrl=e==null?void 0:e.workerUrl}}}var Ze=class extends Error{constructor(t,e){var r;super(t),this.name="IcebergError",this.status=e.status,this.icebergType=e.icebergType,this.icebergCode=e.icebergCode,this.details=e.details,this.isCommitStateUnknown=e.icebergType==="CommitStateUnknownException"||[500,502,504].includes(e.status)&&((r=e.icebergType)==null?void 0:r.includes("CommitState"))===!0}isNotFound(){return this.status===404}isConflict(){return this.status===409}isAuthenticationTimeout(){return this.status===419}};function al(t,e,r){const s=new URL(e,t);if(r)for(const[n,i]of Object.entries(r))i!==void 0&&s.searchParams.set(n,i);return s.toString()}async function nl(t){return!t||t.type==="none"?{}:t.type==="bearer"?{Authorization:`Bearer ${t.token}`}:t.type==="header"?{[t.name]:t.value}:t.type==="custom"?await t.getHeaders():{}}function il(t){const e=t.fetchImpl??globalThis.fetch;return{async request({method:r,path:s,query:n,body:i,headers:o}){const l=al(t.baseUrl,s,n),c=await nl(t.auth),d=await e(l,{method:r,headers:{...i?{"Content-Type":"application/json"}:{},...c,...o},body:i?JSON.stringify(i):void 0}),u=await d.text(),h=(d.headers.get("content-type")||"").includes("application/json"),p=h&&u?JSON.parse(u):u;if(!d.ok){const m=h?p:void 0,g=m==null?void 0:m.error;throw new Ze((g==null?void 0:g.message)??`Request failed with status ${d.status}`,{status:d.status,icebergType:g==null?void 0:g.type,icebergCode:g==null?void 0:g.code,details:m})}return{status:d.status,headers:d.headers,data:p}}}}function ft(t){return t.join("")}var ol=class{constructor(t,e=""){this.client=t,this.prefix=e}async listNamespaces(t){const e=t?{parent:ft(t.namespace)}:void 0;return(await this.client.request({method:"GET",path:`${this.prefix}/namespaces`,query:e})).data.namespaces.map(s=>({namespace:s}))}async createNamespace(t,e){const r={namespace:t.namespace,properties:e==null?void 0:e.properties};return(await this.client.request({method:"POST",path:`${this.prefix}/namespaces`,body:r})).data}async dropNamespace(t){await this.client.request({method:"DELETE",path:`${this.prefix}/namespaces/${ft(t.namespace)}`})}async loadNamespaceMetadata(t){return{properties:(await this.client.request({method:"GET",path:`${this.prefix}/namespaces/${ft(t.namespace)}`})).data.properties}}async namespaceExists(t){try{return await this.client.request({method:"HEAD",path:`${this.prefix}/namespaces/${ft(t.namespace)}`}),!0}catch(e){if(e instanceof Ze&&e.status===404)return!1;throw e}}async createNamespaceIfNotExists(t,e){try{return await this.createNamespace(t,e)}catch(r){if(r instanceof Ze&&r.status===409)return;throw r}}};function je(t){return t.join("")}var ll=class{constructor(t,e="",r){this.client=t,this.prefix=e,this.accessDelegation=r}async listTables(t){return(await this.client.request({method:"GET",path:`${this.prefix}/namespaces/${je(t.namespace)}/tables`})).data.identifiers}async createTable(t,e){const r={};return this.accessDelegation&&(r["X-Iceberg-Access-Delegation"]=this.accessDelegation),(await this.client.request({method:"POST",path:`${this.prefix}/namespaces/${je(t.namespace)}/tables`,body:e,headers:r})).data.metadata}async updateTable(t,e){const r=await this.client.request({method:"POST",path:`${this.prefix}/namespaces/${je(t.namespace)}/tables/${t.name}`,body:e});return{"metadata-location":r.data["metadata-location"],metadata:r.data.metadata}}async dropTable(t,e){await this.client.request({method:"DELETE",path:`${this.prefix}/namespaces/${je(t.namespace)}/tables/${t.name}`,query:{purgeRequested:String((e==null?void 0:e.purge)??!1)}})}async loadTable(t){const e={};return this.accessDelegation&&(e["X-Iceberg-Access-Delegation"]=this.accessDelegation),(await this.client.request({method:"GET",path:`${this.prefix}/namespaces/${je(t.namespace)}/tables/${t.name}`,headers:e})).data.metadata}async tableExists(t){const e={};this.accessDelegation&&(e["X-Iceberg-Access-Delegation"]=this.accessDelegation);try{return await this.client.request({method:"HEAD",path:`${this.prefix}/namespaces/${je(t.namespace)}/tables/${t.name}`,headers:e}),!0}catch(r){if(r instanceof Ze&&r.status===404)return!1;throw r}}async createTableIfNotExists(t,e){try{return await this.createTable(t,e)}catch(r){if(r instanceof Ze&&r.status===409)return await this.loadTable({namespace:t.namespace,name:e.name});throw r}}},cl=class{constructor(t){var s;let e="v1";t.catalogName&&(e+=`/${t.catalogName}`);const r=t.baseUrl.endsWith("/")?t.baseUrl:`${t.baseUrl}/`;this.client=il({baseUrl:r,auth:t.auth,fetchImpl:t.fetch}),this.accessDelegation=(s=t.accessDelegation)==null?void 0:s.join(","),this.namespaceOps=new ol(this.client,e),this.tableOps=new ll(this.client,e,this.accessDelegation)}async listNamespaces(t){return this.namespaceOps.listNamespaces(t)}async createNamespace(t,e){return this.namespaceOps.createNamespace(t,e)}async dropNamespace(t){await this.namespaceOps.dropNamespace(t)}async loadNamespaceMetadata(t){return this.namespaceOps.loadNamespaceMetadata(t)}async listTables(t){return this.tableOps.listTables(t)}async createTable(t,e){return this.tableOps.createTable(t,e)}async updateTable(t,e){return this.tableOps.updateTable(t,e)}async dropTable(t,e){await this.tableOps.dropTable(t,e)}async loadTable(t){return this.tableOps.loadTable(t)}async namespaceExists(t){return this.namespaceOps.namespaceExists(t)}async tableExists(t){return this.tableOps.tableExists(t)}async createNamespaceIfNotExists(t,e){return this.namespaceOps.createNamespaceIfNotExists(t,e)}async createTableIfNotExists(t,e){return this.tableOps.createTableIfNotExists(t,e)}},qt=class extends Error{constructor(t,e="storage",r,s){super(t),this.__isStorageError=!0,this.namespace=e,this.name=e==="vectors"?"StorageVectorsError":"StorageError",this.status=r,this.statusCode=s}};function Mt(t){return typeof t=="object"&&t!==null&&"__isStorageError"in t}var gt=class extends qt{constructor(t,e,r,s="storage"){super(t,s,e,r),this.name=s==="vectors"?"StorageVectorsApiError":"StorageApiError",this.status=e,this.statusCode=r}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}},ta=class extends qt{constructor(t,e,r="storage"){super(t,r),this.name=r==="vectors"?"StorageVectorsUnknownError":"StorageUnknownError",this.originalError=e}};const dl=t=>t?(...e)=>t(...e):(...e)=>fetch(...e),ul=t=>{if(typeof t!="object"||t===null)return!1;const e=Object.getPrototypeOf(t);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(Symbol.toStringTag in t)&&!(Symbol.iterator in t)},gr=t=>{if(Array.isArray(t))return t.map(r=>gr(r));if(typeof t=="function"||t!==Object(t))return t;const e={};return Object.entries(t).forEach(([r,s])=>{const n=r.replace(/([-_][a-z])/gi,i=>i.toUpperCase().replace(/[-_]/g,""));e[n]=gr(s)}),e},hl=t=>!t||typeof t!="string"||t.length===0||t.length>100||t.trim()!==t||t.includes("/")||t.includes("\\")?!1:/^[\w!.\*'() &$@=;:+,?-]+$/.test(t);function et(t){"@babel/helpers - typeof";return et=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},et(t)}function ml(t,e){if(et(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var s=r.call(t,e);if(et(s)!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function pl(t){var e=ml(t,"string");return et(e)=="symbol"?e:e+""}function fl(t,e,r){return(e=pl(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function ts(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);e&&(s=s.filter(function(n){return Object.getOwnPropertyDescriptor(t,n).enumerable})),r.push.apply(r,s)}return r}function T(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?ts(Object(r),!0).forEach(function(s){fl(t,s,r[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):ts(Object(r)).forEach(function(s){Object.defineProperty(t,s,Object.getOwnPropertyDescriptor(r,s))})}return t}const rs=t=>{var e;return t.msg||t.message||t.error_description||(typeof t.error=="string"?t.error:(e=t.error)===null||e===void 0?void 0:e.message)||JSON.stringify(t)},gl=async(t,e,r,s)=>{if(t&&typeof t=="object"&&"status"in t&&"ok"in t&&typeof t.status=="number"&&!(r!=null&&r.noResolveJson)){const n=t,i=n.status||500;if(typeof n.json=="function")n.json().then(o=>{const l=(o==null?void 0:o.statusCode)||(o==null?void 0:o.code)||i+"";e(new gt(rs(o),i,l,s))}).catch(()=>{if(s==="vectors"){const o=i+"";e(new gt(n.statusText||`HTTP ${i} error`,i,o,s))}else{const o=i+"";e(new gt(n.statusText||`HTTP ${i} error`,i,o,s))}});else{const o=i+"";e(new gt(n.statusText||`HTTP ${i} error`,i,o,s))}}else e(new ta(rs(t),t,s))},xl=(t,e,r,s)=>{const n={method:t,headers:(e==null?void 0:e.headers)||{}};return t==="GET"||t==="HEAD"||!s?T(T({},n),r):(ul(s)?(n.headers=T({"Content-Type":"application/json"},e==null?void 0:e.headers),n.body=JSON.stringify(s)):n.body=s,e!=null&&e.duplex&&(n.duplex=e.duplex),T(T({},n),r))};async function Ve(t,e,r,s,n,i,o){return new Promise((l,c)=>{t(r,xl(e,s,n,i)).then(d=>{if(!d.ok)throw d;if(s!=null&&s.noResolveJson)return d;if(o==="vectors"){const u=d.headers.get("content-type");if(d.headers.get("content-length")==="0"||d.status===204)return{};if(!u||!u.includes("application/json"))return{}}return d.json()}).then(d=>l(d)).catch(d=>gl(d,c,s,o))})}function ra(t="storage"){return{get:async(e,r,s,n)=>Ve(e,"GET",r,s,n,void 0,t),post:async(e,r,s,n,i)=>Ve(e,"POST",r,n,i,s,t),put:async(e,r,s,n,i)=>Ve(e,"PUT",r,n,i,s,t),head:async(e,r,s,n)=>Ve(e,"HEAD",r,T(T({},s),{},{noResolveJson:!0}),n,void 0,t),remove:async(e,r,s,n,i)=>Ve(e,"DELETE",r,n,i,s,t)}}const bl=ra("storage"),{get:tt,post:J,put:xr,head:vl,remove:Cr}=bl,W=ra("vectors");var ze=class{constructor(t,e={},r,s="storage"){this.shouldThrowOnError=!1,this.url=t,this.headers=e,this.fetch=dl(r),this.namespace=s}throwOnError(){return this.shouldThrowOnError=!0,this}async handleOperation(t){var e=this;try{return{data:await t(),error:null}}catch(r){if(e.shouldThrowOnError)throw r;if(Mt(r))return{data:null,error:r};throw r}}},yl=class{constructor(t,e){this.downloadFn=t,this.shouldThrowOnError=e}then(t,e){return this.execute().then(t,e)}async execute(){var t=this;try{return{data:(await t.downloadFn()).body,error:null}}catch(e){if(t.shouldThrowOnError)throw e;if(Mt(e))return{data:null,error:e};throw e}}};let sa;sa=Symbol.toStringTag;var wl=class{constructor(t,e){this.downloadFn=t,this.shouldThrowOnError=e,this[sa]="BlobDownloadBuilder",this.promise=null}asStream(){return new yl(this.downloadFn,this.shouldThrowOnError)}then(t,e){return this.getPromise().then(t,e)}catch(t){return this.getPromise().catch(t)}finally(t){return this.getPromise().finally(t)}getPromise(){return this.promise||(this.promise=this.execute()),this.promise}async execute(){var t=this;try{return{data:await(await t.downloadFn()).blob(),error:null}}catch(e){if(t.shouldThrowOnError)throw e;if(Mt(e))return{data:null,error:e};throw e}}};const _l={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},ss={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};var jl=class extends ze{constructor(t,e={},r,s){super(t,e,s,"storage"),this.bucketId=r}async uploadOrUpdate(t,e,r,s){var n=this;return n.handleOperation(async()=>{let i;const o=T(T({},ss),s);let l=T(T({},n.headers),t==="POST"&&{"x-upsert":String(o.upsert)});const c=o.metadata;typeof Blob<"u"&&r instanceof Blob?(i=new FormData,i.append("cacheControl",o.cacheControl),c&&i.append("metadata",n.encodeMetadata(c)),i.append("",r)):typeof FormData<"u"&&r instanceof FormData?(i=r,i.has("cacheControl")||i.append("cacheControl",o.cacheControl),c&&!i.has("metadata")&&i.append("metadata",n.encodeMetadata(c))):(i=r,l["cache-control"]=`max-age=${o.cacheControl}`,l["content-type"]=o.contentType,c&&(l["x-metadata"]=n.toBase64(n.encodeMetadata(c))),(typeof ReadableStream<"u"&&i instanceof ReadableStream||i&&typeof i=="object"&&"pipe"in i&&typeof i.pipe=="function")&&!o.duplex&&(o.duplex="half")),s!=null&&s.headers&&(l=T(T({},l),s.headers));const d=n._removeEmptyFolders(e),u=n._getFinalPath(d),h=await(t=="PUT"?xr:J)(n.fetch,`${n.url}/object/${u}`,i,T({headers:l},o!=null&&o.duplex?{duplex:o.duplex}:{}));return{path:d,id:h.Id,fullPath:h.Key}})}async upload(t,e,r){return this.uploadOrUpdate("POST",t,e,r)}async uploadToSignedUrl(t,e,r,s){var n=this;const i=n._removeEmptyFolders(t),o=n._getFinalPath(i),l=new URL(n.url+`/object/upload/sign/${o}`);return l.searchParams.set("token",e),n.handleOperation(async()=>{let c;const d=T({upsert:ss.upsert},s),u=T(T({},n.headers),{"x-upsert":String(d.upsert)});return typeof Blob<"u"&&r instanceof Blob?(c=new FormData,c.append("cacheControl",d.cacheControl),c.append("",r)):typeof FormData<"u"&&r instanceof FormData?(c=r,c.append("cacheControl",d.cacheControl)):(c=r,u["cache-control"]=`max-age=${d.cacheControl}`,u["content-type"]=d.contentType),{path:i,fullPath:(await xr(n.fetch,l.toString(),c,{headers:u})).Key}})}async createSignedUploadUrl(t,e){var r=this;return r.handleOperation(async()=>{let s=r._getFinalPath(t);const n=T({},r.headers);e!=null&&e.upsert&&(n["x-upsert"]="true");const i=await J(r.fetch,`${r.url}/object/upload/sign/${s}`,{},{headers:n}),o=new URL(r.url+i.url),l=o.searchParams.get("token");if(!l)throw new qt("No token returned by API");return{signedUrl:o.toString(),path:t,token:l}})}async update(t,e,r){return this.uploadOrUpdate("PUT",t,e,r)}async move(t,e,r){var s=this;return s.handleOperation(async()=>await J(s.fetch,`${s.url}/object/move`,{bucketId:s.bucketId,sourceKey:t,destinationKey:e,destinationBucket:r==null?void 0:r.destinationBucket},{headers:s.headers}))}async copy(t,e,r){var s=this;return s.handleOperation(async()=>({path:(await J(s.fetch,`${s.url}/object/copy`,{bucketId:s.bucketId,sourceKey:t,destinationKey:e,destinationBucket:r==null?void 0:r.destinationBucket},{headers:s.headers})).Key}))}async createSignedUrl(t,e,r){var s=this;return s.handleOperation(async()=>{let n=s._getFinalPath(t),i=await J(s.fetch,`${s.url}/object/sign/${n}`,T({expiresIn:e},r!=null&&r.transform?{transform:r.transform}:{}),{headers:s.headers});const o=r!=null&&r.download?`&download=${r.download===!0?"":r.download}`:"";return{signedUrl:encodeURI(`${s.url}${i.signedURL}${o}`)}})}async createSignedUrls(t,e,r){var s=this;return s.handleOperation(async()=>{const n=await J(s.fetch,`${s.url}/object/sign/${s.bucketId}`,{expiresIn:e,paths:t},{headers:s.headers}),i=r!=null&&r.download?`&download=${r.download===!0?"":r.download}`:"";return n.map(o=>T(T({},o),{},{signedUrl:o.signedURL?encodeURI(`${s.url}${o.signedURL}${i}`):null}))})}download(t,e,r){const s=typeof(e==null?void 0:e.transform)<"u"?"render/image/authenticated":"object",n=this.transformOptsToQueryString((e==null?void 0:e.transform)||{}),i=n?`?${n}`:"",o=this._getFinalPath(t),l=()=>tt(this.fetch,`${this.url}/${s}/${o}${i}`,{headers:this.headers,noResolveJson:!0},r);return new wl(l,this.shouldThrowOnError)}async info(t){var e=this;const r=e._getFinalPath(t);return e.handleOperation(async()=>gr(await tt(e.fetch,`${e.url}/object/info/${r}`,{headers:e.headers})))}async exists(t){var e=this;const r=e._getFinalPath(t);try{return await vl(e.fetch,`${e.url}/object/${r}`,{headers:e.headers}),{data:!0,error:null}}catch(s){if(e.shouldThrowOnError)throw s;if(Mt(s)&&s instanceof ta){const n=s.originalError;if([400,404].includes(n==null?void 0:n.status))return{data:!1,error:s}}throw s}}getPublicUrl(t,e){const r=this._getFinalPath(t),s=[],n=e!=null&&e.download?`download=${e.download===!0?"":e.download}`:"";n!==""&&s.push(n);const i=typeof(e==null?void 0:e.transform)<"u"?"render/image":"object",o=this.transformOptsToQueryString((e==null?void 0:e.transform)||{});o!==""&&s.push(o);let l=s.join("&");return l!==""&&(l=`?${l}`),{data:{publicUrl:encodeURI(`${this.url}/${i}/public/${r}${l}`)}}}async remove(t){var e=this;return e.handleOperation(async()=>await Cr(e.fetch,`${e.url}/object/${e.bucketId}`,{prefixes:t},{headers:e.headers}))}async list(t,e,r){var s=this;return s.handleOperation(async()=>{const n=T(T(T({},_l),e),{},{prefix:t||""});return await J(s.fetch,`${s.url}/object/list/${s.bucketId}`,n,{headers:s.headers},r)})}async listV2(t,e){var r=this;return r.handleOperation(async()=>{const s=T({},t);return await J(r.fetch,`${r.url}/object/list-v2/${r.bucketId}`,s,{headers:r.headers},e)})}encodeMetadata(t){return JSON.stringify(t)}toBase64(t){return typeof Buffer<"u"?Buffer.from(t).toString("base64"):btoa(t)}_getFinalPath(t){return`${this.bucketId}/${t.replace(/^\/+/,"")}`}_removeEmptyFolders(t){return t.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(t){const e=[];return t.width&&e.push(`width=${t.width}`),t.height&&e.push(`height=${t.height}`),t.resize&&e.push(`resize=${t.resize}`),t.format&&e.push(`format=${t.format}`),t.quality&&e.push(`quality=${t.quality}`),e.join("&")}};const Nl="2.95.3",ct={"X-Client-Info":`storage-js/${Nl}`};var Sl=class extends ze{constructor(t,e={},r,s){const n=new URL(t);s!=null&&s.useNewHostname&&/supabase\.(co|in|red)$/.test(n.hostname)&&!n.hostname.includes("storage.supabase.")&&(n.hostname=n.hostname.replace("supabase.","storage.supabase."));const i=n.href.replace(/\/$/,""),o=T(T({},ct),e);super(i,o,r,"storage")}async listBuckets(t){var e=this;return e.handleOperation(async()=>{const r=e.listBucketOptionsToQueryString(t);return await tt(e.fetch,`${e.url}/bucket${r}`,{headers:e.headers})})}async getBucket(t){var e=this;return e.handleOperation(async()=>await tt(e.fetch,`${e.url}/bucket/${t}`,{headers:e.headers}))}async createBucket(t,e={public:!1}){var r=this;return r.handleOperation(async()=>await J(r.fetch,`${r.url}/bucket`,{id:t,name:t,type:e.type,public:e.public,file_size_limit:e.fileSizeLimit,allowed_mime_types:e.allowedMimeTypes},{headers:r.headers}))}async updateBucket(t,e){var r=this;return r.handleOperation(async()=>await xr(r.fetch,`${r.url}/bucket/${t}`,{id:t,name:t,public:e.public,file_size_limit:e.fileSizeLimit,allowed_mime_types:e.allowedMimeTypes},{headers:r.headers}))}async emptyBucket(t){var e=this;return e.handleOperation(async()=>await J(e.fetch,`${e.url}/bucket/${t}/empty`,{},{headers:e.headers}))}async deleteBucket(t){var e=this;return e.handleOperation(async()=>await Cr(e.fetch,`${e.url}/bucket/${t}`,{},{headers:e.headers}))}listBucketOptionsToQueryString(t){const e={};return t&&("limit"in t&&(e.limit=String(t.limit)),"offset"in t&&(e.offset=String(t.offset)),t.search&&(e.search=t.search),t.sortColumn&&(e.sortColumn=t.sortColumn),t.sortOrder&&(e.sortOrder=t.sortOrder)),Object.keys(e).length>0?"?"+new URLSearchParams(e).toString():""}},El=class extends ze{constructor(t,e={},r){const s=t.replace(/\/$/,""),n=T(T({},ct),e);super(s,n,r,"storage")}async createBucket(t){var e=this;return e.handleOperation(async()=>await J(e.fetch,`${e.url}/bucket`,{name:t},{headers:e.headers}))}async listBuckets(t){var e=this;return e.handleOperation(async()=>{const r=new URLSearchParams;(t==null?void 0:t.limit)!==void 0&&r.set("limit",t.limit.toString()),(t==null?void 0:t.offset)!==void 0&&r.set("offset",t.offset.toString()),t!=null&&t.sortColumn&&r.set("sortColumn",t.sortColumn),t!=null&&t.sortOrder&&r.set("sortOrder",t.sortOrder),t!=null&&t.search&&r.set("search",t.search);const s=r.toString(),n=s?`${e.url}/bucket?${s}`:`${e.url}/bucket`;return await tt(e.fetch,n,{headers:e.headers})})}async deleteBucket(t){var e=this;return e.handleOperation(async()=>await Cr(e.fetch,`${e.url}/bucket/${t}`,{},{headers:e.headers}))}from(t){var e=this;if(!hl(t))throw new qt("Invalid bucket name: File, folder, and bucket names must follow AWS object key naming guidelines and should avoid the use of any other characters.");const r=new cl({baseUrl:this.url,catalogName:t,auth:{type:"custom",getHeaders:async()=>e.headers},fetch:this.fetch}),s=this.shouldThrowOnError;return new Proxy(r,{get(n,i){const o=n[i];return typeof o!="function"?o:async(...l)=>{try{return{data:await o.apply(n,l),error:null}}catch(c){if(s)throw c;return{data:null,error:c}}}}})}},kl=class extends ze{constructor(t,e={},r){const s=t.replace(/\/$/,""),n=T(T({},ct),{},{"Content-Type":"application/json"},e);super(s,n,r,"vectors")}async createIndex(t){var e=this;return e.handleOperation(async()=>await W.post(e.fetch,`${e.url}/CreateIndex`,t,{headers:e.headers})||{})}async getIndex(t,e){var r=this;return r.handleOperation(async()=>await W.post(r.fetch,`${r.url}/GetIndex`,{vectorBucketName:t,indexName:e},{headers:r.headers}))}async listIndexes(t){var e=this;return e.handleOperation(async()=>await W.post(e.fetch,`${e.url}/ListIndexes`,t,{headers:e.headers}))}async deleteIndex(t,e){var r=this;return r.handleOperation(async()=>await W.post(r.fetch,`${r.url}/DeleteIndex`,{vectorBucketName:t,indexName:e},{headers:r.headers})||{})}},Al=class extends ze{constructor(t,e={},r){const s=t.replace(/\/$/,""),n=T(T({},ct),{},{"Content-Type":"application/json"},e);super(s,n,r,"vectors")}async putVectors(t){var e=this;if(t.vectors.length<1||t.vectors.length>500)throw new Error("Vector batch size must be between 1 and 500 items");return e.handleOperation(async()=>await W.post(e.fetch,`${e.url}/PutVectors`,t,{headers:e.headers})||{})}async getVectors(t){var e=this;return e.handleOperation(async()=>await W.post(e.fetch,`${e.url}/GetVectors`,t,{headers:e.headers}))}async listVectors(t){var e=this;if(t.segmentCount!==void 0){if(t.segmentCount<1||t.segmentCount>16)throw new Error("segmentCount must be between 1 and 16");if(t.segmentIndex!==void 0&&(t.segmentIndex<0||t.segmentIndex>=t.segmentCount))throw new Error(`segmentIndex must be between 0 and ${t.segmentCount-1}`)}return e.handleOperation(async()=>await W.post(e.fetch,`${e.url}/ListVectors`,t,{headers:e.headers}))}async queryVectors(t){var e=this;return e.handleOperation(async()=>await W.post(e.fetch,`${e.url}/QueryVectors`,t,{headers:e.headers}))}async deleteVectors(t){var e=this;if(t.keys.length<1||t.keys.length>500)throw new Error("Keys batch size must be between 1 and 500 items");return e.handleOperation(async()=>await W.post(e.fetch,`${e.url}/DeleteVectors`,t,{headers:e.headers})||{})}},Tl=class extends ze{constructor(t,e={},r){const s=t.replace(/\/$/,""),n=T(T({},ct),{},{"Content-Type":"application/json"},e);super(s,n,r,"vectors")}async createBucket(t){var e=this;return e.handleOperation(async()=>await W.post(e.fetch,`${e.url}/CreateVectorBucket`,{vectorBucketName:t},{headers:e.headers})||{})}async getBucket(t){var e=this;return e.handleOperation(async()=>await W.post(e.fetch,`${e.url}/GetVectorBucket`,{vectorBucketName:t},{headers:e.headers}))}async listBuckets(t={}){var e=this;return e.handleOperation(async()=>await W.post(e.fetch,`${e.url}/ListVectorBuckets`,t,{headers:e.headers}))}async deleteBucket(t){var e=this;return e.handleOperation(async()=>await W.post(e.fetch,`${e.url}/DeleteVectorBucket`,{vectorBucketName:t},{headers:e.headers})||{})}},Rl=class extends Tl{constructor(t,e={}){super(t,e.headers||{},e.fetch)}from(t){return new Ol(this.url,this.headers,t,this.fetch)}async createBucket(t){var e=()=>super.createBucket,r=this;return e().call(r,t)}async getBucket(t){var e=()=>super.getBucket,r=this;return e().call(r,t)}async listBuckets(t={}){var e=()=>super.listBuckets,r=this;return e().call(r,t)}async deleteBucket(t){var e=()=>super.deleteBucket,r=this;return e().call(r,t)}},Ol=class extends kl{constructor(t,e,r,s){super(t,e,s),this.vectorBucketName=r}async createIndex(t){var e=()=>super.createIndex,r=this;return e().call(r,T(T({},t),{},{vectorBucketName:r.vectorBucketName}))}async listIndexes(t={}){var e=()=>super.listIndexes,r=this;return e().call(r,T(T({},t),{},{vectorBucketName:r.vectorBucketName}))}async getIndex(t){var e=()=>super.getIndex,r=this;return e().call(r,r.vectorBucketName,t)}async deleteIndex(t){var e=()=>super.deleteIndex,r=this;return e().call(r,r.vectorBucketName,t)}index(t){return new Cl(this.url,this.headers,this.vectorBucketName,t,this.fetch)}},Cl=class extends Al{constructor(t,e,r,s,n){super(t,e,n),this.vectorBucketName=r,this.indexName=s}async putVectors(t){var e=()=>super.putVectors,r=this;return e().call(r,T(T({},t),{},{vectorBucketName:r.vectorBucketName,indexName:r.indexName}))}async getVectors(t){var e=()=>super.getVectors,r=this;return e().call(r,T(T({},t),{},{vectorBucketName:r.vectorBucketName,indexName:r.indexName}))}async listVectors(t={}){var e=()=>super.listVectors,r=this;return e().call(r,T(T({},t),{},{vectorBucketName:r.vectorBucketName,indexName:r.indexName}))}async queryVectors(t){var e=()=>super.queryVectors,r=this;return e().call(r,T(T({},t),{},{vectorBucketName:r.vectorBucketName,indexName:r.indexName}))}async deleteVectors(t){var e=()=>super.deleteVectors,r=this;return e().call(r,T(T({},t),{},{vectorBucketName:r.vectorBucketName,indexName:r.indexName}))}},Pl=class extends Sl{constructor(t,e={},r,s){super(t,e,r,s)}from(t){return new jl(this.url,this.headers,t,this.fetch)}get vectors(){return new Rl(this.url+"/vector",{headers:this.headers,fetch:this.fetch})}get analytics(){return new El(this.url+"/iceberg",this.headers,this.fetch)}};const aa="2.95.3",Re=30*1e3,br=3,Yt=br*Re,Il="http://localhost:9999",$l="supabase.auth.token",Ll={"X-Client-Info":`gotrue-js/${aa}`},vr="X-Supabase-Api-Version",na={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}},Dl=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i,Ul=10*60*1e3;class rt extends Error{constructor(e,r,s){super(e),this.__isAuthError=!0,this.name="AuthError",this.status=r,this.code=s}}function S(t){return typeof t=="object"&&t!==null&&"__isAuthError"in t}class ql extends rt{constructor(e,r,s){super(e,r,s),this.name="AuthApiError",this.status=r,this.code=s}}function Ml(t){return S(t)&&t.name==="AuthApiError"}class fe extends rt{constructor(e,r){super(e),this.name="AuthUnknownError",this.originalError=r}}class oe extends rt{constructor(e,r,s,n){super(e,s,n),this.name=r,this.status=s}}class H extends oe{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}function Qt(t){return S(t)&&t.name==="AuthSessionMissingError"}class Ne extends oe{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class xt extends oe{constructor(e){super(e,"AuthInvalidCredentialsError",400,void 0)}}class bt extends oe{constructor(e,r=null){super(e,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=r}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}function zl(t){return S(t)&&t.name==="AuthImplicitGrantRedirectError"}class as extends oe{constructor(e,r=null){super(e,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=r}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class Bl extends oe{constructor(){super("PKCE code verifier not found in storage. This can happen if the auth flow was initiated in a different browser or device, or if the storage was cleared. For SSR frameworks (Next.js, SvelteKit, etc.), use @supabase/ssr on both the server and client to store the code verifier in cookies.","AuthPKCECodeVerifierMissingError",400,"pkce_code_verifier_not_found")}}class yr extends oe{constructor(e,r){super(e,"AuthRetryableFetchError",r,void 0)}}function Xt(t){return S(t)&&t.name==="AuthRetryableFetchError"}class ns extends oe{constructor(e,r,s){super(e,"AuthWeakPasswordError",r,"weak_password"),this.reasons=s}}class wr extends oe{constructor(e){super(e,"AuthInvalidJwtError",400,"invalid_jwt")}}const At="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),is=` 	
\r=`.split(""),Fl=(()=>{const t=new Array(128);for(let e=0;e<t.length;e+=1)t[e]=-1;for(let e=0;e<is.length;e+=1)t[is[e].charCodeAt(0)]=-2;for(let e=0;e<At.length;e+=1)t[At[e].charCodeAt(0)]=e;return t})();function os(t,e,r){if(t!==null)for(e.queue=e.queue<<8|t,e.queuedBits+=8;e.queuedBits>=6;){const s=e.queue>>e.queuedBits-6&63;r(At[s]),e.queuedBits-=6}else if(e.queuedBits>0)for(e.queue=e.queue<<6-e.queuedBits,e.queuedBits=6;e.queuedBits>=6;){const s=e.queue>>e.queuedBits-6&63;r(At[s]),e.queuedBits-=6}}function ia(t,e,r){const s=Fl[t];if(s>-1)for(e.queue=e.queue<<6|s,e.queuedBits+=6;e.queuedBits>=8;)r(e.queue>>e.queuedBits-8&255),e.queuedBits-=8;else{if(s===-2)return;throw new Error(`Invalid Base64-URL character "${String.fromCharCode(t)}"`)}}function ls(t){const e=[],r=o=>{e.push(String.fromCodePoint(o))},s={utf8seq:0,codepoint:0},n={queue:0,queuedBits:0},i=o=>{Vl(o,s,r)};for(let o=0;o<t.length;o+=1)ia(t.charCodeAt(o),n,i);return e.join("")}function Hl(t,e){if(t<=127){e(t);return}else if(t<=2047){e(192|t>>6),e(128|t&63);return}else if(t<=65535){e(224|t>>12),e(128|t>>6&63),e(128|t&63);return}else if(t<=1114111){e(240|t>>18),e(128|t>>12&63),e(128|t>>6&63),e(128|t&63);return}throw new Error(`Unrecognized Unicode codepoint: ${t.toString(16)}`)}function Wl(t,e){for(let r=0;r<t.length;r+=1){let s=t.charCodeAt(r);if(s>55295&&s<=56319){const n=(s-55296)*1024&65535;s=(t.charCodeAt(r+1)-56320&65535|n)+65536,r+=1}Hl(s,e)}}function Vl(t,e,r){if(e.utf8seq===0){if(t<=127){r(t);return}for(let s=1;s<6;s+=1)if(!(t>>7-s&1)){e.utf8seq=s;break}if(e.utf8seq===2)e.codepoint=t&31;else if(e.utf8seq===3)e.codepoint=t&15;else if(e.utf8seq===4)e.codepoint=t&7;else throw new Error("Invalid UTF-8 sequence");e.utf8seq-=1}else if(e.utf8seq>0){if(t<=127)throw new Error("Invalid UTF-8 sequence");e.codepoint=e.codepoint<<6|t&63,e.utf8seq-=1,e.utf8seq===0&&r(e.codepoint)}}function Le(t){const e=[],r={queue:0,queuedBits:0},s=n=>{e.push(n)};for(let n=0;n<t.length;n+=1)ia(t.charCodeAt(n),r,s);return new Uint8Array(e)}function Kl(t){const e=[];return Wl(t,r=>e.push(r)),new Uint8Array(e)}function ge(t){const e=[],r={queue:0,queuedBits:0},s=n=>{e.push(n)};return t.forEach(n=>os(n,r,s)),os(null,r,s),e.join("")}function Gl(t){return Math.round(Date.now()/1e3)+t}function Jl(){return Symbol("auth-callback")}const z=()=>typeof window<"u"&&typeof document<"u",ue={tested:!1,writable:!1},oa=()=>{if(!z())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(ue.tested)return ue.writable;const t=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(t,t),globalThis.localStorage.removeItem(t),ue.tested=!0,ue.writable=!0}catch{ue.tested=!0,ue.writable=!1}return ue.writable};function Yl(t){const e={},r=new URL(t);if(r.hash&&r.hash[0]==="#")try{new URLSearchParams(r.hash.substring(1)).forEach((n,i)=>{e[i]=n})}catch{}return r.searchParams.forEach((s,n)=>{e[n]=s}),e}const la=t=>t?(...e)=>t(...e):(...e)=>fetch(...e),Ql=t=>typeof t=="object"&&t!==null&&"status"in t&&"ok"in t&&"json"in t&&typeof t.json=="function",Oe=async(t,e,r)=>{await t.setItem(e,JSON.stringify(r))},he=async(t,e)=>{const r=await t.getItem(e);if(!r)return null;try{return JSON.parse(r)}catch{return r}},M=async(t,e)=>{await t.removeItem(e)};class zt{constructor(){this.promise=new zt.promiseConstructor((e,r)=>{this.resolve=e,this.reject=r})}}zt.promiseConstructor=Promise;function vt(t){const e=t.split(".");if(e.length!==3)throw new wr("Invalid JWT structure");for(let s=0;s<e.length;s++)if(!Dl.test(e[s]))throw new wr("JWT not in base64url format");return{header:JSON.parse(ls(e[0])),payload:JSON.parse(ls(e[1])),signature:Le(e[2]),raw:{header:e[0],payload:e[1]}}}async function Xl(t){return await new Promise(e=>{setTimeout(()=>e(null),t)})}function Zl(t,e){return new Promise((s,n)=>{(async()=>{for(let i=0;i<1/0;i++)try{const o=await t(i);if(!e(i,null,o)){s(o);return}}catch(o){if(!e(i,o)){n(o);return}}})()})}function ec(t){return("0"+t.toString(16)).substr(-2)}function tc(){const e=new Uint32Array(56);if(typeof crypto>"u"){const r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",s=r.length;let n="";for(let i=0;i<56;i++)n+=r.charAt(Math.floor(Math.random()*s));return n}return crypto.getRandomValues(e),Array.from(e,ec).join("")}async function rc(t){const r=new TextEncoder().encode(t),s=await crypto.subtle.digest("SHA-256",r),n=new Uint8Array(s);return Array.from(n).map(i=>String.fromCharCode(i)).join("")}async function sc(t){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),t;const r=await rc(t);return btoa(r).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function Se(t,e,r=!1){const s=tc();let n=s;r&&(n+="/PASSWORD_RECOVERY"),await Oe(t,`${e}-code-verifier`,n);const i=await sc(s);return[i,s===i?"plain":"s256"]}const ac=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function nc(t){const e=t.headers.get(vr);if(!e||!e.match(ac))return null;try{return new Date(`${e}T00:00:00.0Z`)}catch{return null}}function ic(t){if(!t)throw new Error("Missing exp claim");const e=Math.floor(Date.now()/1e3);if(t<=e)throw new Error("JWT has expired")}function oc(t){switch(t){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}const lc=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/;function Ee(t){if(!lc.test(t))throw new Error("@supabase/auth-js: Expected parameter to be UUID but is not")}function Zt(){const t={};return new Proxy(t,{get:(e,r)=>{if(r==="__isUserNotAvailableProxy")return!0;if(typeof r=="symbol"){const s=r.toString();if(s==="Symbol(Symbol.toPrimitive)"||s==="Symbol(Symbol.toStringTag)"||s==="Symbol(util.inspect.custom)")return}throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Accessing the "${r}" property of the session object is not supported. Please use getUser() instead.`)},set:(e,r)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Setting the "${r}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)},deleteProperty:(e,r)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Deleting the "${r}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)}})}function cc(t,e){return new Proxy(t,{get:(r,s,n)=>{if(s==="__isInsecureUserWarningProxy")return!0;if(typeof s=="symbol"){const i=s.toString();if(i==="Symbol(Symbol.toPrimitive)"||i==="Symbol(Symbol.toStringTag)"||i==="Symbol(util.inspect.custom)"||i==="Symbol(nodejs.util.inspect.custom)")return Reflect.get(r,s,n)}return!e.value&&typeof s=="string"&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),e.value=!0),Reflect.get(r,s,n)}})}function cs(t){return JSON.parse(JSON.stringify(t))}const me=t=>t.msg||t.message||t.error_description||t.error||JSON.stringify(t),dc=[502,503,504];async function ds(t){var e;if(!Ql(t))throw new yr(me(t),0);if(dc.includes(t.status))throw new yr(me(t),t.status);let r;try{r=await t.json()}catch(i){throw new fe(me(i),i)}let s;const n=nc(t);if(n&&n.getTime()>=na["2024-01-01"].timestamp&&typeof r=="object"&&r&&typeof r.code=="string"?s=r.code:typeof r=="object"&&r&&typeof r.error_code=="string"&&(s=r.error_code),s){if(s==="weak_password")throw new ns(me(r),t.status,((e=r.weak_password)===null||e===void 0?void 0:e.reasons)||[]);if(s==="session_not_found")throw new H}else if(typeof r=="object"&&r&&typeof r.weak_password=="object"&&r.weak_password&&Array.isArray(r.weak_password.reasons)&&r.weak_password.reasons.length&&r.weak_password.reasons.reduce((i,o)=>i&&typeof o=="string",!0))throw new ns(me(r),t.status,r.weak_password.reasons);throw new ql(me(r),t.status||500,s)}const uc=(t,e,r,s)=>{const n={method:t,headers:(e==null?void 0:e.headers)||{}};return t==="GET"?n:(n.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},e==null?void 0:e.headers),n.body=JSON.stringify(s),Object.assign(Object.assign({},n),r))};async function A(t,e,r,s){var n;const i=Object.assign({},s==null?void 0:s.headers);i[vr]||(i[vr]=na["2024-01-01"].name),s!=null&&s.jwt&&(i.Authorization=`Bearer ${s.jwt}`);const o=(n=s==null?void 0:s.query)!==null&&n!==void 0?n:{};s!=null&&s.redirectTo&&(o.redirect_to=s.redirectTo);const l=Object.keys(o).length?"?"+new URLSearchParams(o).toString():"",c=await hc(t,e,r+l,{headers:i,noResolveJson:s==null?void 0:s.noResolveJson},{},s==null?void 0:s.body);return s!=null&&s.xform?s==null?void 0:s.xform(c):{data:Object.assign({},c),error:null}}async function hc(t,e,r,s,n,i){const o=uc(e,s,n,i);let l;try{l=await t(r,Object.assign({},o))}catch(c){throw console.error(c),new yr(me(c),0)}if(l.ok||await ds(l),s!=null&&s.noResolveJson)return l;try{return await l.json()}catch(c){await ds(c)}}function G(t){var e;let r=null;fc(t)&&(r=Object.assign({},t),t.expires_at||(r.expires_at=Gl(t.expires_in)));const s=(e=t.user)!==null&&e!==void 0?e:t;return{data:{session:r,user:s},error:null}}function us(t){const e=G(t);return!e.error&&t.weak_password&&typeof t.weak_password=="object"&&Array.isArray(t.weak_password.reasons)&&t.weak_password.reasons.length&&t.weak_password.message&&typeof t.weak_password.message=="string"&&t.weak_password.reasons.reduce((r,s)=>r&&typeof s=="string",!0)&&(e.data.weak_password=t.weak_password),e}function ce(t){var e;return{data:{user:(e=t.user)!==null&&e!==void 0?e:t},error:null}}function mc(t){return{data:t,error:null}}function pc(t){const{action_link:e,email_otp:r,hashed_token:s,redirect_to:n,verification_type:i}=t,o=Ut(t,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),l={action_link:e,email_otp:r,hashed_token:s,redirect_to:n,verification_type:i},c=Object.assign({},o);return{data:{properties:l,user:c},error:null}}function hs(t){return t}function fc(t){return t.access_token&&t.refresh_token&&t.expires_in}const er=["global","local","others"];class gc{constructor({url:e="",headers:r={},fetch:s}){this.url=e,this.headers=r,this.fetch=la(s),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)},this.oauth={listClients:this._listOAuthClients.bind(this),createClient:this._createOAuthClient.bind(this),getClient:this._getOAuthClient.bind(this),updateClient:this._updateOAuthClient.bind(this),deleteClient:this._deleteOAuthClient.bind(this),regenerateClientSecret:this._regenerateOAuthClientSecret.bind(this)}}async signOut(e,r=er[0]){if(er.indexOf(r)<0)throw new Error(`@supabase/auth-js: Parameter scope must be one of ${er.join(", ")}`);try{return await A(this.fetch,"POST",`${this.url}/logout?scope=${r}`,{headers:this.headers,jwt:e,noResolveJson:!0}),{data:null,error:null}}catch(s){if(S(s))return{data:null,error:s};throw s}}async inviteUserByEmail(e,r={}){try{return await A(this.fetch,"POST",`${this.url}/invite`,{body:{email:e,data:r.data},headers:this.headers,redirectTo:r.redirectTo,xform:ce})}catch(s){if(S(s))return{data:{user:null},error:s};throw s}}async generateLink(e){try{const{options:r}=e,s=Ut(e,["options"]),n=Object.assign(Object.assign({},s),r);return"newEmail"in s&&(n.new_email=s==null?void 0:s.newEmail,delete n.newEmail),await A(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:n,headers:this.headers,xform:pc,redirectTo:r==null?void 0:r.redirectTo})}catch(r){if(S(r))return{data:{properties:null,user:null},error:r};throw r}}async createUser(e){try{return await A(this.fetch,"POST",`${this.url}/admin/users`,{body:e,headers:this.headers,xform:ce})}catch(r){if(S(r))return{data:{user:null},error:r};throw r}}async listUsers(e){var r,s,n,i,o,l,c;try{const d={nextPage:null,lastPage:0,total:0},u=await A(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(s=(r=e==null?void 0:e.page)===null||r===void 0?void 0:r.toString())!==null&&s!==void 0?s:"",per_page:(i=(n=e==null?void 0:e.perPage)===null||n===void 0?void 0:n.toString())!==null&&i!==void 0?i:""},xform:hs});if(u.error)throw u.error;const h=await u.json(),p=(o=u.headers.get("x-total-count"))!==null&&o!==void 0?o:0,m=(c=(l=u.headers.get("link"))===null||l===void 0?void 0:l.split(","))!==null&&c!==void 0?c:[];return m.length>0&&(m.forEach(g=>{const b=parseInt(g.split(";")[0].split("=")[1].substring(0,1)),v=JSON.parse(g.split(";")[1].split("=")[1]);d[`${v}Page`]=b}),d.total=parseInt(p)),{data:Object.assign(Object.assign({},h),d),error:null}}catch(d){if(S(d))return{data:{users:[]},error:d};throw d}}async getUserById(e){Ee(e);try{return await A(this.fetch,"GET",`${this.url}/admin/users/${e}`,{headers:this.headers,xform:ce})}catch(r){if(S(r))return{data:{user:null},error:r};throw r}}async updateUserById(e,r){Ee(e);try{return await A(this.fetch,"PUT",`${this.url}/admin/users/${e}`,{body:r,headers:this.headers,xform:ce})}catch(s){if(S(s))return{data:{user:null},error:s};throw s}}async deleteUser(e,r=!1){Ee(e);try{return await A(this.fetch,"DELETE",`${this.url}/admin/users/${e}`,{headers:this.headers,body:{should_soft_delete:r},xform:ce})}catch(s){if(S(s))return{data:{user:null},error:s};throw s}}async _listFactors(e){Ee(e.userId);try{const{data:r,error:s}=await A(this.fetch,"GET",`${this.url}/admin/users/${e.userId}/factors`,{headers:this.headers,xform:n=>({data:{factors:n},error:null})});return{data:r,error:s}}catch(r){if(S(r))return{data:null,error:r};throw r}}async _deleteFactor(e){Ee(e.userId),Ee(e.id);try{return{data:await A(this.fetch,"DELETE",`${this.url}/admin/users/${e.userId}/factors/${e.id}`,{headers:this.headers}),error:null}}catch(r){if(S(r))return{data:null,error:r};throw r}}async _listOAuthClients(e){var r,s,n,i,o,l,c;try{const d={nextPage:null,lastPage:0,total:0},u=await A(this.fetch,"GET",`${this.url}/admin/oauth/clients`,{headers:this.headers,noResolveJson:!0,query:{page:(s=(r=e==null?void 0:e.page)===null||r===void 0?void 0:r.toString())!==null&&s!==void 0?s:"",per_page:(i=(n=e==null?void 0:e.perPage)===null||n===void 0?void 0:n.toString())!==null&&i!==void 0?i:""},xform:hs});if(u.error)throw u.error;const h=await u.json(),p=(o=u.headers.get("x-total-count"))!==null&&o!==void 0?o:0,m=(c=(l=u.headers.get("link"))===null||l===void 0?void 0:l.split(","))!==null&&c!==void 0?c:[];return m.length>0&&(m.forEach(g=>{const b=parseInt(g.split(";")[0].split("=")[1].substring(0,1)),v=JSON.parse(g.split(";")[1].split("=")[1]);d[`${v}Page`]=b}),d.total=parseInt(p)),{data:Object.assign(Object.assign({},h),d),error:null}}catch(d){if(S(d))return{data:{clients:[]},error:d};throw d}}async _createOAuthClient(e){try{return await A(this.fetch,"POST",`${this.url}/admin/oauth/clients`,{body:e,headers:this.headers,xform:r=>({data:r,error:null})})}catch(r){if(S(r))return{data:null,error:r};throw r}}async _getOAuthClient(e){try{return await A(this.fetch,"GET",`${this.url}/admin/oauth/clients/${e}`,{headers:this.headers,xform:r=>({data:r,error:null})})}catch(r){if(S(r))return{data:null,error:r};throw r}}async _updateOAuthClient(e,r){try{return await A(this.fetch,"PUT",`${this.url}/admin/oauth/clients/${e}`,{body:r,headers:this.headers,xform:s=>({data:s,error:null})})}catch(s){if(S(s))return{data:null,error:s};throw s}}async _deleteOAuthClient(e){try{return await A(this.fetch,"DELETE",`${this.url}/admin/oauth/clients/${e}`,{headers:this.headers,noResolveJson:!0}),{data:null,error:null}}catch(r){if(S(r))return{data:null,error:r};throw r}}async _regenerateOAuthClientSecret(e){try{return await A(this.fetch,"POST",`${this.url}/admin/oauth/clients/${e}/regenerate_secret`,{headers:this.headers,xform:r=>({data:r,error:null})})}catch(r){if(S(r))return{data:null,error:r};throw r}}}function ms(t={}){return{getItem:e=>t[e]||null,setItem:(e,r)=>{t[e]=r},removeItem:e=>{delete t[e]}}}const ke={debug:!!(globalThis&&oa()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")};class ca extends Error{constructor(e){super(e),this.isAcquireTimeout=!0}}class xc extends ca{}async function bc(t,e,r){ke.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",t,e);const s=new globalThis.AbortController;return e>0&&setTimeout(()=>{s.abort(),ke.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",t)},e),await Promise.resolve().then(()=>globalThis.navigator.locks.request(t,e===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:s.signal},async n=>{if(n){ke.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",t,n.name);try{return await r()}finally{ke.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",t,n.name)}}else{if(e===0)throw ke.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",t),new xc(`Acquiring an exclusive Navigator LockManager lock "${t}" immediately failed`);if(ke.debug)try{const i=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(i,null,"  "))}catch(i){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",i)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await r()}}))}function vc(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}function da(t){if(!/^0x[a-fA-F0-9]{40}$/.test(t))throw new Error(`@supabase/auth-js: Address "${t}" is invalid.`);return t.toLowerCase()}function yc(t){return parseInt(t,16)}function wc(t){const e=new TextEncoder().encode(t);return"0x"+Array.from(e,s=>s.toString(16).padStart(2,"0")).join("")}function _c(t){var e;const{chainId:r,domain:s,expirationTime:n,issuedAt:i=new Date,nonce:o,notBefore:l,requestId:c,resources:d,scheme:u,uri:h,version:p}=t;{if(!Number.isInteger(r))throw new Error(`@supabase/auth-js: Invalid SIWE message field "chainId". Chain ID must be a EIP-155 chain ID. Provided value: ${r}`);if(!s)throw new Error('@supabase/auth-js: Invalid SIWE message field "domain". Domain must be provided.');if(o&&o.length<8)throw new Error(`@supabase/auth-js: Invalid SIWE message field "nonce". Nonce must be at least 8 characters. Provided value: ${o}`);if(!h)throw new Error('@supabase/auth-js: Invalid SIWE message field "uri". URI must be provided.');if(p!=="1")throw new Error(`@supabase/auth-js: Invalid SIWE message field "version". Version must be '1'. Provided value: ${p}`);if(!((e=t.statement)===null||e===void 0)&&e.includes(`
`))throw new Error(`@supabase/auth-js: Invalid SIWE message field "statement". Statement must not include '\\n'. Provided value: ${t.statement}`)}const m=da(t.address),g=u?`${u}://${s}`:s,b=t.statement?`${t.statement}
`:"",v=`${g} wants you to sign in with your Ethereum account:
${m}

${b}`;let x=`URI: ${h}
Version: ${p}
Chain ID: ${r}${o?`
Nonce: ${o}`:""}
Issued At: ${i.toISOString()}`;if(n&&(x+=`
Expiration Time: ${n.toISOString()}`),l&&(x+=`
Not Before: ${l.toISOString()}`),c&&(x+=`
Request ID: ${c}`),d){let w=`
Resources:`;for(const y of d){if(!y||typeof y!="string")throw new Error(`@supabase/auth-js: Invalid SIWE message field "resources". Every resource must be a valid string. Provided value: ${y}`);w+=`
- ${y}`}x+=w}return`${v}
${x}`}class D extends Error{constructor({message:e,code:r,cause:s,name:n}){var i;super(e,{cause:s}),this.__isWebAuthnError=!0,this.name=(i=n??(s instanceof Error?s.name:void 0))!==null&&i!==void 0?i:"Unknown Error",this.code=r}}class Tt extends D{constructor(e,r){super({code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:r,message:e}),this.name="WebAuthnUnknownError",this.originalError=r}}function jc({error:t,options:e}){var r,s,n;const{publicKey:i}=e;if(!i)throw Error("options was missing required publicKey property");if(t.name==="AbortError"){if(e.signal instanceof AbortSignal)return new D({message:"Registration ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:t})}else if(t.name==="ConstraintError"){if(((r=i.authenticatorSelection)===null||r===void 0?void 0:r.requireResidentKey)===!0)return new D({message:"Discoverable credentials were required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_DISCOVERABLE_CREDENTIAL_SUPPORT",cause:t});if(e.mediation==="conditional"&&((s=i.authenticatorSelection)===null||s===void 0?void 0:s.userVerification)==="required")return new D({message:"User verification was required during automatic registration but it could not be performed",code:"ERROR_AUTO_REGISTER_USER_VERIFICATION_FAILURE",cause:t});if(((n=i.authenticatorSelection)===null||n===void 0?void 0:n.userVerification)==="required")return new D({message:"User verification was required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_USER_VERIFICATION_SUPPORT",cause:t})}else{if(t.name==="InvalidStateError")return new D({message:"The authenticator was previously registered",code:"ERROR_AUTHENTICATOR_PREVIOUSLY_REGISTERED",cause:t});if(t.name==="NotAllowedError")return new D({message:t.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:t});if(t.name==="NotSupportedError")return i.pubKeyCredParams.filter(l=>l.type==="public-key").length===0?new D({message:'No entry in pubKeyCredParams was of type "public-key"',code:"ERROR_MALFORMED_PUBKEYCREDPARAMS",cause:t}):new D({message:"No available authenticator supported any of the specified pubKeyCredParams algorithms",code:"ERROR_AUTHENTICATOR_NO_SUPPORTED_PUBKEYCREDPARAMS_ALG",cause:t});if(t.name==="SecurityError"){const o=window.location.hostname;if(ua(o)){if(i.rp.id!==o)return new D({message:`The RP ID "${i.rp.id}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:t})}else return new D({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:t})}else if(t.name==="TypeError"){if(i.user.id.byteLength<1||i.user.id.byteLength>64)return new D({message:"User ID was not between 1 and 64 characters",code:"ERROR_INVALID_USER_ID_LENGTH",cause:t})}else if(t.name==="UnknownError")return new D({message:"The authenticator was unable to process the specified options, or could not create a new credential",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:t})}return new D({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:t})}function Nc({error:t,options:e}){const{publicKey:r}=e;if(!r)throw Error("options was missing required publicKey property");if(t.name==="AbortError"){if(e.signal instanceof AbortSignal)return new D({message:"Authentication ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:t})}else{if(t.name==="NotAllowedError")return new D({message:t.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:t});if(t.name==="SecurityError"){const s=window.location.hostname;if(ua(s)){if(r.rpId!==s)return new D({message:`The RP ID "${r.rpId}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:t})}else return new D({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:t})}else if(t.name==="UnknownError")return new D({message:"The authenticator was unable to process the specified options, or could not create a new assertion signature",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:t})}return new D({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:t})}class Sc{createNewAbortSignal(){if(this.controller){const r=new Error("Cancelling existing WebAuthn API call for new one");r.name="AbortError",this.controller.abort(r)}const e=new AbortController;return this.controller=e,e.signal}cancelCeremony(){if(this.controller){const e=new Error("Manually cancelling existing WebAuthn API call");e.name="AbortError",this.controller.abort(e),this.controller=void 0}}}const Ec=new Sc;function kc(t){if(!t)throw new Error("Credential creation options are required");if(typeof PublicKeyCredential<"u"&&"parseCreationOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseCreationOptionsFromJSON=="function")return PublicKeyCredential.parseCreationOptionsFromJSON(t);const{challenge:e,user:r,excludeCredentials:s}=t,n=Ut(t,["challenge","user","excludeCredentials"]),i=Le(e).buffer,o=Object.assign(Object.assign({},r),{id:Le(r.id).buffer}),l=Object.assign(Object.assign({},n),{challenge:i,user:o});if(s&&s.length>0){l.excludeCredentials=new Array(s.length);for(let c=0;c<s.length;c++){const d=s[c];l.excludeCredentials[c]=Object.assign(Object.assign({},d),{id:Le(d.id).buffer,type:d.type||"public-key",transports:d.transports})}}return l}function Ac(t){if(!t)throw new Error("Credential request options are required");if(typeof PublicKeyCredential<"u"&&"parseRequestOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseRequestOptionsFromJSON=="function")return PublicKeyCredential.parseRequestOptionsFromJSON(t);const{challenge:e,allowCredentials:r}=t,s=Ut(t,["challenge","allowCredentials"]),n=Le(e).buffer,i=Object.assign(Object.assign({},s),{challenge:n});if(r&&r.length>0){i.allowCredentials=new Array(r.length);for(let o=0;o<r.length;o++){const l=r[o];i.allowCredentials[o]=Object.assign(Object.assign({},l),{id:Le(l.id).buffer,type:l.type||"public-key",transports:l.transports})}}return i}function Tc(t){var e;if("toJSON"in t&&typeof t.toJSON=="function")return t.toJSON();const r=t;return{id:t.id,rawId:t.id,response:{attestationObject:ge(new Uint8Array(t.response.attestationObject)),clientDataJSON:ge(new Uint8Array(t.response.clientDataJSON))},type:"public-key",clientExtensionResults:t.getClientExtensionResults(),authenticatorAttachment:(e=r.authenticatorAttachment)!==null&&e!==void 0?e:void 0}}function Rc(t){var e;if("toJSON"in t&&typeof t.toJSON=="function")return t.toJSON();const r=t,s=t.getClientExtensionResults(),n=t.response;return{id:t.id,rawId:t.id,response:{authenticatorData:ge(new Uint8Array(n.authenticatorData)),clientDataJSON:ge(new Uint8Array(n.clientDataJSON)),signature:ge(new Uint8Array(n.signature)),userHandle:n.userHandle?ge(new Uint8Array(n.userHandle)):void 0},type:"public-key",clientExtensionResults:s,authenticatorAttachment:(e=r.authenticatorAttachment)!==null&&e!==void 0?e:void 0}}function ua(t){return t==="localhost"||/^([a-z0-9]+(-[a-z0-9]+)*\.)+[a-z]{2,}$/i.test(t)}function ps(){var t,e;return!!(z()&&"PublicKeyCredential"in window&&window.PublicKeyCredential&&"credentials"in navigator&&typeof((t=navigator==null?void 0:navigator.credentials)===null||t===void 0?void 0:t.create)=="function"&&typeof((e=navigator==null?void 0:navigator.credentials)===null||e===void 0?void 0:e.get)=="function")}async function Oc(t){try{const e=await navigator.credentials.create(t);return e?e instanceof PublicKeyCredential?{data:e,error:null}:{data:null,error:new Tt("Browser returned unexpected credential type",e)}:{data:null,error:new Tt("Empty credential response",e)}}catch(e){return{data:null,error:jc({error:e,options:t})}}}async function Cc(t){try{const e=await navigator.credentials.get(t);return e?e instanceof PublicKeyCredential?{data:e,error:null}:{data:null,error:new Tt("Browser returned unexpected credential type",e)}:{data:null,error:new Tt("Empty credential response",e)}}catch(e){return{data:null,error:Nc({error:e,options:t})}}}const Pc={hints:["security-key"],authenticatorSelection:{authenticatorAttachment:"cross-platform",requireResidentKey:!1,userVerification:"preferred",residentKey:"discouraged"},attestation:"direct"},Ic={userVerification:"preferred",hints:["security-key"],attestation:"direct"};function Rt(...t){const e=n=>n!==null&&typeof n=="object"&&!Array.isArray(n),r=n=>n instanceof ArrayBuffer||ArrayBuffer.isView(n),s={};for(const n of t)if(n)for(const i in n){const o=n[i];if(o!==void 0)if(Array.isArray(o))s[i]=o;else if(r(o))s[i]=o;else if(e(o)){const l=s[i];e(l)?s[i]=Rt(l,o):s[i]=Rt(o)}else s[i]=o}return s}function $c(t,e){return Rt(Pc,t,e||{})}function Lc(t,e){return Rt(Ic,t,e||{})}class Dc{constructor(e){this.client=e,this.enroll=this._enroll.bind(this),this.challenge=this._challenge.bind(this),this.verify=this._verify.bind(this),this.authenticate=this._authenticate.bind(this),this.register=this._register.bind(this)}async _enroll(e){return this.client.mfa.enroll(Object.assign(Object.assign({},e),{factorType:"webauthn"}))}async _challenge({factorId:e,webauthn:r,friendlyName:s,signal:n},i){var o;try{const{data:l,error:c}=await this.client.mfa.challenge({factorId:e,webauthn:r});if(!l)return{data:null,error:c};const d=n??Ec.createNewAbortSignal();if(l.webauthn.type==="create"){const{user:u}=l.webauthn.credential_options.publicKey;if(!u.name){const h=s;if(h)u.name=`${u.id}:${h}`;else{const m=(await this.client.getUser()).data.user,g=((o=m==null?void 0:m.user_metadata)===null||o===void 0?void 0:o.name)||(m==null?void 0:m.email)||(m==null?void 0:m.id)||"User";u.name=`${u.id}:${g}`}}u.displayName||(u.displayName=u.name)}switch(l.webauthn.type){case"create":{const u=$c(l.webauthn.credential_options.publicKey,i==null?void 0:i.create),{data:h,error:p}=await Oc({publicKey:u,signal:d});return h?{data:{factorId:e,challengeId:l.id,webauthn:{type:l.webauthn.type,credential_response:h}},error:null}:{data:null,error:p}}case"request":{const u=Lc(l.webauthn.credential_options.publicKey,i==null?void 0:i.request),{data:h,error:p}=await Cc(Object.assign(Object.assign({},l.webauthn.credential_options),{publicKey:u,signal:d}));return h?{data:{factorId:e,challengeId:l.id,webauthn:{type:l.webauthn.type,credential_response:h}},error:null}:{data:null,error:p}}}}catch(l){return S(l)?{data:null,error:l}:{data:null,error:new fe("Unexpected error in challenge",l)}}}async _verify({challengeId:e,factorId:r,webauthn:s}){return this.client.mfa.verify({factorId:r,challengeId:e,webauthn:s})}async _authenticate({factorId:e,webauthn:{rpId:r=typeof window<"u"?window.location.hostname:void 0,rpOrigins:s=typeof window<"u"?[window.location.origin]:void 0,signal:n}={}},i){if(!r)return{data:null,error:new rt("rpId is required for WebAuthn authentication")};try{if(!ps())return{data:null,error:new fe("Browser does not support WebAuthn",null)};const{data:o,error:l}=await this.challenge({factorId:e,webauthn:{rpId:r,rpOrigins:s},signal:n},{request:i});if(!o)return{data:null,error:l};const{webauthn:c}=o;return this._verify({factorId:e,challengeId:o.challengeId,webauthn:{type:c.type,rpId:r,rpOrigins:s,credential_response:c.credential_response}})}catch(o){return S(o)?{data:null,error:o}:{data:null,error:new fe("Unexpected error in authenticate",o)}}}async _register({friendlyName:e,webauthn:{rpId:r=typeof window<"u"?window.location.hostname:void 0,rpOrigins:s=typeof window<"u"?[window.location.origin]:void 0,signal:n}={}},i){if(!r)return{data:null,error:new rt("rpId is required for WebAuthn registration")};try{if(!ps())return{data:null,error:new fe("Browser does not support WebAuthn",null)};const{data:o,error:l}=await this._enroll({friendlyName:e});if(!o)return await this.client.mfa.listFactors().then(u=>{var h;return(h=u.data)===null||h===void 0?void 0:h.all.find(p=>p.factor_type==="webauthn"&&p.friendly_name===e&&p.status!=="unverified")}).then(u=>u?this.client.mfa.unenroll({factorId:u==null?void 0:u.id}):void 0),{data:null,error:l};const{data:c,error:d}=await this._challenge({factorId:o.id,friendlyName:o.friendly_name,webauthn:{rpId:r,rpOrigins:s},signal:n},{create:i});return c?this._verify({factorId:o.id,challengeId:c.challengeId,webauthn:{rpId:r,rpOrigins:s,type:c.webauthn.type,credential_response:c.webauthn.credential_response}}):{data:null,error:d}}catch(o){return S(o)?{data:null,error:o}:{data:null,error:new fe("Unexpected error in register",o)}}}}vc();const Uc={url:Il,storageKey:$l,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:Ll,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1,throwOnError:!1,lockAcquireTimeout:1e4};async function fs(t,e,r){return await r()}const Ae={};class st{get jwks(){var e,r;return(r=(e=Ae[this.storageKey])===null||e===void 0?void 0:e.jwks)!==null&&r!==void 0?r:{keys:[]}}set jwks(e){Ae[this.storageKey]=Object.assign(Object.assign({},Ae[this.storageKey]),{jwks:e})}get jwks_cached_at(){var e,r;return(r=(e=Ae[this.storageKey])===null||e===void 0?void 0:e.cachedAt)!==null&&r!==void 0?r:Number.MIN_SAFE_INTEGER}set jwks_cached_at(e){Ae[this.storageKey]=Object.assign(Object.assign({},Ae[this.storageKey]),{cachedAt:e})}constructor(e){var r,s,n;this.userStorage=null,this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.autoRefreshTickTimeout=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log;const i=Object.assign(Object.assign({},Uc),e);if(this.storageKey=i.storageKey,this.instanceID=(r=st.nextInstanceID[this.storageKey])!==null&&r!==void 0?r:0,st.nextInstanceID[this.storageKey]=this.instanceID+1,this.logDebugMessages=!!i.debug,typeof i.debug=="function"&&(this.logger=i.debug),this.instanceID>0&&z()){const o=`${this._logPrefix()} Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.`;console.warn(o),this.logDebugMessages&&console.trace(o)}if(this.persistSession=i.persistSession,this.autoRefreshToken=i.autoRefreshToken,this.admin=new gc({url:i.url,headers:i.headers,fetch:i.fetch}),this.url=i.url,this.headers=i.headers,this.fetch=la(i.fetch),this.lock=i.lock||fs,this.detectSessionInUrl=i.detectSessionInUrl,this.flowType=i.flowType,this.hasCustomAuthorizationHeader=i.hasCustomAuthorizationHeader,this.throwOnError=i.throwOnError,this.lockAcquireTimeout=i.lockAcquireTimeout,i.lock?this.lock=i.lock:this.persistSession&&z()&&(!((s=globalThis==null?void 0:globalThis.navigator)===null||s===void 0)&&s.locks)?this.lock=bc:this.lock=fs,this.jwks||(this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER),this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this),webauthn:new Dc(this)},this.oauth={getAuthorizationDetails:this._getAuthorizationDetails.bind(this),approveAuthorization:this._approveAuthorization.bind(this),denyAuthorization:this._denyAuthorization.bind(this),listGrants:this._listOAuthGrants.bind(this),revokeGrant:this._revokeOAuthGrant.bind(this)},this.persistSession?(i.storage?this.storage=i.storage:oa()?this.storage=globalThis.localStorage:(this.memoryStorage={},this.storage=ms(this.memoryStorage)),i.userStorage&&(this.userStorage=i.userStorage)):(this.memoryStorage={},this.storage=ms(this.memoryStorage)),z()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(o){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",o)}(n=this.broadcastChannel)===null||n===void 0||n.addEventListener("message",async o=>{this._debug("received broadcast notification from other tab or client",o);try{await this._notifyAllSubscribers(o.data.event,o.data.session,!1)}catch(l){this._debug("#broadcastChannel","error",l)}})}this.initialize().catch(o=>{this._debug("#initialize()","error",o)})}isThrowOnErrorEnabled(){return this.throwOnError}_returnResult(e){if(this.throwOnError&&e&&e.error)throw e.error;return e}_logPrefix(){return`GoTrueClient@${this.storageKey}:${this.instanceID} (${aa}) ${new Date().toISOString()}`}_debug(...e){return this.logDebugMessages&&this.logger(this._logPrefix(),...e),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(this.lockAcquireTimeout,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){var e;try{let r={},s="none";if(z()&&(r=Yl(window.location.href),this._isImplicitGrantCallback(r)?s="implicit":await this._isPKCECallback(r)&&(s="pkce")),z()&&this.detectSessionInUrl&&s!=="none"){const{data:n,error:i}=await this._getSessionFromURL(r,s);if(i){if(this._debug("#_initialize()","error detecting session from URL",i),zl(i)){const c=(e=i.details)===null||e===void 0?void 0:e.code;if(c==="identity_already_exists"||c==="identity_not_found"||c==="single_identity_not_deletable")return{error:i}}return{error:i}}const{session:o,redirectType:l}=n;return this._debug("#_initialize()","detected session in URL",o,"redirect type",l),await this._saveSession(o),setTimeout(async()=>{l==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",o):await this._notifyAllSubscribers("SIGNED_IN",o)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(r){return S(r)?this._returnResult({error:r}):this._returnResult({error:new fe("Unexpected error during initialization",r)})}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(e){var r,s,n;try{const i=await A(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(s=(r=e==null?void 0:e.options)===null||r===void 0?void 0:r.data)!==null&&s!==void 0?s:{},gotrue_meta_security:{captcha_token:(n=e==null?void 0:e.options)===null||n===void 0?void 0:n.captchaToken}},xform:G}),{data:o,error:l}=i;if(l||!o)return this._returnResult({data:{user:null,session:null},error:l});const c=o.session,d=o.user;return o.session&&(await this._saveSession(o.session),await this._notifyAllSubscribers("SIGNED_IN",c)),this._returnResult({data:{user:d,session:c},error:null})}catch(i){if(S(i))return this._returnResult({data:{user:null,session:null},error:i});throw i}}async signUp(e){var r,s,n;try{let i;if("email"in e){const{email:u,password:h,options:p}=e;let m=null,g=null;this.flowType==="pkce"&&([m,g]=await Se(this.storage,this.storageKey)),i=await A(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:p==null?void 0:p.emailRedirectTo,body:{email:u,password:h,data:(r=p==null?void 0:p.data)!==null&&r!==void 0?r:{},gotrue_meta_security:{captcha_token:p==null?void 0:p.captchaToken},code_challenge:m,code_challenge_method:g},xform:G})}else if("phone"in e){const{phone:u,password:h,options:p}=e;i=await A(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:u,password:h,data:(s=p==null?void 0:p.data)!==null&&s!==void 0?s:{},channel:(n=p==null?void 0:p.channel)!==null&&n!==void 0?n:"sms",gotrue_meta_security:{captcha_token:p==null?void 0:p.captchaToken}},xform:G})}else throw new xt("You must provide either an email or phone number and a password");const{data:o,error:l}=i;if(l||!o)return await M(this.storage,`${this.storageKey}-code-verifier`),this._returnResult({data:{user:null,session:null},error:l});const c=o.session,d=o.user;return o.session&&(await this._saveSession(o.session),await this._notifyAllSubscribers("SIGNED_IN",c)),this._returnResult({data:{user:d,session:c},error:null})}catch(i){if(await M(this.storage,`${this.storageKey}-code-verifier`),S(i))return this._returnResult({data:{user:null,session:null},error:i});throw i}}async signInWithPassword(e){try{let r;if("email"in e){const{email:i,password:o,options:l}=e;r=await A(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:i,password:o,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken}},xform:us})}else if("phone"in e){const{phone:i,password:o,options:l}=e;r=await A(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:i,password:o,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken}},xform:us})}else throw new xt("You must provide either an email or phone number and a password");const{data:s,error:n}=r;if(n)return this._returnResult({data:{user:null,session:null},error:n});if(!s||!s.session||!s.user){const i=new Ne;return this._returnResult({data:{user:null,session:null},error:i})}return s.session&&(await this._saveSession(s.session),await this._notifyAllSubscribers("SIGNED_IN",s.session)),this._returnResult({data:Object.assign({user:s.user,session:s.session},s.weak_password?{weakPassword:s.weak_password}:null),error:n})}catch(r){if(S(r))return this._returnResult({data:{user:null,session:null},error:r});throw r}}async signInWithOAuth(e){var r,s,n,i;return await this._handleProviderSignIn(e.provider,{redirectTo:(r=e.options)===null||r===void 0?void 0:r.redirectTo,scopes:(s=e.options)===null||s===void 0?void 0:s.scopes,queryParams:(n=e.options)===null||n===void 0?void 0:n.queryParams,skipBrowserRedirect:(i=e.options)===null||i===void 0?void 0:i.skipBrowserRedirect})}async exchangeCodeForSession(e){return await this.initializePromise,this._acquireLock(this.lockAcquireTimeout,async()=>this._exchangeCodeForSession(e))}async signInWithWeb3(e){const{chain:r}=e;switch(r){case"ethereum":return await this.signInWithEthereum(e);case"solana":return await this.signInWithSolana(e);default:throw new Error(`@supabase/auth-js: Unsupported chain "${r}"`)}}async signInWithEthereum(e){var r,s,n,i,o,l,c,d,u,h,p;let m,g;if("message"in e)m=e.message,g=e.signature;else{const{chain:b,wallet:v,statement:x,options:w}=e;let y;if(z())if(typeof v=="object")y=v;else{const R=window;if("ethereum"in R&&typeof R.ethereum=="object"&&"request"in R.ethereum&&typeof R.ethereum.request=="function")y=R.ethereum;else throw new Error("@supabase/auth-js: No compatible Ethereum wallet interface on the window object (window.ethereum) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'ethereum', wallet: resolvedUserWallet }) instead.")}else{if(typeof v!="object"||!(w!=null&&w.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");y=v}const N=new URL((r=w==null?void 0:w.url)!==null&&r!==void 0?r:window.location.href),_=await y.request({method:"eth_requestAccounts"}).then(R=>R).catch(()=>{throw new Error("@supabase/auth-js: Wallet method eth_requestAccounts is missing or invalid")});if(!_||_.length===0)throw new Error("@supabase/auth-js: No accounts available. Please ensure the wallet is connected.");const j=da(_[0]);let E=(s=w==null?void 0:w.signInWithEthereum)===null||s===void 0?void 0:s.chainId;if(!E){const R=await y.request({method:"eth_chainId"});E=yc(R)}const k={domain:N.host,address:j,statement:x,uri:N.href,version:"1",chainId:E,nonce:(n=w==null?void 0:w.signInWithEthereum)===null||n===void 0?void 0:n.nonce,issuedAt:(o=(i=w==null?void 0:w.signInWithEthereum)===null||i===void 0?void 0:i.issuedAt)!==null&&o!==void 0?o:new Date,expirationTime:(l=w==null?void 0:w.signInWithEthereum)===null||l===void 0?void 0:l.expirationTime,notBefore:(c=w==null?void 0:w.signInWithEthereum)===null||c===void 0?void 0:c.notBefore,requestId:(d=w==null?void 0:w.signInWithEthereum)===null||d===void 0?void 0:d.requestId,resources:(u=w==null?void 0:w.signInWithEthereum)===null||u===void 0?void 0:u.resources};m=_c(k),g=await y.request({method:"personal_sign",params:[wc(m),j]})}try{const{data:b,error:v}=await A(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"ethereum",message:m,signature:g},!((h=e.options)===null||h===void 0)&&h.captchaToken?{gotrue_meta_security:{captcha_token:(p=e.options)===null||p===void 0?void 0:p.captchaToken}}:null),xform:G});if(v)throw v;if(!b||!b.session||!b.user){const x=new Ne;return this._returnResult({data:{user:null,session:null},error:x})}return b.session&&(await this._saveSession(b.session),await this._notifyAllSubscribers("SIGNED_IN",b.session)),this._returnResult({data:Object.assign({},b),error:v})}catch(b){if(S(b))return this._returnResult({data:{user:null,session:null},error:b});throw b}}async signInWithSolana(e){var r,s,n,i,o,l,c,d,u,h,p,m;let g,b;if("message"in e)g=e.message,b=e.signature;else{const{chain:v,wallet:x,statement:w,options:y}=e;let N;if(z())if(typeof x=="object")N=x;else{const j=window;if("solana"in j&&typeof j.solana=="object"&&("signIn"in j.solana&&typeof j.solana.signIn=="function"||"signMessage"in j.solana&&typeof j.solana.signMessage=="function"))N=j.solana;else throw new Error("@supabase/auth-js: No compatible Solana wallet interface on the window object (window.solana) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'solana', wallet: resolvedUserWallet }) instead.")}else{if(typeof x!="object"||!(y!=null&&y.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");N=x}const _=new URL((r=y==null?void 0:y.url)!==null&&r!==void 0?r:window.location.href);if("signIn"in N&&N.signIn){const j=await N.signIn(Object.assign(Object.assign(Object.assign({issuedAt:new Date().toISOString()},y==null?void 0:y.signInWithSolana),{version:"1",domain:_.host,uri:_.href}),w?{statement:w}:null));let E;if(Array.isArray(j)&&j[0]&&typeof j[0]=="object")E=j[0];else if(j&&typeof j=="object"&&"signedMessage"in j&&"signature"in j)E=j;else throw new Error("@supabase/auth-js: Wallet method signIn() returned unrecognized value");if("signedMessage"in E&&"signature"in E&&(typeof E.signedMessage=="string"||E.signedMessage instanceof Uint8Array)&&E.signature instanceof Uint8Array)g=typeof E.signedMessage=="string"?E.signedMessage:new TextDecoder().decode(E.signedMessage),b=E.signature;else throw new Error("@supabase/auth-js: Wallet method signIn() API returned object without signedMessage and signature fields")}else{if(!("signMessage"in N)||typeof N.signMessage!="function"||!("publicKey"in N)||typeof N!="object"||!N.publicKey||!("toBase58"in N.publicKey)||typeof N.publicKey.toBase58!="function")throw new Error("@supabase/auth-js: Wallet does not have a compatible signMessage() and publicKey.toBase58() API");g=[`${_.host} wants you to sign in with your Solana account:`,N.publicKey.toBase58(),...w?["",w,""]:[""],"Version: 1",`URI: ${_.href}`,`Issued At: ${(n=(s=y==null?void 0:y.signInWithSolana)===null||s===void 0?void 0:s.issuedAt)!==null&&n!==void 0?n:new Date().toISOString()}`,...!((i=y==null?void 0:y.signInWithSolana)===null||i===void 0)&&i.notBefore?[`Not Before: ${y.signInWithSolana.notBefore}`]:[],...!((o=y==null?void 0:y.signInWithSolana)===null||o===void 0)&&o.expirationTime?[`Expiration Time: ${y.signInWithSolana.expirationTime}`]:[],...!((l=y==null?void 0:y.signInWithSolana)===null||l===void 0)&&l.chainId?[`Chain ID: ${y.signInWithSolana.chainId}`]:[],...!((c=y==null?void 0:y.signInWithSolana)===null||c===void 0)&&c.nonce?[`Nonce: ${y.signInWithSolana.nonce}`]:[],...!((d=y==null?void 0:y.signInWithSolana)===null||d===void 0)&&d.requestId?[`Request ID: ${y.signInWithSolana.requestId}`]:[],...!((h=(u=y==null?void 0:y.signInWithSolana)===null||u===void 0?void 0:u.resources)===null||h===void 0)&&h.length?["Resources",...y.signInWithSolana.resources.map(E=>`- ${E}`)]:[]].join(`
`);const j=await N.signMessage(new TextEncoder().encode(g),"utf8");if(!j||!(j instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet signMessage() API returned an recognized value");b=j}}try{const{data:v,error:x}=await A(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"solana",message:g,signature:ge(b)},!((p=e.options)===null||p===void 0)&&p.captchaToken?{gotrue_meta_security:{captcha_token:(m=e.options)===null||m===void 0?void 0:m.captchaToken}}:null),xform:G});if(x)throw x;if(!v||!v.session||!v.user){const w=new Ne;return this._returnResult({data:{user:null,session:null},error:w})}return v.session&&(await this._saveSession(v.session),await this._notifyAllSubscribers("SIGNED_IN",v.session)),this._returnResult({data:Object.assign({},v),error:x})}catch(v){if(S(v))return this._returnResult({data:{user:null,session:null},error:v});throw v}}async _exchangeCodeForSession(e){const r=await he(this.storage,`${this.storageKey}-code-verifier`),[s,n]=(r??"").split("/");try{if(!s&&this.flowType==="pkce")throw new Bl;const{data:i,error:o}=await A(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:e,code_verifier:s},xform:G});if(await M(this.storage,`${this.storageKey}-code-verifier`),o)throw o;if(!i||!i.session||!i.user){const l=new Ne;return this._returnResult({data:{user:null,session:null,redirectType:null},error:l})}return i.session&&(await this._saveSession(i.session),await this._notifyAllSubscribers("SIGNED_IN",i.session)),this._returnResult({data:Object.assign(Object.assign({},i),{redirectType:n??null}),error:o})}catch(i){if(await M(this.storage,`${this.storageKey}-code-verifier`),S(i))return this._returnResult({data:{user:null,session:null,redirectType:null},error:i});throw i}}async signInWithIdToken(e){try{const{options:r,provider:s,token:n,access_token:i,nonce:o}=e,l=await A(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:s,id_token:n,access_token:i,nonce:o,gotrue_meta_security:{captcha_token:r==null?void 0:r.captchaToken}},xform:G}),{data:c,error:d}=l;if(d)return this._returnResult({data:{user:null,session:null},error:d});if(!c||!c.session||!c.user){const u=new Ne;return this._returnResult({data:{user:null,session:null},error:u})}return c.session&&(await this._saveSession(c.session),await this._notifyAllSubscribers("SIGNED_IN",c.session)),this._returnResult({data:c,error:d})}catch(r){if(S(r))return this._returnResult({data:{user:null,session:null},error:r});throw r}}async signInWithOtp(e){var r,s,n,i,o;try{if("email"in e){const{email:l,options:c}=e;let d=null,u=null;this.flowType==="pkce"&&([d,u]=await Se(this.storage,this.storageKey));const{error:h}=await A(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:l,data:(r=c==null?void 0:c.data)!==null&&r!==void 0?r:{},create_user:(s=c==null?void 0:c.shouldCreateUser)!==null&&s!==void 0?s:!0,gotrue_meta_security:{captcha_token:c==null?void 0:c.captchaToken},code_challenge:d,code_challenge_method:u},redirectTo:c==null?void 0:c.emailRedirectTo});return this._returnResult({data:{user:null,session:null},error:h})}if("phone"in e){const{phone:l,options:c}=e,{data:d,error:u}=await A(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:l,data:(n=c==null?void 0:c.data)!==null&&n!==void 0?n:{},create_user:(i=c==null?void 0:c.shouldCreateUser)!==null&&i!==void 0?i:!0,gotrue_meta_security:{captcha_token:c==null?void 0:c.captchaToken},channel:(o=c==null?void 0:c.channel)!==null&&o!==void 0?o:"sms"}});return this._returnResult({data:{user:null,session:null,messageId:d==null?void 0:d.message_id},error:u})}throw new xt("You must provide either an email or phone number.")}catch(l){if(await M(this.storage,`${this.storageKey}-code-verifier`),S(l))return this._returnResult({data:{user:null,session:null},error:l});throw l}}async verifyOtp(e){var r,s;try{let n,i;"options"in e&&(n=(r=e.options)===null||r===void 0?void 0:r.redirectTo,i=(s=e.options)===null||s===void 0?void 0:s.captchaToken);const{data:o,error:l}=await A(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},e),{gotrue_meta_security:{captcha_token:i}}),redirectTo:n,xform:G});if(l)throw l;if(!o)throw new Error("An error occurred on token verification.");const c=o.session,d=o.user;return c!=null&&c.access_token&&(await this._saveSession(c),await this._notifyAllSubscribers(e.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",c)),this._returnResult({data:{user:d,session:c},error:null})}catch(n){if(S(n))return this._returnResult({data:{user:null,session:null},error:n});throw n}}async signInWithSSO(e){var r,s,n,i,o;try{let l=null,c=null;this.flowType==="pkce"&&([l,c]=await Se(this.storage,this.storageKey));const d=await A(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in e?{provider_id:e.providerId}:null),"domain"in e?{domain:e.domain}:null),{redirect_to:(s=(r=e.options)===null||r===void 0?void 0:r.redirectTo)!==null&&s!==void 0?s:void 0}),!((n=e==null?void 0:e.options)===null||n===void 0)&&n.captchaToken?{gotrue_meta_security:{captcha_token:e.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:l,code_challenge_method:c}),headers:this.headers,xform:mc});return!((i=d.data)===null||i===void 0)&&i.url&&z()&&!(!((o=e.options)===null||o===void 0)&&o.skipBrowserRedirect)&&window.location.assign(d.data.url),this._returnResult(d)}catch(l){if(await M(this.storage,`${this.storageKey}-code-verifier`),S(l))return this._returnResult({data:null,error:l});throw l}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async e=>{const{data:{session:r},error:s}=e;if(s)throw s;if(!r)throw new H;const{error:n}=await A(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:r.access_token});return this._returnResult({data:{user:null,session:null},error:n})})}catch(e){if(S(e))return this._returnResult({data:{user:null,session:null},error:e});throw e}}async resend(e){try{const r=`${this.url}/resend`;if("email"in e){const{email:s,type:n,options:i}=e,{error:o}=await A(this.fetch,"POST",r,{headers:this.headers,body:{email:s,type:n,gotrue_meta_security:{captcha_token:i==null?void 0:i.captchaToken}},redirectTo:i==null?void 0:i.emailRedirectTo});return this._returnResult({data:{user:null,session:null},error:o})}else if("phone"in e){const{phone:s,type:n,options:i}=e,{data:o,error:l}=await A(this.fetch,"POST",r,{headers:this.headers,body:{phone:s,type:n,gotrue_meta_security:{captcha_token:i==null?void 0:i.captchaToken}}});return this._returnResult({data:{user:null,session:null,messageId:o==null?void 0:o.message_id},error:l})}throw new xt("You must provide either an email or phone number and a type")}catch(r){if(S(r))return this._returnResult({data:{user:null,session:null},error:r});throw r}}async getSession(){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>this._useSession(async r=>r))}async _acquireLock(e,r){this._debug("#_acquireLock","begin",e);try{if(this.lockAcquired){const s=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),n=(async()=>(await s,await r()))();return this.pendingInLock.push((async()=>{try{await n}catch{}})()),n}return await this.lock(`lock:${this.storageKey}`,e,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const s=r();for(this.pendingInLock.push((async()=>{try{await s}catch{}})()),await s;this.pendingInLock.length;){const n=[...this.pendingInLock];await Promise.all(n),this.pendingInLock.splice(0,n.length)}return await s}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(e){this._debug("#_useSession","begin");try{const r=await this.__loadSession();return await e(r)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let e=null;const r=await he(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",r),r!==null&&(this._isValidSession(r)?e=r:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!e)return{data:{session:null},error:null};const s=e.expires_at?e.expires_at*1e3-Date.now()<Yt:!1;if(this._debug("#__loadSession()",`session has${s?"":" not"} expired`,"expires_at",e.expires_at),!s){if(this.userStorage){const o=await he(this.userStorage,this.storageKey+"-user");o!=null&&o.user?e.user=o.user:e.user=Zt()}if(this.storage.isServer&&e.user&&!e.user.__isUserNotAvailableProxy){const o={value:this.suppressGetSessionWarning};e.user=cc(e.user,o),o.value&&(this.suppressGetSessionWarning=!0)}return{data:{session:e},error:null}}const{data:n,error:i}=await this._callRefreshToken(e.refresh_token);return i?this._returnResult({data:{session:null},error:i}):this._returnResult({data:{session:n},error:null})}finally{this._debug("#__loadSession()","end")}}async getUser(e){if(e)return await this._getUser(e);await this.initializePromise;const r=await this._acquireLock(this.lockAcquireTimeout,async()=>await this._getUser());return r.data.user&&(this.suppressGetSessionWarning=!0),r}async _getUser(e){try{return e?await A(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:e,xform:ce}):await this._useSession(async r=>{var s,n,i;const{data:o,error:l}=r;if(l)throw l;return!(!((s=o.session)===null||s===void 0)&&s.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new H}:await A(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(i=(n=o.session)===null||n===void 0?void 0:n.access_token)!==null&&i!==void 0?i:void 0,xform:ce})})}catch(r){if(S(r))return Qt(r)&&(await this._removeSession(),await M(this.storage,`${this.storageKey}-code-verifier`)),this._returnResult({data:{user:null},error:r});throw r}}async updateUser(e,r={}){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>await this._updateUser(e,r))}async _updateUser(e,r={}){try{return await this._useSession(async s=>{const{data:n,error:i}=s;if(i)throw i;if(!n.session)throw new H;const o=n.session;let l=null,c=null;this.flowType==="pkce"&&e.email!=null&&([l,c]=await Se(this.storage,this.storageKey));const{data:d,error:u}=await A(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:r==null?void 0:r.emailRedirectTo,body:Object.assign(Object.assign({},e),{code_challenge:l,code_challenge_method:c}),jwt:o.access_token,xform:ce});if(u)throw u;return o.user=d.user,await this._saveSession(o),await this._notifyAllSubscribers("USER_UPDATED",o),this._returnResult({data:{user:o.user},error:null})})}catch(s){if(await M(this.storage,`${this.storageKey}-code-verifier`),S(s))return this._returnResult({data:{user:null},error:s});throw s}}async setSession(e){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>await this._setSession(e))}async _setSession(e){try{if(!e.access_token||!e.refresh_token)throw new H;const r=Date.now()/1e3;let s=r,n=!0,i=null;const{payload:o}=vt(e.access_token);if(o.exp&&(s=o.exp,n=s<=r),n){const{data:l,error:c}=await this._callRefreshToken(e.refresh_token);if(c)return this._returnResult({data:{user:null,session:null},error:c});if(!l)return{data:{user:null,session:null},error:null};i=l}else{const{data:l,error:c}=await this._getUser(e.access_token);if(c)return this._returnResult({data:{user:null,session:null},error:c});i={access_token:e.access_token,refresh_token:e.refresh_token,user:l.user,token_type:"bearer",expires_in:s-r,expires_at:s},await this._saveSession(i),await this._notifyAllSubscribers("SIGNED_IN",i)}return this._returnResult({data:{user:i.user,session:i},error:null})}catch(r){if(S(r))return this._returnResult({data:{session:null,user:null},error:r});throw r}}async refreshSession(e){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>await this._refreshSession(e))}async _refreshSession(e){try{return await this._useSession(async r=>{var s;if(!e){const{data:o,error:l}=r;if(l)throw l;e=(s=o.session)!==null&&s!==void 0?s:void 0}if(!(e!=null&&e.refresh_token))throw new H;const{data:n,error:i}=await this._callRefreshToken(e.refresh_token);return i?this._returnResult({data:{user:null,session:null},error:i}):n?this._returnResult({data:{user:n.user,session:n},error:null}):this._returnResult({data:{user:null,session:null},error:null})})}catch(r){if(S(r))return this._returnResult({data:{user:null,session:null},error:r});throw r}}async _getSessionFromURL(e,r){try{if(!z())throw new bt("No browser detected.");if(e.error||e.error_description||e.error_code)throw new bt(e.error_description||"Error in URL with unspecified error_description",{error:e.error||"unspecified_error",code:e.error_code||"unspecified_code"});switch(r){case"implicit":if(this.flowType==="pkce")throw new as("Not a valid PKCE flow url.");break;case"pkce":if(this.flowType==="implicit")throw new bt("Not a valid implicit grant flow url.");break;default:}if(r==="pkce"){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!e.code)throw new as("No code detected.");const{data:w,error:y}=await this._exchangeCodeForSession(e.code);if(y)throw y;const N=new URL(window.location.href);return N.searchParams.delete("code"),window.history.replaceState(window.history.state,"",N.toString()),{data:{session:w.session,redirectType:null},error:null}}const{provider_token:s,provider_refresh_token:n,access_token:i,refresh_token:o,expires_in:l,expires_at:c,token_type:d}=e;if(!i||!l||!o||!d)throw new bt("No session defined in URL");const u=Math.round(Date.now()/1e3),h=parseInt(l);let p=u+h;c&&(p=parseInt(c));const m=p-u;m*1e3<=Re&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${m}s, should have been closer to ${h}s`);const g=p-h;u-g>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",g,p,u):u-g<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",g,p,u);const{data:b,error:v}=await this._getUser(i);if(v)throw v;const x={provider_token:s,provider_refresh_token:n,access_token:i,expires_in:h,expires_at:p,refresh_token:o,token_type:d,user:b.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),this._returnResult({data:{session:x,redirectType:e.type},error:null})}catch(s){if(S(s))return this._returnResult({data:{session:null,redirectType:null},error:s});throw s}}_isImplicitGrantCallback(e){return typeof this.detectSessionInUrl=="function"?this.detectSessionInUrl(new URL(window.location.href),e):!!(e.access_token||e.error_description)}async _isPKCECallback(e){const r=await he(this.storage,`${this.storageKey}-code-verifier`);return!!(e.code&&r)}async signOut(e={scope:"global"}){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>await this._signOut(e))}async _signOut({scope:e}={scope:"global"}){return await this._useSession(async r=>{var s;const{data:n,error:i}=r;if(i&&!Qt(i))return this._returnResult({error:i});const o=(s=n.session)===null||s===void 0?void 0:s.access_token;if(o){const{error:l}=await this.admin.signOut(o,e);if(l&&!(Ml(l)&&(l.status===404||l.status===401||l.status===403)||Qt(l)))return this._returnResult({error:l})}return e!=="others"&&(await this._removeSession(),await M(this.storage,`${this.storageKey}-code-verifier`)),this._returnResult({error:null})})}onAuthStateChange(e){const r=Jl(),s={id:r,callback:e,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",r),this.stateChangeEmitters.delete(r)}};return this._debug("#onAuthStateChange()","registered callback with id",r),this.stateChangeEmitters.set(r,s),(async()=>(await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>{this._emitInitialSession(r)})))(),{data:{subscription:s}}}async _emitInitialSession(e){return await this._useSession(async r=>{var s,n;try{const{data:{session:i},error:o}=r;if(o)throw o;await((s=this.stateChangeEmitters.get(e))===null||s===void 0?void 0:s.callback("INITIAL_SESSION",i)),this._debug("INITIAL_SESSION","callback id",e,"session",i)}catch(i){await((n=this.stateChangeEmitters.get(e))===null||n===void 0?void 0:n.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",e,"error",i),console.error(i)}})}async resetPasswordForEmail(e,r={}){let s=null,n=null;this.flowType==="pkce"&&([s,n]=await Se(this.storage,this.storageKey,!0));try{return await A(this.fetch,"POST",`${this.url}/recover`,{body:{email:e,code_challenge:s,code_challenge_method:n,gotrue_meta_security:{captcha_token:r.captchaToken}},headers:this.headers,redirectTo:r.redirectTo})}catch(i){if(await M(this.storage,`${this.storageKey}-code-verifier`),S(i))return this._returnResult({data:null,error:i});throw i}}async getUserIdentities(){var e;try{const{data:r,error:s}=await this.getUser();if(s)throw s;return this._returnResult({data:{identities:(e=r.user.identities)!==null&&e!==void 0?e:[]},error:null})}catch(r){if(S(r))return this._returnResult({data:null,error:r});throw r}}async linkIdentity(e){return"token"in e?this.linkIdentityIdToken(e):this.linkIdentityOAuth(e)}async linkIdentityOAuth(e){var r;try{const{data:s,error:n}=await this._useSession(async i=>{var o,l,c,d,u;const{data:h,error:p}=i;if(p)throw p;const m=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,e.provider,{redirectTo:(o=e.options)===null||o===void 0?void 0:o.redirectTo,scopes:(l=e.options)===null||l===void 0?void 0:l.scopes,queryParams:(c=e.options)===null||c===void 0?void 0:c.queryParams,skipBrowserRedirect:!0});return await A(this.fetch,"GET",m,{headers:this.headers,jwt:(u=(d=h.session)===null||d===void 0?void 0:d.access_token)!==null&&u!==void 0?u:void 0})});if(n)throw n;return z()&&!(!((r=e.options)===null||r===void 0)&&r.skipBrowserRedirect)&&window.location.assign(s==null?void 0:s.url),this._returnResult({data:{provider:e.provider,url:s==null?void 0:s.url},error:null})}catch(s){if(S(s))return this._returnResult({data:{provider:e.provider,url:null},error:s});throw s}}async linkIdentityIdToken(e){return await this._useSession(async r=>{var s;try{const{error:n,data:{session:i}}=r;if(n)throw n;const{options:o,provider:l,token:c,access_token:d,nonce:u}=e,h=await A(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,jwt:(s=i==null?void 0:i.access_token)!==null&&s!==void 0?s:void 0,body:{provider:l,id_token:c,access_token:d,nonce:u,link_identity:!0,gotrue_meta_security:{captcha_token:o==null?void 0:o.captchaToken}},xform:G}),{data:p,error:m}=h;return m?this._returnResult({data:{user:null,session:null},error:m}):!p||!p.session||!p.user?this._returnResult({data:{user:null,session:null},error:new Ne}):(p.session&&(await this._saveSession(p.session),await this._notifyAllSubscribers("USER_UPDATED",p.session)),this._returnResult({data:p,error:m}))}catch(n){if(await M(this.storage,`${this.storageKey}-code-verifier`),S(n))return this._returnResult({data:{user:null,session:null},error:n});throw n}})}async unlinkIdentity(e){try{return await this._useSession(async r=>{var s,n;const{data:i,error:o}=r;if(o)throw o;return await A(this.fetch,"DELETE",`${this.url}/user/identities/${e.identity_id}`,{headers:this.headers,jwt:(n=(s=i.session)===null||s===void 0?void 0:s.access_token)!==null&&n!==void 0?n:void 0})})}catch(r){if(S(r))return this._returnResult({data:null,error:r});throw r}}async _refreshAccessToken(e){const r=`#_refreshAccessToken(${e.substring(0,5)}...)`;this._debug(r,"begin");try{const s=Date.now();return await Zl(async n=>(n>0&&await Xl(200*Math.pow(2,n-1)),this._debug(r,"refreshing attempt",n),await A(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:e},headers:this.headers,xform:G})),(n,i)=>{const o=200*Math.pow(2,n);return i&&Xt(i)&&Date.now()+o-s<Re})}catch(s){if(this._debug(r,"error",s),S(s))return this._returnResult({data:{session:null,user:null},error:s});throw s}finally{this._debug(r,"end")}}_isValidSession(e){return typeof e=="object"&&e!==null&&"access_token"in e&&"refresh_token"in e&&"expires_at"in e}async _handleProviderSignIn(e,r){const s=await this._getUrlForProvider(`${this.url}/authorize`,e,{redirectTo:r.redirectTo,scopes:r.scopes,queryParams:r.queryParams});return this._debug("#_handleProviderSignIn()","provider",e,"options",r,"url",s),z()&&!r.skipBrowserRedirect&&window.location.assign(s),{data:{provider:e,url:s},error:null}}async _recoverAndRefresh(){var e,r;const s="#_recoverAndRefresh()";this._debug(s,"begin");try{const n=await he(this.storage,this.storageKey);if(n&&this.userStorage){let o=await he(this.userStorage,this.storageKey+"-user");!this.storage.isServer&&Object.is(this.storage,this.userStorage)&&!o&&(o={user:n.user},await Oe(this.userStorage,this.storageKey+"-user",o)),n.user=(e=o==null?void 0:o.user)!==null&&e!==void 0?e:Zt()}else if(n&&!n.user&&!n.user){const o=await he(this.storage,this.storageKey+"-user");o&&(o!=null&&o.user)?(n.user=o.user,await M(this.storage,this.storageKey+"-user"),await Oe(this.storage,this.storageKey,n)):n.user=Zt()}if(this._debug(s,"session from storage",n),!this._isValidSession(n)){this._debug(s,"session is not valid"),n!==null&&await this._removeSession();return}const i=((r=n.expires_at)!==null&&r!==void 0?r:1/0)*1e3-Date.now()<Yt;if(this._debug(s,`session has${i?"":" not"} expired with margin of ${Yt}s`),i){if(this.autoRefreshToken&&n.refresh_token){const{error:o}=await this._callRefreshToken(n.refresh_token);o&&(console.error(o),Xt(o)||(this._debug(s,"refresh failed with a non-retryable error, removing the session",o),await this._removeSession()))}}else if(n.user&&n.user.__isUserNotAvailableProxy===!0)try{const{data:o,error:l}=await this._getUser(n.access_token);!l&&(o!=null&&o.user)?(n.user=o.user,await this._saveSession(n),await this._notifyAllSubscribers("SIGNED_IN",n)):this._debug(s,"could not get user data, skipping SIGNED_IN notification")}catch(o){console.error("Error getting user data:",o),this._debug(s,"error getting user data, skipping SIGNED_IN notification",o)}else await this._notifyAllSubscribers("SIGNED_IN",n)}catch(n){this._debug(s,"error",n),console.error(n);return}finally{this._debug(s,"end")}}async _callRefreshToken(e){var r,s;if(!e)throw new H;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const n=`#_callRefreshToken(${e.substring(0,5)}...)`;this._debug(n,"begin");try{this.refreshingDeferred=new zt;const{data:i,error:o}=await this._refreshAccessToken(e);if(o)throw o;if(!i.session)throw new H;await this._saveSession(i.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",i.session);const l={data:i.session,error:null};return this.refreshingDeferred.resolve(l),l}catch(i){if(this._debug(n,"error",i),S(i)){const o={data:null,error:i};return Xt(i)||await this._removeSession(),(r=this.refreshingDeferred)===null||r===void 0||r.resolve(o),o}throw(s=this.refreshingDeferred)===null||s===void 0||s.reject(i),i}finally{this.refreshingDeferred=null,this._debug(n,"end")}}async _notifyAllSubscribers(e,r,s=!0){const n=`#_notifyAllSubscribers(${e})`;this._debug(n,"begin",r,`broadcast = ${s}`);try{this.broadcastChannel&&s&&this.broadcastChannel.postMessage({event:e,session:r});const i=[],o=Array.from(this.stateChangeEmitters.values()).map(async l=>{try{await l.callback(e,r)}catch(c){i.push(c)}});if(await Promise.all(o),i.length>0){for(let l=0;l<i.length;l+=1)console.error(i[l]);throw i[0]}}finally{this._debug(n,"end")}}async _saveSession(e){this._debug("#_saveSession()",e),this.suppressGetSessionWarning=!0,await M(this.storage,`${this.storageKey}-code-verifier`);const r=Object.assign({},e),s=r.user&&r.user.__isUserNotAvailableProxy===!0;if(this.userStorage){!s&&r.user&&await Oe(this.userStorage,this.storageKey+"-user",{user:r.user});const n=Object.assign({},r);delete n.user;const i=cs(n);await Oe(this.storage,this.storageKey,i)}else{const n=cs(r);await Oe(this.storage,this.storageKey,n)}}async _removeSession(){this._debug("#_removeSession()"),this.suppressGetSessionWarning=!1,await M(this.storage,this.storageKey),await M(this.storage,this.storageKey+"-code-verifier"),await M(this.storage,this.storageKey+"-user"),this.userStorage&&await M(this.userStorage,this.storageKey+"-user"),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const e=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{e&&z()&&(window!=null&&window.removeEventListener)&&window.removeEventListener("visibilitychange",e)}catch(r){console.error("removing visibilitychange callback failed",r)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const e=setInterval(()=>this._autoRefreshTokenTick(),Re);this.autoRefreshTicker=e,e&&typeof e=="object"&&typeof e.unref=="function"?e.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(e);const r=setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0);this.autoRefreshTickTimeout=r,r&&typeof r=="object"&&typeof r.unref=="function"?r.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(r)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const e=this.autoRefreshTicker;this.autoRefreshTicker=null,e&&clearInterval(e);const r=this.autoRefreshTickTimeout;this.autoRefreshTickTimeout=null,r&&clearTimeout(r)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const e=Date.now();try{return await this._useSession(async r=>{const{data:{session:s}}=r;if(!s||!s.refresh_token||!s.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const n=Math.floor((s.expires_at*1e3-e)/Re);this._debug("#_autoRefreshTokenTick()",`access token expires in ${n} ticks, a tick lasts ${Re}ms, refresh threshold is ${br} ticks`),n<=br&&await this._callRefreshToken(s.refresh_token)})}catch(r){console.error("Auto refresh tick failed with error. This is likely a transient error.",r)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(e){if(e.isAcquireTimeout||e instanceof ca)this._debug("auto refresh token tick lock not available");else throw e}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!z()||!(window!=null&&window.addEventListener))return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>{try{await this._onVisibilityChanged(!1)}catch(e){this._debug("#visibilityChangedCallback","error",e)}},window==null||window.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(e){console.error("_handleVisibilityChange",e)}}async _onVisibilityChanged(e){const r=`#_onVisibilityChanged(${e})`;this._debug(r,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),e||(await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>{if(document.visibilityState!=="visible"){this._debug(r,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(e,r,s){const n=[`provider=${encodeURIComponent(r)}`];if(s!=null&&s.redirectTo&&n.push(`redirect_to=${encodeURIComponent(s.redirectTo)}`),s!=null&&s.scopes&&n.push(`scopes=${encodeURIComponent(s.scopes)}`),this.flowType==="pkce"){const[i,o]=await Se(this.storage,this.storageKey),l=new URLSearchParams({code_challenge:`${encodeURIComponent(i)}`,code_challenge_method:`${encodeURIComponent(o)}`});n.push(l.toString())}if(s!=null&&s.queryParams){const i=new URLSearchParams(s.queryParams);n.push(i.toString())}return s!=null&&s.skipBrowserRedirect&&n.push(`skip_http_redirect=${s.skipBrowserRedirect}`),`${e}?${n.join("&")}`}async _unenroll(e){try{return await this._useSession(async r=>{var s;const{data:n,error:i}=r;return i?this._returnResult({data:null,error:i}):await A(this.fetch,"DELETE",`${this.url}/factors/${e.factorId}`,{headers:this.headers,jwt:(s=n==null?void 0:n.session)===null||s===void 0?void 0:s.access_token})})}catch(r){if(S(r))return this._returnResult({data:null,error:r});throw r}}async _enroll(e){try{return await this._useSession(async r=>{var s,n;const{data:i,error:o}=r;if(o)return this._returnResult({data:null,error:o});const l=Object.assign({friendly_name:e.friendlyName,factor_type:e.factorType},e.factorType==="phone"?{phone:e.phone}:e.factorType==="totp"?{issuer:e.issuer}:{}),{data:c,error:d}=await A(this.fetch,"POST",`${this.url}/factors`,{body:l,headers:this.headers,jwt:(s=i==null?void 0:i.session)===null||s===void 0?void 0:s.access_token});return d?this._returnResult({data:null,error:d}):(e.factorType==="totp"&&c.type==="totp"&&(!((n=c==null?void 0:c.totp)===null||n===void 0)&&n.qr_code)&&(c.totp.qr_code=`data:image/svg+xml;utf-8,${c.totp.qr_code}`),this._returnResult({data:c,error:null}))})}catch(r){if(S(r))return this._returnResult({data:null,error:r});throw r}}async _verify(e){return this._acquireLock(this.lockAcquireTimeout,async()=>{try{return await this._useSession(async r=>{var s;const{data:n,error:i}=r;if(i)return this._returnResult({data:null,error:i});const o=Object.assign({challenge_id:e.challengeId},"webauthn"in e?{webauthn:Object.assign(Object.assign({},e.webauthn),{credential_response:e.webauthn.type==="create"?Tc(e.webauthn.credential_response):Rc(e.webauthn.credential_response)})}:{code:e.code}),{data:l,error:c}=await A(this.fetch,"POST",`${this.url}/factors/${e.factorId}/verify`,{body:o,headers:this.headers,jwt:(s=n==null?void 0:n.session)===null||s===void 0?void 0:s.access_token});return c?this._returnResult({data:null,error:c}):(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+l.expires_in},l)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",l),this._returnResult({data:l,error:c}))})}catch(r){if(S(r))return this._returnResult({data:null,error:r});throw r}})}async _challenge(e){return this._acquireLock(this.lockAcquireTimeout,async()=>{try{return await this._useSession(async r=>{var s;const{data:n,error:i}=r;if(i)return this._returnResult({data:null,error:i});const o=await A(this.fetch,"POST",`${this.url}/factors/${e.factorId}/challenge`,{body:e,headers:this.headers,jwt:(s=n==null?void 0:n.session)===null||s===void 0?void 0:s.access_token});if(o.error)return o;const{data:l}=o;if(l.type!=="webauthn")return{data:l,error:null};switch(l.webauthn.type){case"create":return{data:Object.assign(Object.assign({},l),{webauthn:Object.assign(Object.assign({},l.webauthn),{credential_options:Object.assign(Object.assign({},l.webauthn.credential_options),{publicKey:kc(l.webauthn.credential_options.publicKey)})})}),error:null};case"request":return{data:Object.assign(Object.assign({},l),{webauthn:Object.assign(Object.assign({},l.webauthn),{credential_options:Object.assign(Object.assign({},l.webauthn.credential_options),{publicKey:Ac(l.webauthn.credential_options.publicKey)})})}),error:null}}})}catch(r){if(S(r))return this._returnResult({data:null,error:r});throw r}})}async _challengeAndVerify(e){const{data:r,error:s}=await this._challenge({factorId:e.factorId});return s?this._returnResult({data:null,error:s}):await this._verify({factorId:e.factorId,challengeId:r.id,code:e.code})}async _listFactors(){var e;const{data:{user:r},error:s}=await this.getUser();if(s)return{data:null,error:s};const n={all:[],phone:[],totp:[],webauthn:[]};for(const i of(e=r==null?void 0:r.factors)!==null&&e!==void 0?e:[])n.all.push(i),i.status==="verified"&&n[i.factor_type].push(i);return{data:n,error:null}}async _getAuthenticatorAssuranceLevel(e){var r,s,n,i;if(e)try{const{payload:m}=vt(e);let g=null;m.aal&&(g=m.aal);let b=g;const{data:{user:v},error:x}=await this.getUser(e);if(x)return this._returnResult({data:null,error:x});((s=(r=v==null?void 0:v.factors)===null||r===void 0?void 0:r.filter(N=>N.status==="verified"))!==null&&s!==void 0?s:[]).length>0&&(b="aal2");const y=m.amr||[];return{data:{currentLevel:g,nextLevel:b,currentAuthenticationMethods:y},error:null}}catch(m){if(S(m))return this._returnResult({data:null,error:m});throw m}const{data:{session:o},error:l}=await this.getSession();if(l)return this._returnResult({data:null,error:l});if(!o)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const{payload:c}=vt(o.access_token);let d=null;c.aal&&(d=c.aal);let u=d;((i=(n=o.user.factors)===null||n===void 0?void 0:n.filter(m=>m.status==="verified"))!==null&&i!==void 0?i:[]).length>0&&(u="aal2");const p=c.amr||[];return{data:{currentLevel:d,nextLevel:u,currentAuthenticationMethods:p},error:null}}async _getAuthorizationDetails(e){try{return await this._useSession(async r=>{const{data:{session:s},error:n}=r;return n?this._returnResult({data:null,error:n}):s?await A(this.fetch,"GET",`${this.url}/oauth/authorizations/${e}`,{headers:this.headers,jwt:s.access_token,xform:i=>({data:i,error:null})}):this._returnResult({data:null,error:new H})})}catch(r){if(S(r))return this._returnResult({data:null,error:r});throw r}}async _approveAuthorization(e,r){try{return await this._useSession(async s=>{const{data:{session:n},error:i}=s;if(i)return this._returnResult({data:null,error:i});if(!n)return this._returnResult({data:null,error:new H});const o=await A(this.fetch,"POST",`${this.url}/oauth/authorizations/${e}/consent`,{headers:this.headers,jwt:n.access_token,body:{action:"approve"},xform:l=>({data:l,error:null})});return o.data&&o.data.redirect_url&&z()&&!(r!=null&&r.skipBrowserRedirect)&&window.location.assign(o.data.redirect_url),o})}catch(s){if(S(s))return this._returnResult({data:null,error:s});throw s}}async _denyAuthorization(e,r){try{return await this._useSession(async s=>{const{data:{session:n},error:i}=s;if(i)return this._returnResult({data:null,error:i});if(!n)return this._returnResult({data:null,error:new H});const o=await A(this.fetch,"POST",`${this.url}/oauth/authorizations/${e}/consent`,{headers:this.headers,jwt:n.access_token,body:{action:"deny"},xform:l=>({data:l,error:null})});return o.data&&o.data.redirect_url&&z()&&!(r!=null&&r.skipBrowserRedirect)&&window.location.assign(o.data.redirect_url),o})}catch(s){if(S(s))return this._returnResult({data:null,error:s});throw s}}async _listOAuthGrants(){try{return await this._useSession(async e=>{const{data:{session:r},error:s}=e;return s?this._returnResult({data:null,error:s}):r?await A(this.fetch,"GET",`${this.url}/user/oauth/grants`,{headers:this.headers,jwt:r.access_token,xform:n=>({data:n,error:null})}):this._returnResult({data:null,error:new H})})}catch(e){if(S(e))return this._returnResult({data:null,error:e});throw e}}async _revokeOAuthGrant(e){try{return await this._useSession(async r=>{const{data:{session:s},error:n}=r;return n?this._returnResult({data:null,error:n}):s?(await A(this.fetch,"DELETE",`${this.url}/user/oauth/grants`,{headers:this.headers,jwt:s.access_token,query:{client_id:e.clientId},noResolveJson:!0}),{data:{},error:null}):this._returnResult({data:null,error:new H})})}catch(r){if(S(r))return this._returnResult({data:null,error:r});throw r}}async fetchJwk(e,r={keys:[]}){let s=r.keys.find(l=>l.kid===e);if(s)return s;const n=Date.now();if(s=this.jwks.keys.find(l=>l.kid===e),s&&this.jwks_cached_at+Ul>n)return s;const{data:i,error:o}=await A(this.fetch,"GET",`${this.url}/.well-known/jwks.json`,{headers:this.headers});if(o)throw o;return!i.keys||i.keys.length===0||(this.jwks=i,this.jwks_cached_at=n,s=i.keys.find(l=>l.kid===e),!s)?null:s}async getClaims(e,r={}){try{let s=e;if(!s){const{data:m,error:g}=await this.getSession();if(g||!m.session)return this._returnResult({data:null,error:g});s=m.session.access_token}const{header:n,payload:i,signature:o,raw:{header:l,payload:c}}=vt(s);r!=null&&r.allowExpired||ic(i.exp);const d=!n.alg||n.alg.startsWith("HS")||!n.kid||!("crypto"in globalThis&&"subtle"in globalThis.crypto)?null:await this.fetchJwk(n.kid,r!=null&&r.keys?{keys:r.keys}:r==null?void 0:r.jwks);if(!d){const{error:m}=await this.getUser(s);if(m)throw m;return{data:{claims:i,header:n,signature:o},error:null}}const u=oc(n.alg),h=await crypto.subtle.importKey("jwk",d,u,!0,["verify"]);if(!await crypto.subtle.verify(u,h,o,Kl(`${l}.${c}`)))throw new wr("Invalid JWT signature");return{data:{claims:i,header:n,signature:o},error:null}}catch(s){if(S(s))return this._returnResult({data:null,error:s});throw s}}}st.nextInstanceID={};const qc=st,Mc="2.95.3";let Ke="";typeof Deno<"u"?Ke="deno":typeof document<"u"?Ke="web":typeof navigator<"u"&&navigator.product==="ReactNative"?Ke="react-native":Ke="node";const zc={"X-Client-Info":`supabase-js-${Ke}/${Mc}`},Bc={headers:zc},Fc={schema:"public"},Hc={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},Wc={};function at(t){"@babel/helpers - typeof";return at=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},at(t)}function Vc(t,e){if(at(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var s=r.call(t,e);if(at(s)!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function Kc(t){var e=Vc(t,"string");return at(e)=="symbol"?e:e+""}function Gc(t,e,r){return(e=Kc(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function gs(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);e&&(s=s.filter(function(n){return Object.getOwnPropertyDescriptor(t,n).enumerable})),r.push.apply(r,s)}return r}function L(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?gs(Object(r),!0).forEach(function(s){Gc(t,s,r[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):gs(Object(r)).forEach(function(s){Object.defineProperty(t,s,Object.getOwnPropertyDescriptor(r,s))})}return t}const Jc=t=>t?(...e)=>t(...e):(...e)=>fetch(...e),Yc=()=>Headers,Qc=(t,e,r)=>{const s=Jc(r),n=Yc();return async(i,o)=>{var l;const c=(l=await e())!==null&&l!==void 0?l:t;let d=new n(o==null?void 0:o.headers);return d.has("apikey")||d.set("apikey",t),d.has("Authorization")||d.set("Authorization",`Bearer ${c}`),s(i,L(L({},o),{},{headers:d}))}};function Xc(t){return t.endsWith("/")?t:t+"/"}function Zc(t,e){var r,s;const{db:n,auth:i,realtime:o,global:l}=t,{db:c,auth:d,realtime:u,global:h}=e,p={db:L(L({},c),n),auth:L(L({},d),i),realtime:L(L({},u),o),storage:{},global:L(L(L({},h),l),{},{headers:L(L({},(r=h==null?void 0:h.headers)!==null&&r!==void 0?r:{}),(s=l==null?void 0:l.headers)!==null&&s!==void 0?s:{})}),accessToken:async()=>""};return t.accessToken?p.accessToken=t.accessToken:delete p.accessToken,p}function ed(t){const e=t==null?void 0:t.trim();if(!e)throw new Error("supabaseUrl is required.");if(!e.match(/^https?:\/\//i))throw new Error("Invalid supabaseUrl: Must be a valid HTTP or HTTPS URL.");try{return new URL(Xc(e))}catch{throw Error("Invalid supabaseUrl: Provided URL is malformed.")}}var td=class extends qc{constructor(t){super(t)}},rd=class{constructor(t,e,r){var s,n;this.supabaseUrl=t,this.supabaseKey=e;const i=ed(t);if(!e)throw new Error("supabaseKey is required.");this.realtimeUrl=new URL("realtime/v1",i),this.realtimeUrl.protocol=this.realtimeUrl.protocol.replace("http","ws"),this.authUrl=new URL("auth/v1",i),this.storageUrl=new URL("storage/v1",i),this.functionsUrl=new URL("functions/v1",i);const o=`sb-${i.hostname.split(".")[0]}-auth-token`,l={db:Fc,realtime:Wc,auth:L(L({},Hc),{},{storageKey:o}),global:Bc},c=Zc(r??{},l);if(this.storageKey=(s=c.auth.storageKey)!==null&&s!==void 0?s:"",this.headers=(n=c.global.headers)!==null&&n!==void 0?n:{},c.accessToken)this.accessToken=c.accessToken,this.auth=new Proxy({},{get:(u,h)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(h)} is not possible`)}});else{var d;this.auth=this._initSupabaseAuthClient((d=c.auth)!==null&&d!==void 0?d:{},this.headers,c.global.fetch)}this.fetch=Qc(e,this._getAccessToken.bind(this),c.global.fetch),this.realtime=this._initRealtimeClient(L({headers:this.headers,accessToken:this._getAccessToken.bind(this)},c.realtime)),this.accessToken&&Promise.resolve(this.accessToken()).then(u=>this.realtime.setAuth(u)).catch(u=>console.warn("Failed to set initial Realtime auth token:",u)),this.rest=new Mo(new URL("rest/v1",i).href,{headers:this.headers,schema:c.db.schema,fetch:this.fetch,timeout:c.db.timeout,urlLengthLimit:c.db.urlLengthLimit}),this.storage=new Pl(this.storageUrl.href,this.headers,this.fetch,r==null?void 0:r.storage),c.accessToken||this._listenForAuthEvents()}get functions(){return new Co(this.functionsUrl.href,{headers:this.headers,customFetch:this.fetch})}from(t){return this.rest.from(t)}schema(t){return this.rest.schema(t)}rpc(t,e={},r={head:!1,get:!1,count:void 0}){return this.rest.rpc(t,e,r)}channel(t,e={config:{}}){return this.realtime.channel(t,e)}getChannels(){return this.realtime.getChannels()}removeChannel(t){return this.realtime.removeChannel(t)}removeAllChannels(){return this.realtime.removeAllChannels()}async _getAccessToken(){var t=this,e,r;if(t.accessToken)return await t.accessToken();const{data:s}=await t.auth.getSession();return(e=(r=s.session)===null||r===void 0?void 0:r.access_token)!==null&&e!==void 0?e:t.supabaseKey}_initSupabaseAuthClient({autoRefreshToken:t,persistSession:e,detectSessionInUrl:r,storage:s,userStorage:n,storageKey:i,flowType:o,lock:l,debug:c,throwOnError:d},u,h){const p={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new td({url:this.authUrl.href,headers:L(L({},p),u),storageKey:i,autoRefreshToken:t,persistSession:e,detectSessionInUrl:r,storage:s,userStorage:n,flowType:o,lock:l,debug:c,throwOnError:d,fetch:h,hasCustomAuthorizationHeader:Object.keys(this.headers).some(m=>m.toLowerCase()==="authorization")})}_initRealtimeClient(t){return new sl(this.realtimeUrl.href,L(L({},t),{},{params:L(L({},{apikey:this.supabaseKey}),t==null?void 0:t.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((t,e)=>{this._handleTokenChanged(t,"CLIENT",e==null?void 0:e.access_token)})}_handleTokenChanged(t,e,r){(t==="TOKEN_REFRESHED"||t==="SIGNED_IN")&&this.changedAccessToken!==r?(this.changedAccessToken=r,this.realtime.setAuth(r)):t==="SIGNED_OUT"&&(this.realtime.setAuth(),e=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}};const sd=(t,e,r)=>new rd(t,e,r);function ad(){if(typeof window<"u")return!1;const t=globalThis.process;if(!t)return!1;const e=t.version;if(e==null)return!1;const r=e.match(/^v(\d+)\./);return r?parseInt(r[1],10)<=18:!1}ad()&&console.warn("âš ï¸  Node.js 18 and below are deprecated and will no longer be supported in future versions of @supabase/supabase-js. Please upgrade to Node.js 20 or later. For more information, visit: https://github.com/orgs/supabase/discussions/37217");const nd=[{id:"28e392aa-175f-4c48-8be3-f1055c4c17e4",original_url:"https://primos.mat.br/example-recovery-test",title:"Example Domain (Safety Net)",status:"published",created_at:"2026-02-10T13:10:31.79248+00:00",content_markdown:"Fallback content."},{id:"c4676303-83f1-4d25-ab7c-ac88887d359e",original_url:"https://primos.mat.br/50mi_en.html",title:"First 50.000.000 prime numbers",status:"published",created_at:"2026-02-10T14:12:17.605866+00:00",content_markdown:"Fallback content."}],id="https://vnrufmtdzvduqaqommla.supabase.co",od="sb_publishable_5UmdAzhjGiGxMqNKpPEwxA_V4jos5kv",P=sd(id,od),ve={async getDraftById(t){if(!P)return null;try{const{data:e,error:r}=await P.from("draft_articles").select("*").eq("id",t).single();if(r)throw r;return e?{id:e.id,original_url:e.original_url,title:e.title,status:e.status,created_at:e.created_at,content_markdown:e.content_markdown}:null}catch(e){return console.error("Error fetching draft:",e),null}},async saveDraft(t,e){if(!P)return!1;try{const{error:r}=await P.from("draft_articles").update({content_markdown:e,updated_at:new Date().toISOString()}).eq("id",t);if(r)throw r;return!0}catch(r){return console.error("Error saving draft:",r),!1}},async publishDraft(t){if(!P)return!1;try{const{error:e}=await P.from("draft_articles").update({status:"published",updated_at:new Date().toISOString()}).eq("id",t);if(e)throw e;return!0}catch(e){return console.error("Error publishing draft:",e),!1}},async getPublishedArticleByUrl(t){if(!P)return null;try{const{data:e,error:r}=await P.from("draft_articles").select("*").eq("status","published").ilike("original_url",`%${t}`).limit(1);if(r)throw r;if(e&&e.length>0){const s=e[0];return{id:s.id,original_url:s.original_url,title:s.title,status:s.status,created_at:s.created_at,content_markdown:s.content_markdown}}return null}catch(e){return console.error("Error fetching published article:",e),null}},async getPublishedArticles(){let t=[];if(P)try{const{data:e,error:r}=await P.from("draft_articles").select("*").eq("status","published").order("created_at",{ascending:!1});!r&&e&&(t=e)}catch(e){console.error("Error fetching published articles:",e)}if(t.length===0){console.warn("ReconService: Using local fallback data (Offline Mode)");try{const e=await fetch("/fallback_articles.json");e.ok?t=await e.json():console.error("ReconService: JSON fetch failed",e.status)}catch(e){console.error("ReconService: JSON fetch error",e)}(!t||t.length===0)&&(console.warn("ReconService: Using safety net data"),t=nd)}return t},async getLatestResults(){if(P)try{const{data:t,error:e}=await P.from("recon_scans").select("*").order("created_at",{ascending:!1}).limit(1).single();let r=[],s=[];const{data:n}=await P.from("scanned_urls").select("*").in("status",["recuperado","referÃªncia_externa"]).order("created_at",{ascending:!1}).limit(20),{data:i}=await P.from("draft_articles").select("*").order("created_at",{ascending:!1}).limit(10),{count:o}=await P.from("scanned_urls").select("*",{count:"exact",head:!0}).in("status",["recuperado","referÃªncia_externa"]);if(n&&(r=n.map(l=>({url:l.url,title:l.title,source:l.source,status:l.status,scan_data:l.scan_data}))),i&&(s=i.map(l=>({id:l.id,original_url:l.original_url,title:l.title,status:l.status,created_at:l.created_at}))),n||i)return{lastScan:(t==null?void 0:t.created_at)||new Date().toISOString(),totalLinks:o||(t==null?void 0:t.total_links)||0,status:(t==null?void 0:t.status)||"Active (Hunter)",recoveredArticles:r,drafts:s};if(t&&!e)return{lastScan:t.created_at,totalLinks:t.total_links,status:t.status,recoveredArticles:r.length>0?r:t.results_json,drafts:s};console.warn("Supabase returned error or no data, falling back to JSON:",e)}catch(t){console.warn("Supabase connection failed, falling back to JSON:",t)}try{console.log("Fetching local JSON...");const t=await fetch("/data/recon_results.json?t="+Date.now());if(!t.ok)throw new Error("Local JSON not found");return await t.json()}catch(t){return console.error("Recon Service Error (JSON):",t),{lastScan:new Date().toISOString(),totalLinks:0,status:"Offline / Error",recoveredArticles:[],drafts:[]}}}},ha="primos_dossier_history",ld=async t=>{try{if(P){const{data:i,error:o}=await P.from("dossier_entries").insert([{number:t.number,is_prime:t.isPrime,factors:t.factors,ai_insight:t.aiInsight,execution_time:t.executionTime,timestamp:Date.now()}]).select().single();if(o)console.error("Supabase Save Error:",o);else if(i)return window.dispatchEvent(new Event("dossier-updated")),{...t,id:i.id,timestamp:i.timestamp}}console.warn("Supabase not available, saving locally...");const e=ma(),r=e.findIndex(i=>i.number===t.number);r!==-1&&e.splice(r,1);const s={...t,id:crypto.randomUUID(),timestamp:Date.now()},n=[s,...e].slice(0,50);return localStorage.setItem(ha,JSON.stringify(n)),window.dispatchEvent(new Event("dossier-updated")),s}catch(e){return console.error("Failed to save dossier:",e),null}},cd=async()=>{try{if(P){const{data:t,error:e}=await P.from("dossier_entries").select("*").order("created_at",{ascending:!1}).limit(50);if(t&&!e)return t.map(r=>({id:r.id,number:r.number,isPrime:r.is_prime,timestamp:r.timestamp,factors:r.factors,executionTime:r.execution_time,aiInsight:r.ai_insight}))}}catch(t){console.error("Supabase Fetch Error:",t)}return ma()},ma=()=>{try{const t=localStorage.getItem(ha);return t?JSON.parse(t):[]}catch(t){return console.error("Failed to load dossiers:",t),[]}},$=t=>t.toString().replace(/\B(?=(\d{3})+(?!\d))/g,"."),dd=(t,e,r=[],s)=>{const n=t.toString(),i=n.length,o=parseInt(n.substring(0,15)),l=e?`DossiÃª Completo: Por que o nÃºmero ${$(t)} Ã© um Primo MatemÃ¡tico?`:`AnÃ¡lise NumÃ©rica: DecomposiÃ§Ã£o e Fatores do NÃºmero ${$(t)}`,c=e?`Descubra tudo sobre o nÃºmero ${$(t)}. AnÃ¡lise de primalidade confirmada, propriedades matemÃ¡ticas, representaÃ§Ãµes binÃ¡rias e curiosidades. Um estudo completo.`:`O nÃºmero ${$(t)} Ã© primo? Veja a resposta, seus fatores ${r.slice(0,3).join(", ")} e decomposiÃ§Ã£o completa. Entenda sua estrutura matemÃ¡tica.`,d=[];d.push({title:`IntroduÃ§Ã£o ao NÃºmero ${$(t)}`,content:`No vasto universo da teoria dos nÃºmeros, cada inteiro ocupa um lugar Ãºnico e possui propriedades distintas que o definem. O nÃºmero **${$(t)}** nÃ£o Ã© exceÃ§Ã£o. ${e?"ApÃ³s uma anÃ¡lise computacional rigorosa, confirmamos que este nÃºmero pertence Ã  elite dos nÃºmeros inteiros: ele Ã© um **NÃºmero Primo**.":"Nossa anÃ¡lise detectou que este Ã© um **NÃºmero Composto**, o que significa que ele pode ser construÃ­do atravÃ©s da multiplicaÃ§Ã£o de nÃºmeros menores."} Este dossiÃª tÃ©cnico visa explorar todas as facetas matemÃ¡ticas, computacionais e curiosas desta entidade numÃ©rica, fornecendo uma referÃªncia definitiva para estudantes, matemÃ¡ticos e entusiastas.`}),d.push({title:"AnÃ¡lise de Primalidade: O Veredito",content:`A questÃ£o central "O nÃºmero ${$(t)} Ã© primo?" foi respondida com **${e?"SIM":"NÃƒO"}**. 
    
    Para chegar a esta conclusÃ£o, nosso algoritmo de forÃ§a bruta otimizada realizou uma varredura exaustiva. ${e?`Sendo um nÃºmero primo, ${$(t)} possui a propriedade fundamental de ser divisÃ­vel apenas por 1 e por ele mesmo. Isso significa que ele Ã© um "Ã¡tomo" da aritmÃ©tica, um bloco de construÃ§Ã£o indivisÃ­vel. Em termos criptogrÃ¡ficos, nÃºmeros como este sÃ£o a base para a seguranÃ§a de dados moderna (como no algoritmo RSA).`:`Como um nÃºmero composto, ${$(t)} possui divisores alÃ©m da unidade e de si mesmo. Especificamente, identificamos que ele pode ser dividido por **${r[0]}**. A fatoraÃ§Ã£o fundamental revela que ${$(t)} = ${r[0]} Ã— ${r[1]} (entre outras possÃ­veis combinaÃ§Ãµes). Isso demonstra que ele Ã© um "produto" de primos menores.`}
    
    A verificaÃ§Ã£o levou aproximadamente **${s.toFixed(4)} milissegundos**, demonstrando a eficiÃªncia do nosso motor de processamento client-side.`});const u=t.toString(2),h=t.toString(16).toUpperCase(),p=t.toString(8);d.push({title:"Propriedades Computacionais e RepresentaÃ§Ãµes",content:`AlÃ©m de seu valor decimal, o nÃºmero ${$(t)} assume formas diferentes dependendo da base numÃ©rica utilizada, essenciais para a ciÃªncia da computaÃ§Ã£o:
    
    *   **BinÃ¡rio (Base 2):** \`${u}\` - Esta Ã© a linguagem nativa das mÃ¡quinas. O nÃºmero possui ${u.length} bits. A quantidade de bits "1" (Population Count) Ã© ${u.split("1").length-1}, o que influencia em cÃ¡lculos de paridade e detecÃ§Ã£o de erros.
    *   **Hexadecimal (Base 16):** \`${h}\` - Frequentemente usado em endereÃ§amento de memÃ³ria e cÃ³digos de cores.
    *   **Octal (Base 8):** \`${p}\` - Uma representaÃ§Ã£o histÃ³rica em computaÃ§Ã£o.
    
    Essas transformaÃ§Ãµes confirmam a integridade do dado atravÃ©s de diferentes sistemas lÃ³gicos.`});const m=n.split("").reduce((w,y)=>w+parseInt(y),0),g=n.slice(-1);d.push({title:"Curiosidades AritmÃ©ticas",content:`Vamos aprofundar nas caracterÃ­sticas intrÃ­nsecas dos dÃ­gitos de ${$(t)}:
    
    1.  **Soma dos DÃ­gitos:** A soma de todos os algarismos Ã© **${m}**. ${m%3===0?"Como esta soma Ã© divisÃ­vel por 3, o nÃºmero original tambÃ©m Ã© (critÃ©rio de divisibilidade).":"Esta soma nÃ£o Ã© divisÃ­vel por 3, o que elimina o 3 como fator trivial."}
    2.  **DÃ­gito Terminal:** O nÃºmero termina em **${g}**. ${["0","2","4","6","8"].includes(g)?"Isso o classifica imediatamente como um nÃºmero **PAR**, garantindo divisibilidade por 2.":"Isso o classifica como um nÃºmero **ÃMPAR**, uma condiÃ§Ã£o necessÃ¡ria (mas nÃ£o suficiente) para ser primo (exceto o 2)."}
    3.  **Magnitude:** O nÃºmero possui **${i} dÃ­gitos**. Estima-se que existam aproximadamente ${$(t/BigInt(Math.log(o)||1))} nÃºmeros primos menores que ele, baseando-se no Teorema dos NÃºmeros Primos.`});const b=[{question:`O nÃºmero ${$(t)} Ã© primo?`,answer:e?`Sim, ${$(t)} Ã© um nÃºmero primo. Ele nÃ£o possui divisores exatos alÃ©m de 1 e dele mesmo.`:`NÃ£o, ${$(t)} Ã© um nÃºmero composto. Ele pode ser dividido por ${r[0]} e outros nÃºmeros.`},{question:`Quais sÃ£o os fatores de ${$(t)}?`,answer:e?`Sendo primo, seus Ãºnicos fatores sÃ£o 1 e ${$(t)}.`:`Seus fatores incluem 1, ${r.slice(0,5).join(", ")}, ..., e ${$(t)}. A decomposiÃ§Ã£o primÃ¡ria comeÃ§a com ${r[0]}.`},{question:`Qual Ã© o binÃ¡rio de ${$(t)}?`,answer:`A representaÃ§Ã£o binÃ¡ria Ã© ${u}.`},{question:`Para que serve saber se ${$(t)} Ã© primo?`,answer:`A primalidade Ã© fundamental para criptografia (RSA), geraÃ§Ã£o de nÃºmeros aleatÃ³rios e teoria dos cÃ³digos. Saber se ${$(t)} Ã© primo ajuda a determinar sua utilidade nesses algoritmos de seguranÃ§a.`}],x=(d.map(w=>w.content).join(" ")+b.map(w=>w.answer).join(" ")).split(/\s+/).length;return{title:l,intro:c,sections:d,faq:b,metaDescription:c,wordCount:x}},ud=()=>{const[t,e]=f.useState(""),[r,s]=f.useState("idle"),[n,i]=f.useState(""),[o,l]=f.useState(null),[c,d]=f.useState(0),[u,h]=f.useState(null),[p,m]=f.useState(0),[g,b]=f.useState(0),{sendAlert:v}=ba(),x=(_,j,E,k)=>{const R=[],q=_.toString(),dt=Math.floor(Math.sqrt(Number(q)));return R.push(`1. INICIALIZAÃ‡ÃƒO: O nÃºmero ${_} foi carregado no buffer de anÃ¡lise.`),R.push("2. VERIFICAÃ‡ÃƒO PRELIMINAR: Testes de paridade e divisibilidade bÃ¡sica por 2, 3 e 5 executados."),_%2n===0n&&_!==2n?R.push("3. DETECÃ‡ÃƒO DE PARIDADE: O nÃºmero Ã© par, logo, divisÃ­vel por 2. CondiÃ§Ã£o de primalidade falhou imediatamente."):_%5n===0n&&_!==5n?R.push("3. TERMINAÃ‡ÃƒO EM 5: O nÃºmero termina em 5, indicando divisibilidade por 5."):(R.push("3. FILTRO INICIAL APROVADO: O nÃºmero nÃ£o Ã© divisÃ­vel pelos primeiros primos triviais."),j?(R.push(`4. TESTE DE FORÃ‡A BRUTA OTIMIZADO: Executada divisÃ£o por tentativa atÃ© a raiz quadrada aproximada (~${dt}).`),R.push(`5. RESULTADO: Nenhum divisor inteiro encontrado no intervalo [2, âˆš${_}].`),R.push("6. CONCLUSÃƒO: O nÃºmero atende a todos os critÃ©rios de indivisibilidade.")):(R.push("4. BUSCA DE FATORES: Algoritmo de fatoraÃ§Ã£o iniciado."),E&&E.length>0?(R.push(`5. FATOR ENCONTRADO: Divisor ${E[0]} identificado.`),R.push(`6. VALIDAÃ‡ÃƒO: ${E[0]} Ã— ${E[1]} = ${_}. A condiÃ§Ã£o de existÃªncia de divisores nÃ£o-triviais foi satisfeita.`)):R.push("5. RESULTADO: Divisores encontrados (algoritmo genÃ©rico)."))),R.push(`7. TEMPO DE PROCESSAMENTO: AnÃ¡lise concluÃ­da em ${k==null?void 0:k.toFixed(4)}ms.`),R},w=(_,j,E,k)=>{const R=x(_,j,E,k);if(_===2n)return{message:"IA: O Ãºnico nÃºmero primo par. A base de toda computaÃ§Ã£o binÃ¡ria.",explanation:"O nÃºmero 2 Ã© divisÃ­vel apenas por 1 e por ele mesmo. Ã‰ o Ãºnico par com essa propriedade.",formula:"n = 2 â‡’ P(n) = True",report:R};if(_<2n)return{message:"IA: Valor muito baixo. Primos devem ser maiores que 1.",explanation:"Por definiÃ§Ã£o, nÃºmeros primos sÃ£o inteiros positivos maiores que 1.",formula:"n < 2 â‡’ P(n) = False",report:R};const q=_.toString(),dt=q===q.split("").reverse().join("");if(j)return dt?{message:"IA: PRIMO PALÃNDROMO DETECTADO! LÃª-se da mesma forma em ambos os sentidos.",explanation:"Este nÃºmero possui simetria perfeita em sua representaÃ§Ã£o decimal, alÃ©m de ser indivisÃ­vel.",formula:"P(n) âˆ§ Reverse(n) = n",report:R}:_>1000000n?{message:"IA: Primo de alta magnitude detectado. Adequado para geraÃ§Ã£o de chaves criptogrÃ¡ficas.",explanation:"NÃºmeros primos grandes sÃ£o essenciais para algoritmos como RSA, pois sua fatoraÃ§Ã£o Ã© computacionalmente inviÃ¡vel.",formula:"n > 10â¶ âˆ§ P(n)",report:R}:(_-1n)%4n===0n?{message:"IA: Primo PitagÃ³rico (4n + 1). Pode ser expresso como a soma de dois quadrados.",explanation:"Teorema de Fermat sobre a soma de dois quadrados: primos da forma 4n+1 podem ser escritos como aÂ² + bÂ².",formula:"n â‰¡ 1 (mod 4) â‡’ n = aÂ² + bÂ²",report:R}:{message:"IA: Entidade Prima VÃ¡lida confirmada. Estrutura indivisÃ­vel.",explanation:"O nÃºmero nÃ£o possui divisores alÃ©m de 1 e ele mesmo.",formula:"âˆ€d âˆˆ {2..âˆšn}, n mod d â‰  0",report:R};{if(_%2n===0n)return{message:"IA: NÃºmero par detectado. Trivialmente divisÃ­vel por 2.",explanation:"Todo nÃºmero par maior que 2 Ã© composto, pois pode ser dividido por 2.",formula:"n â‰¡ 0 (mod 2)",report:R};if(_%5n===0n)return{message:"IA: PadrÃ£o terminado em 0 ou 5. DivisÃ­vel por 5.",explanation:"Qualquer nÃºmero que termina em 0 ou 5 Ã© mÃºltiplo de 5.",formula:"n â‰¡ 0 (mod 5)",report:R};const Be=q.split("").reduce((pa,fa)=>pa+parseInt(fa),0);return Be%3===0?{message:`IA: Soma digital Ã© ${Be}. DivisÃ­vel por 3 pela regra de divisibilidade.`,explanation:`A soma dos algarismos (${q.split("").join("+")}) resulta em ${Be}, que Ã© divisÃ­vel por 3. Logo, ${_} tambÃ©m Ã©.`,formula:`Î£ digits = ${Be} â‡’ ${Be} â‰¡ 0 (mod 3)`,report:R}:dt?{message:"IA: Composto PalÃ­ndromo. SimÃ©trico mas divisÃ­vel.",explanation:"Apesar de sua simetria visual, o nÃºmero possui divisores.",formula:"n = Reverse(n) âˆ§ âˆƒd: n mod d = 0",report:R}:{message:"IA: Estrutura composta. DecomponÃ­vel em fatores menores.",explanation:"O nÃºmero possui divisores alÃ©m de 1 e ele mesmo, o que o desqualifica como primo.",formula:E&&E.length>=2?`${_} = ${E[0]} Ã— ${E[1]}`:"n = a Ã— b",report:R}}},y=_=>{const j=performance.now();try{const E=BigInt(_);if(E<=1n)return{isPrime:!1,time:performance.now()-j};if(E<=3n)return{isPrime:!0,time:performance.now()-j};if(E%2n===0n)return{isPrime:!1,factors:["2",(E/2n).toString()],time:performance.now()-j};if(E%3n===0n)return{isPrime:!1,factors:["3",(E/3n).toString()],time:performance.now()-j};let k=5n;const R=10000n;let q=0;for(;k*k<=E;){if(E%k===0n)return{isPrime:!1,factors:[k.toString(),(E/k).toString()],time:performance.now()-j};if(E%(k+2n)===0n)return{isPrime:!1,factors:[(k+2n).toString(),(E/(k+2n)).toString()],time:performance.now()-j};if(k+=6n,q++,q>R&&performance.now()-j>2e3)throw new Error("Timeout: Number too large for browser scanner.")}return{isPrime:!0,time:performance.now()-j}}catch(E){return console.error(E),{isPrime:!1,time:0}}},N=()=>{if(!t)return;const _=t.match(/\d+/);if(!_){i("ERRO: NENHUM DADO NUMÃ‰RICO DETECTADO."),s("composite");return}const j=_[0],E=Date.now();if(E-g<1e3){const k=p+1;if(m(k),k>=5){v("BRUTE_FORCE",`Rapid scanning detected on value: ${j}`,k),i("AVISO: ATIVIDADE ANÃ”MALA DETECTADA. SISTEMA BLOQUEADO."),s("composite");return}}else m(0);b(E),s("scanning"),i(""),l(null),setTimeout(async()=>{const k=y(j),R=dd(BigInt(j),k.isPrime,k.factors,k.time),q={...w(BigInt(j),k.isPrime,k.factors,k.time),fullArticle:R};h({number:j,isPrime:k.isPrime,factors:k.factors,time:k.time}),l(q),i(k.isPrime?"ENTIDADE PRIMA CONFIRMADA":"ENTIDADE COMPOSTA DETECTADA"),s(k.isPrime?"prime":"composite"),d(k.time),await ld({number:j,isPrime:k.isPrime,factors:k.factors,executionTime:k.time,aiInsight:q})},800)};return a.jsxs("div",{className:"w-full max-w-2xl mx-auto glass-panel p-6 md:p-8 rounded-2xl relative z-20 shadow-2xl animate-slide-up [animation-delay:200ms] border-t border-white/10",children:[a.jsxs("div",{className:"flex items-center gap-3 mb-6 border-b border-white/5 pb-4",children:[a.jsxs("div",{className:"relative",children:[a.jsx(ye,{className:"text-primary animate-pulse-slow",size:28}),a.jsx("div",{className:"absolute -top-1 -right-1 w-2 h-2 bg-primary rounded-full animate-ping"})]}),a.jsxs("div",{children:[a.jsxs("h2",{className:"text-2xl font-bold font-mono text-white tracking-tight flex items-center gap-2",children:["SCANNER DE PRIMALIDADE",a.jsxs("span",{className:"text-[10px] bg-purple-500/20 text-purple-400 px-2 py-0.5 rounded border border-purple-500/30 flex items-center gap-1",children:[a.jsx(kt,{size:10}),"v3.2 PT-BR"]})]}),a.jsx("p",{className:"text-xs text-gray-500 font-mono tracking-widest uppercase",children:"Motor de AnÃ¡lise HeurÃ­stica QuÃ¢ntica"})]})]}),a.jsxs("div",{className:"relative mb-8 group",children:[a.jsx("div",{className:"absolute inset-y-0 left-4 flex items-center pointer-events-none",children:a.jsx(De,{className:`text-gray-500 transition-colors ${r==="scanning"?"text-primary animate-spin":""}`,size:20})}),a.jsxs("div",{className:"flex flex-col md:flex-row gap-3",children:[a.jsxs("div",{className:"relative flex-1",children:[a.jsx("input",{type:"text",value:t,onChange:_=>e(_.target.value),onKeyDown:_=>_.key==="Enter"&&N(),placeholder:"Digite um nÃºmero (ex: 333) ou pergunte Ã  IA...",className:"w-full bg-black/50 border border-white/10 rounded-xl py-4 pl-12 pr-4 text-white font-mono text-lg focus:outline-none focus:border-purple-500/50 focus:ring-1 focus:ring-purple-500/50 transition-all placeholder:text-gray-600"}),a.jsxs("div",{className:"absolute right-3 top-1/2 -translate-y-1/2 flex items-center gap-1 pointer-events-none",children:[a.jsx(we,{size:14,className:"text-purple-500/50"}),a.jsx("span",{className:"text-[10px] text-gray-500 font-mono hidden sm:inline",children:"IA PRONTA"})]})]}),a.jsx("button",{onClick:N,disabled:r==="scanning",className:"bg-primary hover:bg-primary-dark text-black font-bold py-4 px-8 rounded-xl transition-all shadow-[0_0_20px_rgba(0,255,127,0.2)] hover:shadow-[0_0_30px_rgba(0,255,127,0.4)] active:scale-95 disabled:opacity-50 disabled:cursor-not-allowed whitespace-nowrap flex items-center justify-center gap-2",children:r==="scanning"?a.jsxs(a.Fragment,{children:[a.jsx(Tr,{size:20,className:"animate-spin"}),"ANALISANDO..."]}):a.jsx(a.Fragment,{children:"INICIAR ANÃLISE"})})]})]}),r!=="idle"&&a.jsxs("div",{className:`rounded-xl p-6 border transition-all duration-500 ${r==="scanning"?"bg-blue-500/10 border-blue-500/30":r==="prime"?"bg-primary/10 border-primary/30":"bg-red-500/10 border-red-500/30"} animate-in fade-in slide-in-from-bottom-4`,children:[a.jsxs("div",{className:"flex items-start justify-between mb-4",children:[a.jsxs("div",{children:[a.jsx("h3",{className:`text-lg font-bold font-mono mb-1 ${r==="scanning"?"text-blue-400":r==="prime"?"text-primary":"text-red-400"}`,children:r==="scanning"?"PROCESSANDO...":n}),c>0&&a.jsxs("p",{className:"text-xs text-gray-500 font-mono",children:["Tempo de ExecuÃ§Ã£o: ",c.toFixed(2),"ms"]})]}),r==="prime"&&a.jsx(Bi,{className:"text-primary",size:24}),r==="composite"&&a.jsx(Ue,{className:"text-red-400",size:24}),r==="scanning"&&a.jsx(ye,{className:"text-blue-400 animate-pulse",size:24})]}),o&&r!=="scanning"&&a.jsxs("div",{className:"mt-4 p-4 bg-purple-500/10 border border-purple-500/20 rounded-lg animate-in zoom-in-95 duration-300",children:[a.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[a.jsx(we,{size:16,className:"text-purple-400"}),a.jsx("span",{className:"text-xs font-bold text-purple-400 uppercase tracking-wider",children:"Insights da IA"})]}),a.jsx("p",{className:"text-sm text-gray-200 font-bold mb-3 border-l-2 border-purple-500 pl-3",children:o.message}),o.explanation&&a.jsx("div",{className:"mb-3 text-sm text-gray-400 pl-3 border-l-2 border-purple-500/30",children:a.jsx("p",{children:o.explanation})}),o.formula&&a.jsxs("div",{className:"mt-3 bg-black/40 rounded p-3 border border-blue-500/20 relative overflow-hidden group",children:[a.jsx("div",{className:"absolute top-0 left-0 w-1 h-full bg-blue-500/50"}),a.jsxs("p",{className:"text-[10px] text-blue-400 font-mono mb-1 uppercase tracking-wider flex items-center gap-1",children:[a.jsx(kt,{size:10}),"FÃ³rmula MatemÃ¡tica"]}),a.jsx("code",{className:"font-mono text-sm text-blue-200 block",children:o.formula})]}),o.report&&a.jsxs("div",{className:"mt-4 pt-4 border-t border-purple-500/10",children:[a.jsx("p",{className:"text-[10px] text-gray-500 font-mono mb-2 uppercase tracking-wider",children:"RelatÃ³rio de Processamento"}),a.jsx("div",{className:"space-y-2 font-mono text-xs text-gray-400 bg-black/20 p-3 rounded",children:o.report.map((_,j)=>a.jsxs("div",{className:"flex gap-2",children:[a.jsx("span",{className:"text-purple-500/50 select-none",children:"â€º"}),a.jsx("span",{children:_})]},j))})]})]}),r==="composite"&&(u==null?void 0:u.factors)&&a.jsxs("div",{className:"mt-4 p-3 bg-black/30 rounded border border-white/5",children:[a.jsx("p",{className:"text-sm text-gray-400 mb-2 font-mono",children:"Fatores Primos Encontrados:"}),a.jsx("div",{className:"flex flex-wrap gap-2",children:u.factors.map((_,j)=>a.jsx("span",{className:"px-2 py-1 bg-white/5 rounded text-xs font-mono text-red-300 border border-red-500/20",children:_},j))})]})]})]})},Ot=t=>{if(!t)return"/";try{return new URL(t).pathname}catch{return t.startsWith("/")?t:"/"}},hd=()=>{const[t,e]=f.useState([]),[r,s]=f.useState(!0);f.useEffect(()=>{(async()=>{try{const o=await ve.getPublishedArticles();o&&o.length>0&&e(o.slice(0,6))}catch(o){console.error("AcervoPreview error:",o)}finally{s(!1)}})()},[]);const n=i=>{if(!i)return"from-gray-700 to-gray-900";const o=["from-green-400 to-blue-500","from-purple-500 to-pink-500","from-yellow-400 to-orange-500","from-red-500 to-pink-500","from-indigo-500 to-purple-500","from-blue-400 to-teal-500","from-green-500 to-emerald-700","from-gray-700 to-gray-900"];let l=0;for(let c=0;c<i.length;c++)l=i.charCodeAt(c)+((l<<5)-l);return o[Math.abs(l)%o.length]};return r||t.length===0?a.jsx("section",{className:"py-12 relative z-10 border-t border-white/5 min-h-[200px] flex items-center justify-center",children:a.jsx("div",{className:"text-center text-gray-400 animate-pulse",children:a.jsx("p",{className:"font-mono text-sm",children:r?"Carregando acervo recuperado...":"Nenhum artigo disponÃ­vel no momento."})})}):a.jsxs("section",{className:"py-12 relative z-10 border-t border-white/5",children:[a.jsxs("div",{className:"flex items-center justify-between mb-8",children:[a.jsxs("div",{children:[a.jsxs("h2",{className:"text-3xl font-bold font-mono text-white mb-2 flex items-center gap-2",children:[a.jsx($t,{className:"text-green-400"}),"Acervos Digital"]}),a.jsx("p",{className:"text-gray-400 text-sm font-mono",children:"Ãšltimos artigos recuperados e restaurados do domÃ­nio original"})]}),a.jsxs(B,{to:"/acervo",className:"hidden md:flex items-center gap-2 text-sm font-bold text-green-400 hover:text-green-300 transition-colors",children:["VER TODOS ",a.jsx($e,{size:16})]})]}),a.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:t.map(i=>a.jsxs(B,{to:Ot(i.original_url),className:"group bg-[#0a0a0a] border border-white/10 rounded-xl overflow-hidden hover:border-green-500/50 transition-all duration-300 hover:-translate-y-2 hover:shadow-[0_10px_40px_-10px_rgba(34,197,94,0.2)] flex flex-col h-full",children:[a.jsxs("div",{className:`h-48 relative overflow-hidden bg-gradient-to-br ${n(i.id)}`,children:[a.jsx("div",{className:"absolute inset-0 bg-black/20 group-hover:bg-transparent transition-colors duration-300"}),a.jsx("div",{className:"absolute inset-0 opacity-30",style:{backgroundImage:"radial-gradient(circle at 2px 2px, rgba(255,255,255,0.2) 1px, transparent 0)",backgroundSize:"16px 16px"}}),a.jsx("div",{className:"absolute -bottom-6 -right-6 text-white/20 transform rotate-12 group-hover:scale-110 group-hover:rotate-0 transition-all duration-500",children:a.jsx(be,{className:"w-32 h-32"})}),a.jsx("div",{className:"absolute top-4 left-4",children:a.jsx("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-[10px] font-bold bg-black/40 text-white backdrop-blur-sm border border-white/10 uppercase tracking-wider",children:"Recuperado"})})]}),a.jsxs("div",{className:"p-6 flex-1 flex flex-col justify-between",children:[a.jsxs("div",{children:[a.jsx("h3",{className:"text-lg font-bold text-white mb-2 group-hover:text-green-400 transition-colors line-clamp-2 leading-tight",children:i.title}),a.jsx("p",{className:"text-xs text-gray-500 mb-4 font-mono truncate",children:Ot(i.original_url)})]}),a.jsxs("div",{className:"flex items-center justify-between mt-4 pt-4 border-t border-white/5",children:[a.jsxs("span",{className:"text-xs text-gray-500 flex items-center gap-1 font-mono",children:[a.jsx(lt,{className:"w-3 h-3"}),new Date(i.created_at).toLocaleDateString("pt-BR")]}),a.jsxs("span",{className:"text-green-500 text-xs font-bold flex items-center gap-1 group-hover:translate-x-1 transition-transform uppercase",children:["LER ARTIGO ",a.jsx($e,{className:"w-3 h-3"})]})]})]})]},i.id||Math.random().toString()))}),a.jsx("div",{className:"mt-8 text-center md:hidden",children:a.jsxs(B,{to:"/acervo",className:"inline-flex items-center gap-2 text-sm font-bold text-green-400 hover:text-green-300 transition-colors border border-green-500/30 px-6 py-3 rounded-full bg-green-500/10",children:["VER TODO O ACERVO ",a.jsx($e,{size:16})]})})]})},md=()=>{const t=f.useRef(null);return f.useEffect(()=>{const e=t.current;if(!e)return;const r=e.getContext("2d");if(!r)return;let s,n=window.scrollY;const i=()=>{e.width=window.innerWidth,e.height=window.innerHeight};window.addEventListener("resize",i),i();const o=d=>{if(d<=1)return!1;if(d<=3)return!0;if(d%2===0||d%3===0)return!1;for(let u=5;u*u<=d;u+=6)if(d%u===0||d%(u+2)===0)return!1;return!0},l=()=>{if(!e||!r)return;r.clearRect(0,0,e.width,e.height);const d=e.width/2,u=e.height/2,h=Math.max(4,4+n*.01),p=Math.min(e.width,e.height)/h*2;let m=d,g=u,b=1,v=0,x=0,w=0;r.fillStyle="rgba(0, 255, 65, 0.15)";const N=Math.min(p*p,2e4);for(let _=1;_<N;_++){if(o(_)){const j=Math.max(1,h*.4);r.beginPath(),r.arc(m,g,j,0,Math.PI*2),r.fill()}switch(v){case 0:m+=h;break;case 1:g-=h;break;case 2:m-=h;break;case 3:g+=h;break}if(w++,w===b&&(w=0,v=(v+1)%4,x++,x===2&&(x=0,b++)),(m<-100||m>e.width+100||g<-100||g>e.height+100)&&_>5e3)break}},c=()=>{n=window.scrollY,requestAnimationFrame(l)};return window.addEventListener("scroll",c),l(),()=>{window.removeEventListener("resize",i),window.removeEventListener("scroll",c),cancelAnimationFrame(s)}},[]),a.jsx("canvas",{ref:t,className:"fixed inset-0 z-0 pointer-events-none opacity-20 mix-blend-screen"})},xs=[{number:2,title:"O Ãšnico Par",desc:"O nÃºmero 2 Ã© o Ãºnico primo par. Ele Ã© a base da dualidade binÃ¡ria e fundamental para toda a computaÃ§Ã£o moderna.",formula:"p = 2",articleLink:"/teoria-dos-numeros-primos",quiz:{question:"Por que o nÃºmero 2 Ã© Ãºnico entre os primos?",options:["Ã‰ o Ãºnico par","Ã‰ o maior primo","Ã‰ divisÃ­vel por 3","NÃ£o Ã© inteiro"],correctIndex:0}},{number:3,title:"A Trindade",desc:"O primeiro primo Ã­mpar. Essencial em geometria (triÃ¢ngulos) e na definiÃ§Ã£o de estruturas estÃ¡veis.",formula:"p_2 = 3",articleLink:"/teoria-dos-numeros-primos",quiz:{question:"Qual polÃ­gono regular nÃ£o pode ser construÃ­do apenas com rÃ©gua e compasso?",options:["TriÃ¢ngulo (3)","PentÃ¡gono (5)","HeptÃ¡gono (7)","Quadrado (4)"],correctIndex:2}},{number:7,title:"O Primo da Sorte",desc:"Frequentemente associado Ã  mÃ­stica. Na matemÃ¡tica, 1/7 gera a dÃ­zima periÃ³dica 142857.",formula:"1/7 = 0.\\overline{142857}",articleLink:"/teoria-dos-numeros-primos",quiz:{question:"Quantos dÃ­gitos tem o perÃ­odo da dÃ­zima 1/7?",options:["4","5","6","7"],correctIndex:2}},{number:17,title:"O Primo de Gauss",desc:"Gauss provou que um polÃ­gono regular de 17 lados pode ser construÃ­do apenas com rÃ©gua e compasso.",formula:"F_2 = 2^{2^2} + 1 = 17",articleLink:"/artigos/teoria-numeros",quiz:{question:"O nÃºmero 17 Ã© um primo de qual tipo?",options:["Mersenne","Fermat","Sophie Germain","Twin Prime"],correctIndex:1}},{number:31,title:"Primo de Mersenne",desc:"Um primo de Mersenne usado em geradores de nÃºmeros pseudoaleatÃ³rios e hashing.",formula:"M_5 = 2^5 - 1 = 31",articleLink:"/artigos/criptografia",quiz:{question:"Qual a forma geral de um primo de Mersenne?",options:["2^n - 1","n^2 + 1","2n + 1","n! + 1"],correctIndex:0}},{number:137,title:"A Constante Fina",desc:"AproximaÃ§Ã£o do inverso da constante de estrutura fina (1/137), nÃºmero que intriga fÃ­sicos como Feynman.",formula:"\\alpha \\approx 1/137",articleLink:"/artigos/performance",quiz:{question:"Em qual Ã¡rea da fÃ­sica o nÃºmero 137 Ã© famoso?",options:["MecÃ¢nica ClÃ¡ssica","EletrodinÃ¢mica QuÃ¢ntica","TermodinÃ¢mica","Ã“ptica"],correctIndex:1}},{number:1009,title:"O Menor de 4 DÃ­gitos",desc:"O primeiro nÃºmero primo apÃ³s 1000. Marca a transiÃ§Ã£o para escalas maiores de primalidade.",formula:"p_{169} = 1009",articleLink:"/engenharia-performance-web",quiz:{question:"Quantos nÃºmeros primos existem menores que 1000?",options:["168","100","250","500"],correctIndex:0}}],pd=(t=0)=>{const e=new Date;e.setDate(e.getDate()+t);const s=Math.abs(e.getDate()+e.getMonth()*31+e.getFullYear()*365)%xs.length;return xs[s]},fd=()=>{const[t,e]=f.useState(0),[r,s]=f.useState(null),[n,i]=f.useState(!1),[o,l]=f.useState(!1),[c,d]=f.useState(null),[u,h]=f.useState(!1);f.useEffect(()=>{s(pd(t)),i(!1),l(!1),d(null),h(!1)},[t]);const p=async()=>{if(!r)return;const b=`Hoje no Primos.mat.br: ${r.title} (${r.number})
${r.desc}
Descubra mais em: https://primos.mat.br`;if(navigator.share)try{await navigator.share({title:`Primo do Dia: ${r.number}`,text:b,url:"https://primos.mat.br"})}catch{console.log("Share cancelled")}else navigator.clipboard.writeText(b),alert("Link copiado para a Ã¡rea de transferÃªncia!")},m=()=>{h(!0)};if(!r)return null;const g=t===0;return a.jsxs("div",{className:"max-w-4xl mx-auto w-full animate-slide-up [animation-delay:500ms] relative z-20",children:[a.jsxs("div",{className:"glass-panel p-8 rounded-xl border-l-4 border-l-primary relative overflow-hidden group transition-all duration-500 hover:shadow-[0_0_30px_rgba(0,255,127,0.15)]",children:[a.jsx("div",{className:"absolute top-0 right-0 p-4 opacity-5 group-hover:opacity-10 transition-opacity duration-500",children:a.jsx(lt,{size:180})}),a.jsx("div",{className:"absolute -bottom-10 -right-10 w-40 h-40 bg-primary/10 rounded-full blur-3xl group-hover:bg-primary/20 transition-all duration-500"}),a.jsxs("div",{className:"flex justify-between items-center mb-6 relative z-10",children:[a.jsxs("button",{onClick:()=>e(b=>b-1),className:"p-2 rounded-full hover:bg-white/10 text-gray-400 hover:text-white transition-colors flex items-center gap-1 text-sm",children:[a.jsx(qi,{size:16})," Anterior"]}),a.jsx("div",{className:"flex items-center gap-2",children:a.jsx("span",{className:`px-3 py-1 rounded-full text-xs font-mono border ${g?"bg-primary/20 text-primary border-primary/30":"bg-gray-800 text-gray-400 border-gray-700"}`,children:g?"HOJE":new Date(Date.now()+t*864e5).toLocaleDateString()})}),a.jsxs("button",{onClick:()=>e(b=>b+1),disabled:g,className:`p-2 rounded-full flex items-center gap-1 text-sm transition-colors ${g?"text-gray-700 cursor-not-allowed":"hover:bg-white/10 text-gray-400 hover:text-white"}`,children:["PrÃ³ximo ",a.jsx(Z,{size:16})]})]}),a.jsxs("div",{className:"relative z-10 flex flex-col md:flex-row gap-8 items-center md:items-start text-center md:text-left",children:[a.jsxs("div",{className:"flex flex-col items-center justify-center bg-black/40 backdrop-blur-md rounded-2xl p-8 min-w-[160px] border border-primary/20 shadow-inner group-hover:border-primary/40 transition-colors",children:[a.jsx("span",{className:"text-xs font-mono text-primary mb-2 tracking-widest",children:"ENTIDADE PRIMA"}),a.jsx("span",{className:"text-6xl font-bold text-white font-mono tracking-tighter animate-pulse-slow shadow-primary drop-shadow-[0_0_10px_rgba(0,255,127,0.5)]",children:r.number})]}),a.jsxs("div",{className:"space-y-4 flex-1",children:[a.jsxs("div",{children:[a.jsx("h3",{className:"text-3xl font-bold text-white font-mono mb-2 bg-clip-text text-transparent bg-gradient-to-r from-white to-gray-400",children:r.title}),r.formula&&a.jsx("div",{className:"inline-block px-3 py-1 rounded bg-white/5 border border-white/10 text-primary font-mono text-sm mb-3",children:r.formula}),a.jsx("p",{className:"text-gray-300 text-base leading-relaxed",children:r.desc})]}),a.jsxs("div",{className:"flex flex-wrap gap-3 justify-center md:justify-start pt-2",children:[a.jsxs("button",{onClick:()=>l(!0),className:"flex items-center gap-2 px-4 py-2 rounded-lg bg-primary text-black font-bold hover:bg-primary-dark transition-all shadow hover:shadow-[0_0_15px_rgba(0,255,127,0.4)]",children:[a.jsx($t,{size:18}),"Ler Artigo Completo"]}),r.quiz&&a.jsxs("button",{onClick:()=>i(!0),className:"flex items-center gap-2 px-4 py-2 rounded-lg bg-white/10 text-white hover:bg-white/20 transition-all border border-white/10",children:[a.jsx(we,{size:18}),"Quiz RÃ¡pido"]}),a.jsx("button",{onClick:p,className:"flex items-center gap-2 px-4 py-2 rounded-lg bg-transparent border border-white/20 text-gray-300 hover:border-primary hover:text-primary transition-all",children:a.jsx(Rr,{size:18})})]})]})]})]}),n&&r.quiz&&a.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4 bg-black/80 backdrop-blur-sm animate-in fade-in duration-200",children:a.jsxs("div",{className:"bg-gray-900 border border-white/10 rounded-2xl p-6 max-w-md w-full shadow-2xl relative animate-in zoom-in-95 duration-200",children:[a.jsx("button",{onClick:()=>i(!1),className:"absolute top-4 right-4 text-gray-500 hover:text-white",children:a.jsx(rr,{size:20})}),a.jsxs("div",{className:"text-center mb-6",children:[a.jsx("div",{className:"w-12 h-12 rounded-full bg-primary/10 flex items-center justify-center mx-auto mb-3 text-primary",children:a.jsx(we,{size:24})}),a.jsx("h3",{className:"text-xl font-bold text-white",children:"Desafio do Primo"}),a.jsxs("p",{className:"text-gray-400 text-sm mt-1",children:["Teste seu conhecimento sobre o nÃºmero ",r.number]})]}),a.jsxs("div",{className:"mb-6",children:[a.jsx("p",{className:"text-white text-lg font-medium mb-4",children:r.quiz.question}),a.jsx("div",{className:"space-y-2",children:r.quiz.options.map((b,v)=>{let x="w-full p-3 rounded-lg text-left border transition-all ";return u?v===r.quiz.correctIndex?x+="bg-green-500/20 border-green-500 text-green-400":v===c?x+="bg-red-500/20 border-red-500 text-red-400":x+="bg-white/5 border-white/10 text-gray-500 opacity-50":x+=c===v?"bg-primary/20 border-primary text-primary":"bg-white/5 border-white/10 text-gray-300 hover:bg-white/10 hover:border-white/30",a.jsx("button",{onClick:()=>!u&&d(v),disabled:u,className:x,children:a.jsxs("div",{className:"flex justify-between items-center",children:[a.jsx("span",{children:b}),u&&v===r.quiz.correctIndex&&a.jsx(Di,{size:18}),u&&v===c&&v!==r.quiz.correctIndex&&a.jsx(ar,{size:18})]})},v)})})]}),u?a.jsx("div",{className:`p-4 rounded-lg text-center mb-4 ${c===r.quiz.correctIndex?"bg-green-500/10 text-green-400":"bg-red-500/10 text-red-400"}`,children:c===r.quiz.correctIndex?a.jsxs(a.Fragment,{children:[a.jsx("p",{className:"font-bold",children:"Correto! ðŸŽ‰"}),a.jsx("p",{className:"text-sm mt-1",children:"VocÃª domina os nÃºmeros primos."})]}):a.jsxs(a.Fragment,{children:[a.jsx("p",{className:"font-bold",children:"Incorreto ðŸ˜•"}),a.jsxs("p",{className:"text-sm mt-1",children:["A resposta certa era: ",r.quiz.options[r.quiz.correctIndex]]})]})}):a.jsx("button",{onClick:m,disabled:c===null,className:"w-full py-3 rounded-lg bg-primary text-black font-bold hover:bg-primary-dark disabled:opacity-50 disabled:cursor-not-allowed transition-all",children:"Confirmar Resposta"}),u&&a.jsx("button",{onClick:()=>i(!1),className:"w-full py-3 rounded-lg bg-white/10 text-white font-bold hover:bg-white/20 transition-all mt-2",children:"Fechar"})]})}),o&&a.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4 bg-black/80 backdrop-blur-sm animate-in fade-in duration-200",children:a.jsxs("div",{className:"bg-gray-900 border border-white/10 rounded-2xl p-6 max-w-2xl w-full shadow-2xl relative animate-in zoom-in-95 duration-200 max-h-[90vh] overflow-y-auto",children:[a.jsx("button",{onClick:()=>l(!1),className:"absolute top-4 right-4 text-gray-500 hover:text-white",children:a.jsx(rr,{size:20})}),a.jsx("div",{className:"mb-6 border-b border-white/10 pb-4",children:a.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[a.jsx("div",{className:"w-10 h-10 rounded-full bg-primary/10 flex items-center justify-center text-primary",children:a.jsx(wa,{size:20})}),a.jsxs("div",{children:[a.jsx("h3",{className:"text-2xl font-bold text-white",children:"Sobre o Card & O NÃºmero"}),a.jsx("p",{className:"text-gray-400 font-mono text-sm",children:"ExplicaÃ§Ã£o Detalhada do Daily Prime"})]})]})}),a.jsxs("div",{className:"space-y-6 text-gray-300 leading-relaxed",children:[a.jsxs("div",{className:"bg-blue-500/5 p-5 rounded-xl border border-blue-500/10",children:[a.jsxs("h4",{className:"text-blue-400 font-bold mb-3 flex items-center gap-2 text-lg",children:[a.jsx(Dt,{size:18})," O Que Este Card Faz?"]}),a.jsxs("p",{className:"mb-2",children:["Este Ã© o ",a.jsx("strong",{children:"Daily Prime Card"}),' (Card do Primo do Dia). Sua funÃ§Ã£o Ã© apresentar, a cada 24 horas, uma "Entidade Prima" diferente para estudo e apreciaÃ§Ã£o.']}),a.jsxs("ul",{className:"list-disc pl-5 space-y-1 text-gray-400 text-sm",children:[a.jsxs("li",{children:[a.jsx("strong",{children:"Curadoria DiÃ¡ria:"})," Selecionamos nÃºmeros com propriedades matemÃ¡ticas Ãºnicas."]}),a.jsxs("li",{children:[a.jsx("strong",{children:"NavegaÃ§Ã£o Temporal:"})," Use as setas (Anterior/PrÃ³ximo) para viajar no tempo e ver os primos de dias passados."]}),a.jsxs("li",{children:[a.jsx("strong",{children:"Desafio Interativo:"}),' O botÃ£o "Quiz RÃ¡pido" testa se vocÃª entendeu a propriedade especial do nÃºmero.']}),a.jsxs("li",{children:[a.jsx("strong",{children:"Compartilhamento:"})," O botÃ£o de share permite enviar essa descoberta para amigos."]})]})]}),a.jsxs("div",{children:[a.jsxs("h4",{className:"text-primary font-bold mb-3 flex items-center gap-2 text-lg",children:[a.jsx(ye,{size:18})," O Conceito do NÃºmero ",r.number]}),a.jsxs("div",{className:"bg-white/5 p-4 rounded-lg border border-white/10 mb-4",children:[a.jsxs("p",{className:"text-white italic mb-2",children:['"',r.desc,'"']}),a.jsxs("p",{className:"text-sm text-gray-400",children:["O nÃºmero ",a.jsx("strong",{children:r.number})," nÃ£o Ã© apenas um nÃºmero Ã­mpar (ou par, no caso do 2). Ele Ã© um ",a.jsx("strong",{children:r.title}),"."]})]}),a.jsxs("p",{children:["Na matemÃ¡tica, este nÃºmero Ã© especial porque:",r.number===2?" Ele quebra o padrÃ£o. Todos os outros primos sÃ£o Ã­mpares. O 2 Ã© o Ãºnico par, tornando-se a base fundamental da lÃ³gica binÃ¡ria dos computadores.":" Ele representa uma classe de primos que possuem propriedades alÃ©m da simples indivisibilidade, sendo crucial para teorias avanÃ§adas e criptografia."]})]}),a.jsxs("div",{className:"bg-gray-800/50 p-4 rounded-lg border border-white/5",children:[a.jsx("h4",{className:"text-white font-bold mb-2 text-sm uppercase tracking-wider",children:"Resumo TÃ©cnico"}),a.jsxs("ul",{className:"grid grid-cols-1 md:grid-cols-2 gap-2 text-sm",children:[a.jsxs("li",{className:"flex justify-between border-b border-white/5 pb-1",children:[a.jsx("span",{children:"Entidade:"})," ",a.jsx("span",{className:"text-primary font-mono font-bold",children:r.number})]}),a.jsxs("li",{className:"flex justify-between border-b border-white/5 pb-1",children:[a.jsx("span",{children:"Categoria:"})," ",a.jsx("span",{className:"text-white",children:r.title})]}),a.jsxs("li",{className:"flex justify-between border-b border-white/5 pb-1",children:[a.jsx("span",{children:"FunÃ§Ã£o:"})," ",a.jsx("span",{className:"text-white",children:"Primo Racional"})]}),a.jsxs("li",{className:"flex justify-between border-b border-white/5 pb-1",children:[a.jsx("span",{children:"Status:"})," ",a.jsx("span",{className:"text-green-400 font-bold",children:"Verificado & Validado"})]})]})]})]}),a.jsx("div",{className:"mt-8 flex justify-end",children:a.jsx("button",{onClick:()=>l(!1),className:"px-6 py-2 rounded-lg bg-white/10 text-white font-bold hover:bg-white/20 transition-colors border border-white/5",children:"Entendi, Fechar"})})]})})]})},gd=()=>{const t=Pt(),[e,r]=f.useState({latency:0,uptime:"0h 0m",status:"OFFLINE",discoveries:1240});return f.useEffect(()=>{const s=Date.now()-81e5,n=async()=>{const o=performance.now();try{await fetch("/",{method:"HEAD",cache:"no-store"});const l=performance.now(),c=Math.round(l-o),u=Date.now()-s,h=Math.floor(u/(1e3*60*60)),p=Math.floor(u%(1e3*60*60)/(1e3*60));r(m=>({...m,latency:c,status:"ONLINE",uptime:`${h}h ${p}m`,discoveries:m.discoveries+(Math.random()>.7?1:0)}))}catch{r(l=>({...l,status:"OFFLINE",latency:0}))}};n();const i=setInterval(n,3e3);return()=>clearInterval(i)},[]),a.jsxs("div",{onClick:()=>t("/telemetria-sistema"),className:"border-y border-white/5 py-12 mt-12 bg-black/20 backdrop-blur-sm animate-fade-in cursor-pointer hover:bg-white/5 transition-colors group",children:[a.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-8 text-center",children:[{label:"DISPONIBILIDADE",value:e.uptime},{label:"LATÃŠNCIA REAL",value:e.status==="ONLINE"?`${e.latency}ms`:"--"},{label:"PRIMOS VERIFICADOS",value:e.discoveries.toLocaleString()},{label:"STATUS DO SISTEMA",value:e.status,color:e.status==="ONLINE"?"text-green-500":"text-red-500"}].map((s,n)=>a.jsxs("div",{className:"flex flex-col gap-1",children:[a.jsx("span",{className:`text-3xl font-mono font-bold ${s.color||"text-white"} group-hover:scale-105 transition-transform duration-300`,children:s.value}),a.jsxs("span",{className:"text-xs text-primary/60 font-mono tracking-widest uppercase flex items-center justify-center gap-1",children:[s.label,s.label==="STATUS DO SISTEMA"&&a.jsx("span",{className:`w-2 h-2 rounded-full ${e.status==="ONLINE"?"bg-green-500 animate-pulse":"bg-red-500"}`})]})]},n))}),a.jsx("div",{className:"text-center mt-4 opacity-0 group-hover:opacity-100 transition-opacity duration-300",children:a.jsx("span",{className:"text-[10px] text-primary font-mono border border-primary/30 px-2 py-1 rounded",children:"CLIQUE PARA VER RELATÃ“RIO TÃ‰CNICO COMPLETO"})})]})},xd=()=>{const[t,e]=f.useState([]),[r,s]=f.useState(null),n=async()=>{const i=await cd();e(i)};return f.useEffect(()=>(n(),window.addEventListener("dossier-updated",n),()=>window.removeEventListener("dossier-updated",n)),[]),t.length===0?null:a.jsxs("section",{className:"py-12 relative z-10",children:[a.jsx("div",{className:"flex items-center justify-between mb-8",children:a.jsxs("div",{children:[a.jsxs("h2",{className:"text-3xl font-bold font-mono text-white mb-2 flex items-center gap-2",children:[a.jsx($t,{className:"text-purple-400"}),"Biblioteca de DossiÃªs"]}),a.jsxs("p",{className:"text-gray-400 text-sm font-mono",children:["Acervo de artigos matemÃ¡ticos gerados (",t.length," volumes)"]})]})}),a.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:t.map(i=>a.jsxs("article",{onClick:()=>s(i),className:"group cursor-pointer bg-[#0a0a0a] border border-white/10 hover:border-purple-500/50 rounded-xl overflow-hidden transition-all duration-500 hover:-translate-y-2 hover:shadow-[0_10px_40px_-10px_rgba(168,85,247,0.2)] flex flex-col h-full",children:[a.jsxs("div",{className:`h-48 w-full relative overflow-hidden ${i.isPrime?"bg-gradient-to-br from-blue-600 via-indigo-800 to-slate-900":"bg-gradient-to-br from-red-600 via-orange-800 to-slate-900"}`,children:[a.jsx("div",{className:"absolute inset-0 opacity-40",style:{backgroundImage:"radial-gradient(circle at 2px 2px, rgba(255,255,255,0.2) 1px, transparent 0)",backgroundSize:"20px 20px"}}),a.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-[#0a0a0a] via-transparent to-transparent opacity-60"}),a.jsxs("div",{className:"absolute inset-0 flex flex-col items-center justify-center p-6 z-10",children:[a.jsx("div",{className:`w-16 h-16 rounded-full flex items-center justify-center mb-3 border-2 ${i.isPrime?"border-white/30 bg-blue-500/20 text-white shadow-[0_0_15px_rgba(59,130,246,0.5)]":"border-white/30 bg-red-500/20 text-white shadow-[0_0_15px_rgba(239,68,68,0.5)]"} backdrop-blur-md group-hover:scale-110 transition-transform duration-500`,children:a.jsx(Gs,{size:28})}),a.jsx("span",{className:"text-3xl font-bold font-mono text-white tracking-tighter drop-shadow-md",children:i.number})]}),a.jsx("div",{className:"absolute top-4 right-4 z-20",children:i.isPrime?a.jsxs("span",{className:"bg-blue-500/20 backdrop-blur-md text-white text-[10px] font-bold px-3 py-1 rounded-full border border-blue-400/30 flex items-center gap-1 shadow-lg",children:[a.jsx(kt,{size:10,className:"text-blue-300"})," PRIMO"]}):a.jsxs("span",{className:"bg-red-500/20 backdrop-blur-md text-white text-[10px] font-bold px-3 py-1 rounded-full border border-red-400/30 flex items-center gap-1 shadow-lg",children:[a.jsx(Js,{size:10,className:"text-red-300"})," COMPOSTO"]})})]}),a.jsxs("div",{className:"p-6 border-t border-white/5 flex-1 flex flex-col justify-between",children:[a.jsxs("div",{children:[a.jsxs("h3",{className:"text-lg font-bold text-white mb-2 font-mono leading-tight group-hover:text-purple-400 transition-colors",children:["DossiÃª MatemÃ¡tico do NÃºmero ",i.number]}),a.jsxs("p",{className:"text-xs text-gray-500 mb-4 font-mono flex items-center gap-2",children:[a.jsx(ur,{size:12}),"Gerado em ",new Date(i.timestamp).toLocaleDateString()]})]}),a.jsxs("div",{className:"flex items-center justify-between mt-4",children:[a.jsxs("span",{className:"text-xs text-gray-600 font-mono bg-white/5 px-2 py-1 rounded",children:["VOLUME #",i.id.slice(0,4)]}),a.jsxs("span",{className:"flex items-center gap-1 text-sm font-bold text-white group-hover:translate-x-1 transition-transform",children:["LER ARTIGO ",a.jsx(Z,{size:16,className:"text-purple-500"})]})]})]})]},i.id))}),r&&a.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4 bg-black/80 backdrop-blur-sm animate-in fade-in duration-200",children:a.jsxs("div",{className:"bg-[#0a0a0a] border border-white/10 rounded-2xl w-full max-w-3xl max-h-[90vh] overflow-y-auto shadow-2xl relative animate-in zoom-in-95 duration-200 custom-scrollbar",children:[a.jsx("button",{onClick:()=>s(null),className:"absolute top-4 right-4 text-gray-400 hover:text-white p-2 hover:bg-white/10 rounded-full transition-colors z-10",children:a.jsx(rr,{size:24})}),a.jsxs("div",{className:"relative h-48 overflow-hidden",children:[a.jsx("div",{className:`absolute inset-0 ${r.isPrime?"bg-gradient-to-r from-primary/10 via-blue-900/20 to-black":"bg-gradient-to-r from-red-900/20 via-orange-900/10 to-black"}`}),a.jsxs("div",{className:"absolute bottom-0 left-0 p-8 w-full bg-gradient-to-t from-[#0a0a0a] to-transparent",children:[a.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[r.isPrime?a.jsx("span",{className:"bg-primary text-black font-bold px-3 py-1 rounded text-sm shadow-[0_0_15px_rgba(0,255,127,0.4)]",children:"PRIMO CONFIRMADO"}):a.jsx("span",{className:"bg-red-500 text-white font-bold px-3 py-1 rounded text-sm shadow-[0_0_15px_rgba(239,68,68,0.4)]",children:"NÃšMERO COMPOSTO"}),a.jsxs("span",{className:"text-gray-400 font-mono text-sm flex items-center gap-1",children:[a.jsx(ur,{size:14}),new Date(r.timestamp).toLocaleString()]})]}),a.jsx("h2",{className:"text-5xl font-bold text-white font-mono tracking-tighter",children:r.number})]})]}),a.jsxs("div",{className:"p-8 space-y-8",children:[a.jsx("div",{className:"bg-white/5 rounded-xl p-6 border border-white/5",children:a.jsxs("div",{className:"flex items-start gap-4",children:[a.jsx(we,{className:"text-purple-400 shrink-0 mt-1",size:24}),a.jsxs("div",{children:[a.jsx("h3",{className:"text-lg font-bold text-purple-400 mb-2 font-mono",children:"AnÃ¡lise da InteligÃªncia Artificial"}),a.jsx("p",{className:"text-gray-300 leading-relaxed text-lg",children:r.aiInsight.message}),r.aiInsight.explanation&&a.jsx("p",{className:"text-gray-400 mt-2 text-sm border-l-2 border-purple-500/30 pl-3",children:r.aiInsight.explanation})]})]})}),r.aiInsight.formula&&a.jsxs("div",{children:[a.jsxs("h4",{className:"text-sm font-bold text-gray-500 uppercase tracking-widest mb-3 flex items-center gap-2",children:[a.jsx(kt,{size:14})," Prova MatemÃ¡tica"]}),a.jsx("div",{className:"bg-black rounded-lg p-6 border border-blue-500/20 font-mono text-blue-300 text-center text-xl overflow-x-auto",children:r.aiInsight.formula})]}),r.aiInsight.fullArticle?a.jsxs("div",{className:"space-y-8 animate-in fade-in slide-in-from-bottom-4 duration-500",children:[a.jsxs("div",{className:"border-b border-white/10 pb-6",children:[a.jsx("h1",{className:"text-3xl md:text-4xl font-bold text-white mb-4 font-mono leading-tight",children:r.aiInsight.fullArticle.title}),a.jsxs("div",{className:"flex items-center gap-4 text-sm text-gray-500 font-mono",children:[a.jsxs("span",{children:[r.aiInsight.fullArticle.wordCount," palavras"]}),a.jsx("span",{children:"â€¢"}),a.jsxs("span",{children:["Leitura: ~",Math.ceil(r.aiInsight.fullArticle.wordCount/200)," min"]})]})]}),r.aiInsight.fullArticle.sections.map((i,o)=>a.jsxs("div",{className:"prose prose-invert max-w-none",children:[a.jsxs("h3",{className:"text-xl font-bold text-purple-400 mb-3 flex items-center gap-2",children:[a.jsxs("span",{className:"text-white/20",children:["0",o+1,"."]})," ",i.title]}),a.jsx("div",{className:"text-gray-300 leading-relaxed whitespace-pre-line bg-white/5 p-6 rounded-xl border border-white/5 hover:border-purple-500/30 transition-colors",children:i.content})]},o)),a.jsxs("div",{className:"bg-black/40 rounded-xl p-8 border border-white/10",children:[a.jsxs("h3",{className:"text-xl font-bold text-white mb-6 flex items-center gap-2",children:[a.jsx(we,{className:"text-primary"})," Perguntas Frequentes"]}),a.jsx("div",{className:"space-y-4",children:r.aiInsight.fullArticle.faq.map((i,o)=>a.jsxs("details",{className:"group bg-white/5 rounded-lg open:bg-white/10 transition-all",children:[a.jsxs("summary",{className:"flex items-center justify-between p-4 cursor-pointer font-bold text-gray-200 hover:text-white list-none",children:[i.question,a.jsx(Z,{className:"transform group-open:rotate-90 transition-transform text-gray-500"})]}),a.jsx("div",{className:"px-4 pb-4 text-gray-400 leading-relaxed border-t border-white/5 pt-4",children:i.answer})]},o))})]})]}):r.aiInsight.report&&a.jsxs("div",{children:[a.jsxs("h4",{className:"text-sm font-bold text-gray-500 uppercase tracking-widest mb-3 flex items-center gap-2",children:[a.jsx(be,{size:14})," RelatÃ³rio de Processamento (Legacy)"]}),a.jsx("div",{className:"bg-black/30 rounded-xl p-6 border border-white/5 space-y-4 font-mono text-sm",children:r.aiInsight.report.map((i,o)=>a.jsxs("div",{className:"flex gap-3 text-gray-400",children:[a.jsx("span",{className:"text-purple-500/50 select-none",children:(o+1).toString().padStart(2,"0")}),a.jsx("span",{className:i.includes("CONCLUSÃƒO")||i.includes("RESULTADO")?"text-white font-bold":"",children:i.replace(/^\d+\.\s/,"")})]},o))})]}),a.jsxs("div",{className:"grid grid-cols-2 gap-4 border-t border-white/5 pt-6",children:[a.jsxs("div",{className:"p-4 bg-white/5 rounded-lg text-center",children:[a.jsx("p",{className:"text-xs text-gray-500 uppercase",children:"Tempo de ExecuÃ§Ã£o"}),a.jsxs("p",{className:"text-xl font-mono text-white",children:[r.executionTime.toFixed(4),"ms"]})]}),a.jsxs("div",{className:"p-4 bg-white/5 rounded-lg text-center",children:[a.jsx("p",{className:"text-xs text-gray-500 uppercase",children:"Complexidade"}),a.jsx("p",{className:"text-xl font-mono text-white",children:"O(âˆšn)"})]})]}),a.jsxs("button",{className:"w-full bg-primary/10 hover:bg-primary/20 text-primary font-bold py-4 rounded-xl border border-primary/20 transition-all flex items-center justify-center gap-2 group",children:[a.jsx(Rr,{size:20}),"COMPARTILHAR DOSSIÃŠ"]})]})]})})]})},bs=()=>a.jsxs("div",{className:"flex flex-col gap-20 py-12 relative",children:[a.jsx(md,{}),a.jsxs("div",{className:"text-center space-y-6 relative",children:[a.jsx("div",{className:"absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 w-[500px] h-[500px] bg-primary/5 rounded-full blur-[100px] pointer-events-none"}),a.jsxs("div",{className:"inline-flex items-center gap-2 px-3 py-1 rounded-full border border-primary/20 bg-primary/5 text-primary text-xs font-mono mb-4 animate-fade-in",children:[a.jsx("span",{className:"w-2 h-2 rounded-full bg-primary animate-pulse"}),"SYSTEM ONLINE // V1.0.5"]}),a.jsxs("h1",{className:"text-5xl md:text-7xl font-bold font-mono tracking-tighter text-white animate-slide-up relative z-10",children:["PRIMOS",a.jsx("span",{className:"text-primary",children:".MAT"}),".BR"]}),a.jsxs("p",{className:"text-muted max-w-2xl mx-auto font-mono text-sm md:text-base leading-relaxed animate-slide-up [animation-delay:200ms] relative z-10",children:["Infraestrutura digital de alta precisÃ£o para exploraÃ§Ã£o matemÃ¡tica.",a.jsx("br",{className:"hidden md:block"}),"IdentificaÃ§Ã£o de padrÃµes primais em tempo real com seguranÃ§a criptogrÃ¡fica."]})]}),a.jsx("div",{className:"animate-slide-up [animation-delay:400ms] relative z-20",children:a.jsx(ud,{})}),a.jsx(fd,{}),a.jsx("div",{className:"grid md:grid-cols-3 gap-6 mt-12 animate-slide-up [animation-delay:600ms]",children:[{icon:a.jsx(Ye,{className:"text-primary",size:24}),title:"Criptografia",desc:"FundamentaÃ§Ã£o matemÃ¡tica para protocolos de seguranÃ§a digital modernos.",route:"/criptografia-rsa-seguranca"},{icon:a.jsx(Lt,{className:"text-primary",size:24}),title:"Teoria dos NÃºmeros",desc:"ExploraÃ§Ã£o pura das propriedades dos inteiros e sua distribuiÃ§Ã£o.",route:"/teoria-dos-numeros-primos"},{icon:a.jsx(Dt,{className:"text-primary",size:24}),title:"Performance",desc:"Algoritmos otimizados para processamento client-side instantÃ¢neo.",route:"/engenharia-performance-web"}].map((t,e)=>a.jsxs(B,{to:t.route,className:"glass-panel p-8 rounded-xl hover:border-primary/30 transition-all duration-300 group hover:-translate-y-1 block",children:[a.jsx("div",{className:"mb-4 p-3 bg-primary/5 rounded-lg w-fit border border-primary/10 group-hover:border-primary/30 transition-colors",children:t.icon}),a.jsx("h3",{className:"text-white font-mono font-bold mb-3 text-lg group-hover:text-primary transition-colors",children:t.title}),a.jsx("p",{className:"text-sm text-gray-400 leading-relaxed",children:t.desc})]},e))}),a.jsx(gd,{}),a.jsx(xd,{}),a.jsx(hd,{})]}),Pr=({type:t,title:e,duration:r,mediaUrl:s})=>{const[n,i]=f.useState(!1),[o,l]=f.useState(!1),c=f.useRef(null),d=f.useRef(null),u=s||(t==="audio"?"https://www.soundhelix.com/examples/mp3/SoundHelix-Song-1.mp3":"https://interactive-examples.mdn.mozilla.net/media/cc0-videos/flower.webm"),h=()=>{t==="audio"&&c.current?(n?c.current.pause():c.current.play().catch(()=>l(!0)),i(!n)):t==="video"&&d.current&&(n?d.current.pause():d.current.play().catch(()=>l(!0)),i(!n))},p=()=>{i(!1)};return a.jsxs("div",{className:`w-full rounded-xl overflow-hidden border border-white/10 ${t==="audio"?"bg-white/5":"bg-black/40"} mb-8 shadow-lg`,children:[a.jsxs("div",{className:"flex items-center justify-between px-4 py-2 bg-primary/10 border-b border-white/5",children:[a.jsxs("div",{className:"flex items-center gap-2 text-primary text-xs font-mono uppercase tracking-wider",children:[t==="audio"?a.jsx(Zi,{size:12}):a.jsx(So,{size:12}),t==="audio"?"VersÃ£o em Ãudio (IA Narrator)":"ExplicaÃ§Ã£o DidÃ¡tica (IA Video)"]}),!s&&a.jsxs("div",{className:"flex items-center gap-1 text-yellow-500 text-[10px] font-mono",children:[a.jsx(ar,{size:10}),"DEMO MODE"]})]}),a.jsx("div",{className:"p-6",children:o?a.jsxs("div",{className:"text-red-400 text-sm flex items-center gap-2 bg-red-500/10 p-4 rounded-lg",children:[a.jsx(ar,{size:16}),"Erro ao carregar mÃ­dia. Verifique a conexÃ£o ou a URL do arquivo."]}):t==="video"?a.jsxs("div",{className:"aspect-video w-full bg-black rounded-lg border border-white/10 overflow-hidden relative group",children:[a.jsx("video",{ref:d,src:u,className:"w-full h-full object-cover",controls:!0,poster:"https://images.unsplash.com/photo-1635070041078-e363dbe005cb?auto=format&fit=crop&q=80&w=1000",onPlay:()=>i(!0),onPause:()=>i(!1),onError:()=>l(!0),children:"Seu navegador nÃ£o suporta a tag de vÃ­deo."}),!n&&a.jsxs("div",{className:"absolute inset-0 flex flex-col items-center justify-center bg-black/50 pointer-events-none",children:[a.jsx("div",{className:"w-16 h-16 rounded-full bg-primary/20 backdrop-blur-sm flex items-center justify-center mb-4 border border-primary/50",children:a.jsx(Vr,{size:32,className:"text-primary ml-1"})}),a.jsx("p",{className:"text-white font-bold text-lg drop-shadow-md",children:e}),a.jsx("p",{className:"text-gray-300 text-sm drop-shadow-md",children:r})]})]}):a.jsxs("div",{className:"flex items-center gap-4",children:[a.jsx("audio",{ref:c,src:u,onEnded:p,onError:()=>l(!0)}),a.jsx("button",{onClick:h,className:"w-12 h-12 rounded-full bg-primary text-black flex items-center justify-center hover:bg-primary/90 transition-colors shrink-0 shadow-[0_0_15px_rgba(0,255,127,0.3)]",children:n?a.jsx(co,{size:20}):a.jsx(Vr,{size:20,className:"ml-1"})}),a.jsxs("div",{className:"flex-1 space-y-2 min-w-0",children:[a.jsxs("div",{className:"flex justify-between text-sm",children:[a.jsx("span",{className:"text-white font-medium truncate pr-2",children:e}),a.jsx("span",{className:"text-gray-400 text-xs font-mono",children:r})]}),a.jsx("div",{className:"flex items-end gap-[2px] h-8 opacity-80 overflow-hidden mask-linear-fade",children:[...Array(40)].map((m,g)=>a.jsx("div",{className:`w-1 bg-primary rounded-t-sm transition-all duration-300 origin-bottom ${n?"animate-music-bar":"h-1"}`,style:{height:n?`${Math.max(10,Math.random()*100)}%`:"4px",animationDelay:`${g*.05}s`,opacity:n?1:.3}},g))})]}),a.jsx(ko,{size:20,className:"text-gray-400 hidden sm:block"})]})})]})},bd=()=>(f.useEffect(()=>{window.scrollTo(0,0)},[]),a.jsx("div",{className:"max-w-4xl mx-auto py-12 px-6",children:a.jsxs("article",{itemScope:!0,itemType:"http://schema.org/TechArticle",className:"prose prose-invert prose-lg max-w-none",children:[a.jsxs("nav",{className:"flex items-center gap-2 text-sm text-gray-500 mb-8 font-mono",children:[a.jsx(B,{to:"/",className:"hover:text-primary transition-colors",children:"Home"}),a.jsx(Z,{size:14}),a.jsx("span",{className:"text-primary",children:"Artigos"}),a.jsx(Z,{size:14}),a.jsx("span",{className:"text-white",children:"Criptografia"})]}),a.jsxs("header",{className:"mb-12",children:[a.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[a.jsx("span",{className:"bg-primary/20 text-primary px-3 py-1 rounded-full text-xs font-bold uppercase tracking-wider",children:"SeguranÃ§a Digital"}),a.jsxs("span",{className:"text-gray-500 text-xs flex items-center gap-1",children:[a.jsx(sr,{size:12}),"Leitura: 12 min"]})]}),a.jsx("h1",{itemProp:"headline",className:"text-4xl md:text-5xl font-bold mb-6 bg-gradient-to-r from-white to-gray-400 bg-clip-text text-transparent",children:"FundamentaÃ§Ã£o MatemÃ¡tica para Protocolos de SeguranÃ§a Digital Modernos"}),a.jsx("p",{className:"text-xl text-gray-400 leading-relaxed",children:"Uma anÃ¡lise profunda sobre como a Teoria dos NÃºmeros protege trilhÃµes de dÃ³lares diariamente, do RSA Ã s Curvas ElÃ­pticas e a era PÃ³s-QuÃ¢ntica."})]}),a.jsx("section",{className:"mb-12",children:a.jsx(Pr,{type:"audio",title:"NarraÃ§Ã£o Neural (Pt-BR)",duration:"12:45",mediaUrl:"/audio/criptografia.mp3"})}),a.jsxs("div",{itemProp:"articleBody",className:"space-y-8 text-gray-300",children:[a.jsx("p",{children:"A criptografia moderna nÃ£o Ã© apenas sobre esconder segredos; Ã© a espinha dorsal de confianÃ§a da internet. Cada vez que vocÃª acessa sua conta bancÃ¡ria, envia uma mensagem no WhatsApp ou realiza uma compra online, vocÃª estÃ¡ confiando em teoremas matemÃ¡ticos descobertos hÃ¡ sÃ©culos, agora aplicados em silÃ­cio. Neste artigo tÃ©cnico, vamos dissecar os mecanismos que tornam isso possÃ­vel, focando na elegÃ¢ncia matemÃ¡tica e na implementaÃ§Ã£o prÃ¡tica."}),a.jsxs("h2",{className:"text-2xl font-bold text-white flex items-center gap-2 mt-12",children:[a.jsx(so,{className:"text-primary"}),"1. A RevoluÃ§Ã£o da Chave PÃºblica"]}),a.jsx("p",{children:"AtÃ© meados da dÃ©cada de 1970, a criptografia era simÃ©trica: para Alice enviar uma mensagem segura para Bob, eles precisavam ter trocado previamente uma chave secreta. Isso gerava um problema logÃ­stico massivo. Como estabelecer uma chave segura em um canal inseguro?"}),a.jsx("p",{children:"A soluÃ§Ã£o veio com Diffie, Hellman e Merkle, e posteriormente com Rivest, Shamir e Adleman (RSA). A ideia revolucionÃ¡ria foi dividir a chave em duas partes: uma pÃºblica (para encriptar) e uma privada (para decriptar)."}),a.jsxs("div",{className:"bg-black/40 border border-white/10 p-6 rounded-lg my-6",children:[a.jsx("h4",{className:"text-white font-bold mb-2",children:"O Conceito da FunÃ§Ã£o Trapdoor"}),a.jsx("p",{className:"text-sm text-gray-400 mb-4",children:"Imagine uma caixa de correio. Qualquer pessoa pode colocar uma carta nela (Chave PÃºblica), mas apenas o carteiro com a chave mestra pode abri-la e retirar as cartas (Chave Privada). Matematicamente, isso depende de funÃ§Ãµes que sÃ£o fÃ¡ceis de calcular em uma direÃ§Ã£o, mas computacionalmente inviÃ¡veis de reverter sem uma informaÃ§Ã£o especial."})]}),a.jsxs("h2",{className:"text-2xl font-bold text-white flex items-center gap-2 mt-12",children:[a.jsx(Ye,{className:"text-primary"}),"2. O Algoritmo RSA: MatemÃ¡tica Pura"]}),a.jsx("p",{children:"O RSA baseia sua seguranÃ§a na dificuldade de fatorar nÃºmeros inteiros grandes. Se eu te der o nÃºmero 15, vocÃª rapidamente me diz que seus fatores primos sÃ£o 3 e 5. Mas se eu te der um nÃºmero com 600 dÃ­gitos, nem todos os computadores da Terra trabalhando juntos por um milhÃ£o de anos conseguiriam encontrar seus fatores primos a tempo."}),a.jsx("h3",{className:"text-xl font-bold text-white mt-8 mb-4",children:"Gerando Chaves RSA"}),a.jsx("p",{children:"O processo segue passos matemÃ¡ticos precisos:"}),a.jsxs("ol",{className:"list-decimal pl-6 space-y-2 marker:text-primary",children:[a.jsxs("li",{children:["Escolha dois nÃºmeros primos gigantes, ",a.jsx("strong",{children:"p"})," e ",a.jsx("strong",{children:"q"}),"."]}),a.jsxs("li",{children:["Calcule ",a.jsx("strong",{children:"n = p Ã— q"}),". O nÃºmero ",a.jsx("strong",{children:"n"})," serÃ¡ o mÃ³dulo da chave pÃºblica e privada. O tamanho de ",a.jsx("strong",{children:"n"})," em bits determina a seguranÃ§a (ex: 2048 ou 4096 bits)."]}),a.jsxs("li",{children:["Calcule a funÃ§Ã£o totiente de Euler: ",a.jsx("strong",{children:"Ï†(n) = (p-1) Ã— (q-1)"}),"."]}),a.jsxs("li",{children:["Escolha um inteiro ",a.jsx("strong",{children:"e"})," tal que 1 < e < Ï†(n) e que seja coprimo a Ï†(n). Geralmente, e = 65537 Ã© escolhido por eficiÃªncia."]}),a.jsxs("li",{children:["Calcule ",a.jsx("strong",{children:"d"})," tal que ",a.jsx("strong",{children:"d Ã— e â‰¡ 1 (mod Ï†(n))"}),". Este ",a.jsx("strong",{children:"d"})," Ã© o expoente privado."]})]}),a.jsxs("p",{children:["A chave pÃºblica Ã© o par ",a.jsx("strong",{children:"(n, e)"}),". A chave privada Ã© o par ",a.jsx("strong",{children:"(n, d)"}),"."]}),a.jsxs("p",{children:["Para encriptar uma mensagem ",a.jsx("strong",{children:"M"})," (convertida em nÃºmero), calculamos: ",a.jsx("br",{}),a.jsx("code",{className:"bg-gray-800 px-2 py-1 rounded text-primary",children:"C = M^e mod n"})]}),a.jsxs("p",{children:["Para decriptar o cifrotexto ",a.jsx("strong",{children:"C"}),", calculamos: ",a.jsx("br",{}),a.jsx("code",{className:"bg-gray-800 px-2 py-1 rounded text-primary",children:"M = C^d mod n"})]}),a.jsxs("h2",{className:"text-2xl font-bold text-white flex items-center gap-2 mt-12",children:[a.jsx(Nt,{className:"text-primary"}),"3. Curvas ElÃ­pticas (ECC): O Futuro Eficiente"]}),a.jsx("p",{children:"Enquanto o RSA exige chaves de 2048 ou 4096 bits para ser seguro, a Criptografia de Curvas ElÃ­pticas (ECC) consegue o mesmo nÃ­vel de seguranÃ§a com chaves muito menores (ex: 256 bits). Isso Ã© crucial para dispositivos mÃ³veis e IoT, onde processamento e bateria sÃ£o limitados."}),a.jsx("p",{children:"A ECC baseia-se na estrutura algÃ©brica de curvas elÃ­pticas sobre corpos finitos. A equaÃ§Ã£o geral Ã© da forma:"}),a.jsx("p",{className:"text-center font-mono text-xl my-6 text-primary",children:"yÂ² = xÂ³ + ax + b"}),a.jsx("p",{children:'O problema difÃ­cil aqui nÃ£o Ã© a fatoraÃ§Ã£o, mas o "Logaritmo Discreto em Curvas ElÃ­pticas". Dado um ponto P na curva e um ponto Q = k*P (onde k Ã© um inteiro escalar), Ã© extremamente difÃ­cil descobrir k conhecendo apenas P e Q.'}),a.jsxs("p",{children:["Bitcoin e Ethereum, por exemplo, usam a curva ",a.jsx("strong",{children:"secp256k1"})," para gerar endereÃ§os e assinar transaÃ§Ãµes."]}),a.jsxs("h2",{className:"text-2xl font-bold text-white flex items-center gap-2 mt-12",children:[a.jsx(Ue,{className:"text-yellow-500"}),"4. A AmeaÃ§a QuÃ¢ntica e Algoritmo de Shor"]}),a.jsx("p",{children:"Toda a seguranÃ§a do RSA e da ECC baseia-se na premissa de que computadores clÃ¡ssicos sÃ£o ineficientes para resolver fatoraÃ§Ã£o e logaritmos discretos. No entanto, em 1994, Peter Shor desenvolveu um algoritmo quÃ¢ntico que pode resolver esses problemas em tempo polinomial."}),a.jsx("p",{children:"Isso significa que, se (ou quando) um computador quÃ¢ntico suficientemente potente e estÃ¡vel for construÃ­do, ele quebrarÃ¡ quase toda a criptografia atual da internet instantaneamente. O RSA-2048, que levaria bilhÃµes de anos para ser quebrado hoje, poderia ser fatorado em horas ou minutos."}),a.jsxs("p",{children:["Isso gerou uma corrida pela ",a.jsx("strong",{children:"Criptografia PÃ³s-QuÃ¢ntica (PQC)"}),". O NIST (National Institute of Standards and Technology) estÃ¡ padronizando novos algoritmos baseados em reticulados (Lattice-based cryptography), cÃ³digos corretores de erro e isogenias, que se acredita serem resistentes atÃ© mesmo a ataques quÃ¢nticos."]}),a.jsxs("h2",{className:"text-2xl font-bold text-white flex items-center gap-2 mt-12",children:[a.jsx(ws,{className:"text-primary"}),"5. ImplementaÃ§Ã£o PrÃ¡tica: HTTPS e TLS 1.3"]}),a.jsx("p",{children:"Na prÃ¡tica, nÃ£o usamos RSA para encriptar todo o trÃ¡fego da internet porque ele Ã© lento. Usamos um sistema hÃ­brido."}),a.jsxs("ul",{className:"list-disc pl-6 space-y-4 text-gray-300",children:[a.jsxs("li",{children:[a.jsx("strong",{children:"Handshake (Aperto de MÃ£o):"})," Quando vocÃª acessa este site, seu navegador e o servidor usam criptografia assimÃ©trica (geralmente ECC com Algoritmo Diffie-Hellman Ephemeral) para negociar uma chave de sessÃ£o compartilhada."]}),a.jsxs("li",{children:[a.jsx("strong",{children:"AutenticaÃ§Ã£o:"})," O servidor prova sua identidade enviando um Certificado Digital assinado por uma Autoridade Certificadora (CA). A assinatura Ã© verificada usando a chave pÃºblica da CA prÃ©-instalada no seu dispositivo."]}),a.jsxs("li",{children:[a.jsx("strong",{children:"TÃºnel Seguro:"})," Uma vez estabelecida a chave de sessÃ£o, a comunicaÃ§Ã£o muda para criptografia simÃ©trica (como AES-256-GCM), que Ã© incrivelmente rÃ¡pida e eficiente para transmitir dados em massa (vÃ­deos, imagens, texto)."]})]}),a.jsx("p",{className:"mt-4",children:"O protocolo TLS 1.3, o padrÃ£o atual, removeu algoritmos obsoletos e inseguros (como MD5 e RC4) e tornou o handshake mais rÃ¡pido, exigindo menos viagens de ida e volta (RTT) entre cliente e servidor."}),a.jsx("h2",{className:"text-2xl font-bold text-white mt-12 mb-6",children:"ConclusÃ£o"}),a.jsx("p",{children:"A criptografia Ã© um campo dinÃ¢mico, uma eterna corrida de gato e rato entre criptoanalistas e criptÃ³grafos. Enquanto a matemÃ¡tica fundamental (Teoria dos NÃºmeros) permanece sÃ³lida, as implementaÃ§Ãµes e o hardware evoluem. Para desenvolvedores e engenheiros, entender esses conceitos nÃ£o Ã© apenas acadÃªmico â€“ Ã© uma responsabilidade profissional para construir sistemas seguros e resilientes."})]}),a.jsxs("section",{className:"mt-16 border-t border-white/10 pt-12",children:[a.jsx("h3",{className:"text-2xl font-bold text-white mb-8",children:"Perguntas Frequentes (FAQ)"}),a.jsx("div",{className:"space-y-6",children:[{q:"O RSA ainda Ã© seguro em 2026?",a:"Sim, desde que utilizado com chaves de 2048 bits ou superior (preferencialmente 4096 bits). No entanto, para novas implementaÃ§Ãµes, recomenda-se Curvas ElÃ­pticas (ECC) devido Ã  melhor performance."},{q:"O que Ã© Criptografia de Ponta a Ponta (E2EE)?",a:"Ã‰ um sistema onde apenas os usuÃ¡rios comunicantes podem ler as mensagens. Nem o provedor do serviÃ§o (como WhatsApp ou Signal) tem acesso Ã s chaves privadas necessÃ¡rias para decriptar o conteÃºdo."},{q:"Computadores QuÃ¢nticos vÃ£o acabar com o Bitcoin?",a:"Potencialmente sim, se o Bitcoin nÃ£o atualizar seus protocolos. O algoritmo de assinatura ECDSA usado pelo Bitcoin Ã© vulnerÃ¡vel a ataques quÃ¢nticos. No entanto, a rede pode fazer um 'soft fork' para implementar assinaturas pÃ³s-quÃ¢nticas no futuro."}].map((t,e)=>a.jsxs("div",{className:"bg-white/5 rounded-lg p-6 hover:bg-white/10 transition-colors",children:[a.jsx("h4",{className:"text-lg font-bold text-primary mb-2",children:t.q}),a.jsx("p",{className:"text-sm text-gray-300",children:t.a})]},e))})]}),a.jsxs("section",{className:"mt-16 pt-12 border-t border-white/10",children:[a.jsxs("h3",{className:"text-2xl font-bold text-white mb-8 flex items-center gap-2",children:[a.jsx(Et,{size:24}),"ComentÃ¡rios da Comunidade"]}),a.jsxs("div",{className:"bg-black/40 rounded-xl p-8 text-center border border-white/5",children:[a.jsx("p",{className:"text-gray-400 mb-4",children:"A seÃ§Ã£o de comentÃ¡rios estÃ¡ sendo atualizada para suportar assinaturas criptogrÃ¡ficas Web3."}),a.jsx("button",{className:"bg-primary/20 text-primary px-6 py-2 rounded-full hover:bg-primary/30 transition-colors font-medium text-sm",children:"Notifique-me quando estiver disponÃ­vel"})]})]})]})})),vd=()=>(f.useEffect(()=>{window.scrollTo(0,0)},[]),a.jsx("div",{className:"max-w-4xl mx-auto py-12 px-6",children:a.jsxs("article",{itemScope:!0,itemType:"http://schema.org/TechArticle",className:"prose prose-invert prose-lg max-w-none",children:[a.jsxs("nav",{className:"flex items-center gap-2 text-sm text-gray-500 mb-8 font-mono",children:[a.jsx(B,{to:"/",className:"hover:text-primary transition-colors",children:"Home"}),a.jsx(Z,{size:14}),a.jsx("span",{className:"text-primary",children:"Artigos"}),a.jsx(Z,{size:14}),a.jsx("span",{className:"text-white",children:"Teoria dos NÃºmeros"})]}),a.jsxs("header",{className:"mb-12",children:[a.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[a.jsx("span",{className:"bg-primary/20 text-primary px-3 py-1 rounded-full text-xs font-bold uppercase tracking-wider",children:"MatemÃ¡tica Pura"}),a.jsxs("span",{className:"text-gray-500 text-xs flex items-center gap-1",children:[a.jsx(we,{size:12}),"Leitura: 15 min"]})]}),a.jsx("h1",{itemProp:"headline",className:"text-4xl md:text-5xl font-bold mb-6 bg-gradient-to-r from-white to-gray-400 bg-clip-text text-transparent",children:"ExploraÃ§Ã£o Pura das Propriedades dos Inteiros e sua DistribuiÃ§Ã£o"}),a.jsx("p",{className:"text-xl text-gray-400 leading-relaxed",children:"De Euclides Ã  HipÃ³tese de Riemann: uma jornada pelos mistÃ©rios dos nÃºmeros primos, os blocos fundamentais de construÃ§Ã£o do universo matemÃ¡tico."})]}),a.jsx("section",{className:"mb-12",children:a.jsx(Pr,{type:"audio",title:"NarraÃ§Ã£o Neural (Pt-BR)",duration:"15:20",mediaUrl:"/audio/teoria_numeros.mp3"})}),a.jsxs("div",{itemProp:"articleBody",className:"space-y-8 text-gray-300",children:[a.jsx("p",{children:'Carl Friedrich Gauss, um dos maiores matemÃ¡ticos de todos os tempos, chamou a Teoria dos NÃºmeros de "A Rainha da MatemÃ¡tica". Por sÃ©culos, ela foi considerada uma disciplina de beleza pura, sem aplicaÃ§Ãµes prÃ¡ticas. "A ciÃªncia para a glÃ³ria do espÃ­rito humano", diziam. Ironicamente, hoje ela Ã© a base invisÃ­vel de toda a nossa sociedade digital. Mas neste artigo, vamos nos afastar das aplicaÃ§Ãµes e mergulhar na beleza intrÃ­nseca dos nÃºmeros.'}),a.jsxs("h2",{className:"text-2xl font-bold text-white flex items-center gap-2 mt-12",children:[a.jsx(Gs,{className:"text-primary"}),"1. O Teorema Fundamental da AritmÃ©tica"]}),a.jsx("p",{children:"Tudo comeÃ§a com uma verdade simples, mas profunda: todo nÃºmero inteiro maior que 1 ou Ã© primo ou pode ser escrito como um produto Ãºnico de nÃºmeros primos."}),a.jsxs("p",{children:['Pense nisso. Os nÃºmeros primos (2, 3, 5, 7, 11...) sÃ£o os "Ã¡tomos" da aritmÃ©tica. O nÃºmero 12 nÃ£o Ã© fundamental; ele Ã© feito de ',a.jsx("code",{className:"bg-gray-800 px-1 rounded",children:"2 Ã— 2 Ã— 3"}),". O nÃºmero 21 Ã© ",a.jsx("code",{className:"bg-gray-800 px-1 rounded",children:"3 Ã— 7"}),". Mas o 7? O 7 Ã© indivisÃ­vel. Ele Ã© um bloco de construÃ§Ã£o elementar."]}),a.jsx("p",{children:'A unicidade dessa fatoraÃ§Ã£o Ã© o que garante que a matemÃ¡tica "funcione". Se houvesse duas maneiras diferentes de fatorar o mesmo nÃºmero em primos, toda a aritmÃ©tica colapsaria.'}),a.jsxs("h2",{className:"text-2xl font-bold text-white flex items-center gap-2 mt-12",children:[a.jsx(Q,{className:"text-primary"}),"2. A DistribuiÃ§Ã£o dos Primos"]}),a.jsxs("p",{children:["Os primos parecem aparecer aleatoriamente.",a.jsx("br",{}),"2, 3, 5, 7, 11, 13, 17, 19, 23, 29...",a.jsx("br",{}),"Ã€s vezes hÃ¡ grandes lacunas entre eles. Ã€s vezes eles vÃªm em pares (Primos GÃªmeos), como 11 e 13, ou 41 e 43."]}),a.jsxs("p",{children:["Existe um padrÃ£o? Gauss, aos 15 anos, percebeu que a densidade dos primos diminui Ã  medida que os nÃºmeros aumentam, seguindo uma lei logarÃ­tmica. Isso culminou no ",a.jsx("strong",{children:"Teorema do NÃºmero Primo (PNT)"}),", que afirma que a quantidade de primos menores que um nÃºmero $x$ Ã© aproximadamente:"]}),a.jsx("div",{className:"bg-black/40 p-6 rounded-lg text-center font-mono text-xl text-primary border border-white/10 my-6",children:"Ï€(x) â‰ˆ x / ln(x)"}),a.jsx("p",{children:"Isso significa que, perto de $x$, a probabilidade de um nÃºmero aleatÃ³rio ser primo Ã© de $1/ln(x)$. Ã‰ uma ordem estatÃ­stica emergindo do caos aparente."}),a.jsxs("h2",{className:"text-2xl font-bold text-white flex items-center gap-2 mt-12",children:[a.jsx(wo,{className:"text-primary"}),"3. A HipÃ³tese de Riemann"]}),a.jsx("p",{children:'Aqui entramos no "Santo Graal" da matemÃ¡tica. Bernhard Riemann, em 1859, conectou a distribuiÃ§Ã£o dos primos Ã  FunÃ§Ã£o Zeta de Riemann:'}),a.jsx("p",{className:"text-center font-mono my-4 text-gray-400",children:"Î¶(s) = 1 + 1/2^s + 1/3^s + 1/4^s + ..."}),a.jsx("p",{children:'A hipÃ³tese afirma que todos os "zeros nÃ£o triviais" dessa funÃ§Ã£o tÃªm uma parte real igual a 1/2.'}),a.jsxs("div",{className:"bg-red-500/10 border border-red-500/30 p-6 rounded-lg my-6",children:[a.jsx("h4",{className:"text-red-400 font-bold mb-2",children:"Por que isso importa?"}),a.jsxs("p",{className:"text-sm text-gray-300",children:["Se a HipÃ³tese de Riemann for verdadeira, ela implica que os nÃºmeros primos sÃ£o distribuÃ­dos da maneira mais regular possÃ­vel. Se for falsa, o universo dos nÃºmeros tem irregularidades caÃ³ticas que desconhecemos. HÃ¡ um prÃªmio de ",a.jsx("strong",{children:"1 MilhÃ£o de DÃ³lares"})," do Instituto Clay para quem provar ou refutar isso."]})]}),a.jsxs("h2",{className:"text-2xl font-bold text-white flex items-center gap-2 mt-12",children:[a.jsx(Dt,{className:"text-primary"}),"4. A Espiral de Ulam"]}),a.jsx("p",{children:"Em 1963, o matemÃ¡tico Stanislaw Ulam estava entediado em uma conferÃªncia cientÃ­fica. Ele comeÃ§ou a rabiscar nÃºmeros em uma espiral em seu caderno:"}),a.jsx("pre",{className:"font-mono text-xs md:text-sm bg-black/50 p-4 rounded text-center leading-relaxed text-gray-400",children:"37--36--35--34--33--32--31 |                       | 38  17--16--15--14--13  30 |   |               |   | 39  18   5---4---3  12  29 |   |   |       |   |   | 40  19   6   1---2  11  28 |   |               |   | 41  20   7---8---9--10  27 |                       | 42--43--44--45--46--47--48..."}),a.jsx("p",{className:"mt-4",children:"Quando ele circulou os nÃºmeros primos, percebeu algo chocante: eles tendiam a se alinhar em linhas diagonais. Isso sugere que existem polinÃ´mios quadrÃ¡ticos que geram primos com frequÃªncia muito maior que o aleatÃ³rio (como o famoso $n^2 + n + 41$ de Euler)."}),a.jsx("p",{children:"A Espiral de Ulam Ã© uma visualizaÃ§Ã£o grÃ¡fica que transforma a aridez dos nÃºmeros em uma estrutura quase orgÃ¢nica, revelando padrÃµes ocultos na distribuiÃ§Ã£o dos primos."}),a.jsxs("h2",{className:"text-2xl font-bold text-white flex items-center gap-2 mt-12",children:[a.jsx(De,{className:"text-primary"}),"5. Primos de Mersenne e a Busca Computacional"]}),a.jsx("p",{children:"Um primo de Mersenne Ã© um primo da forma $M_p = 2^p - 1$."}),a.jsxs("ul",{className:"list-disc pl-6 space-y-2 text-gray-300",children:[a.jsx("li",{children:"Se $p=3$, $2^3 - 1 = 7$ (Primo)"}),a.jsx("li",{children:"Se $p=5$, $2^5 - 1 = 31$ (Primo)"}),a.jsxs("li",{children:["Se $p=11$, $2^",11," - 1 = 2047$ (NÃ£o Ã© primo! $23 \\times 89$)"]})]}),a.jsx("p",{children:"Os maiores nÃºmeros primos conhecidos pela humanidade sÃ£o quase todos de Mersenne. Isso porque existe um teste de primalidade extremamente eficiente para eles, o Teste de Lucas-Lehmer, que permite a computadores verificarem nÃºmeros com milhÃµes de dÃ­gitos. O projeto GIMPS (Great Internet Mersenne Prime Search) usa computaÃ§Ã£o distribuÃ­da para caÃ§ar esses gigantes."}),a.jsx("h2",{className:"text-2xl font-bold text-white mt-12 mb-6",children:"ConclusÃ£o"}),a.jsx("p",{children:'A Teoria dos NÃºmeros Ã© um vasto oceano. Apenas molhamos os pÃ©s. De conjecturas simples que uma crianÃ§a pode entender (como a Conjectura de Goldbach: "todo par > 2 Ã© a soma de dois primos") atÃ© as complexidades da anÃ¡lise complexa de Riemann, o estudo dos inteiros continua sendo a fronteira final da matemÃ¡tica pura.'})]}),a.jsxs("section",{className:"mt-16 border-t border-white/10 pt-12",children:[a.jsx("h3",{className:"text-2xl font-bold text-white mb-8",children:"Perguntas Frequentes (FAQ)"}),a.jsx("div",{className:"space-y-6",children:[{q:"Qual Ã© o maior nÃºmero primo conhecido?",a:"AtÃ© 2025, o maior primo conhecido Ã© 2^136,279,841 - 1. Ele tem mais de 41 milhÃµes de dÃ­gitos."},{q:"Para que serve saber se um nÃºmero Ã© primo?",a:"AlÃ©m da criptografia RSA, primos sÃ£o usados em tabelas hash (computaÃ§Ã£o), geraÃ§Ã£o de nÃºmeros pseudoaleatÃ³rios e cÃ³digos corretores de erro (como os usados em CDs e transmissÃµes de satÃ©lite)."},{q:"O nÃºmero 1 Ã© primo?",a:"NÃ£o. Por definiÃ§Ã£o, um primo deve ter exatamente dois divisores distintos: 1 e ele mesmo. O nÃºmero 1 sÃ³ tem um divisor. Se 1 fosse primo, a fatoraÃ§Ã£o Ãºnica (Teorema Fundamental) falharia."}].map((t,e)=>a.jsxs("div",{className:"bg-white/5 rounded-lg p-6 hover:bg-white/10 transition-colors",children:[a.jsx("h4",{className:"text-lg font-bold text-primary mb-2",children:t.q}),a.jsx("p",{className:"text-sm text-gray-300",children:t.a})]},e))})]}),a.jsxs("section",{className:"mt-16 pt-12 border-t border-white/10",children:[a.jsxs("h3",{className:"text-2xl font-bold text-white mb-8 flex items-center gap-2",children:[a.jsx(Et,{size:24}),"DiscussÃ£o AcadÃªmica"]}),a.jsxs("div",{className:"bg-black/40 rounded-xl p-8 text-center border border-white/5",children:[a.jsx("p",{className:"text-gray-400 mb-4",children:"Conecte sua carteira acadÃªmica (ORCID) para participar da discussÃ£o."}),a.jsx("button",{className:"bg-primary/20 text-primary px-6 py-2 rounded-full hover:bg-primary/30 transition-colors font-medium text-sm",children:"Conectar ORCID"})]})]})]})})),yd=()=>(f.useEffect(()=>{window.scrollTo(0,0)},[]),a.jsx("div",{className:"max-w-4xl mx-auto py-12 px-6",children:a.jsxs("article",{itemScope:!0,itemType:"http://schema.org/TechArticle",className:"prose prose-invert prose-lg max-w-none",children:[a.jsxs("nav",{className:"flex items-center gap-2 text-sm text-gray-500 mb-8 font-mono",children:[a.jsx(B,{to:"/",className:"hover:text-primary transition-colors",children:"Home"}),a.jsx(Z,{size:14}),a.jsx("span",{className:"text-primary",children:"Artigos"}),a.jsx(Z,{size:14}),a.jsx("span",{className:"text-white",children:"Performance"})]}),a.jsxs("header",{className:"mb-12 text-center space-y-6",children:[a.jsxs("div",{className:"inline-flex items-center gap-2 px-3 py-1 rounded-full border border-primary/20 bg-primary/5 text-primary text-xs font-mono mb-4",children:[a.jsx("span",{className:"w-2 h-2 rounded-full bg-primary animate-pulse"}),"ENGENHARIA DE SOFTWARE // CORE"]}),a.jsxs("h1",{itemProp:"headline",className:"text-4xl md:text-5xl font-bold font-mono tracking-tighter text-white mb-6",children:["Performance Extrema",a.jsx("br",{}),a.jsx("span",{className:"text-primary text-2xl md:text-3xl font-normal block mt-4",children:"OtimizaÃ§Ã£o MatemÃ¡tica no Front-end Moderno"})]}),a.jsxs("div",{className:"flex items-center justify-center gap-6 text-sm text-gray-400 font-mono",children:[a.jsx("span",{itemProp:"author",children:"Por Wander Santos"}),a.jsx("span",{children:"â€¢"}),a.jsx("time",{itemProp:"datePublished",dateTime:new Date().toISOString().split("T")[0],children:new Date().toLocaleDateString()}),a.jsx("span",{children:"â€¢"}),a.jsx("span",{children:"15 min de leitura"})]})]}),a.jsx("section",{className:"mb-12",children:a.jsx(Pr,{type:"audio",title:"NarraÃ§Ã£o Neural (Pt-BR)",duration:"18:30",mediaUrl:"/audio/performance.mp3"})}),a.jsx("div",{className:"bg-black/40 border border-white/10 rounded-2xl p-8 mb-12 backdrop-blur-sm",children:a.jsx("p",{className:"lead text-xl text-gray-300 mb-0",children:'No desenvolvimento web moderno, "rÃ¡pido" nÃ£o Ã© mais um diferencial, Ã© o padrÃ£o mÃ­nimo aceitÃ¡vel. Quando trazemos cÃ¡lculos matemÃ¡ticos complexos para o navegador â€” como criptografia, fatoraÃ§Ã£o de primos ou renderizaÃ§Ã£o de fractais â€” entramos em um territÃ³rio onde cada ciclo de CPU conta. Este artigo explora como transformar o navegador em uma supermÃ¡quina de cÃ¡lculo.'})}),a.jsxs("div",{className:"space-y-12 text-gray-300",children:[a.jsxs("section",{children:[a.jsxs("h2",{className:"flex items-center gap-3 text-2xl font-bold text-white mb-6",children:[a.jsx(Ji,{className:"text-primary"}),"A Complexidade AssintÃ³tica: O Pesadelo O(n!)"]}),a.jsx("p",{children:"Antes de otimizar cÃ³digo, precisamos otimizar a lÃ³gica. A notaÃ§Ã£o Big O Ã© a linguagem universal para descrever a eficiÃªncia de um algoritmo. Em aplicaÃ§Ãµes matemÃ¡ticas, a diferenÃ§a entre uma soluÃ§Ã£o $O(n)$ e $O(n^2)$ pode significar a diferenÃ§a entre uma resposta em 100ms e uma resposta em 100 anos."}),a.jsxs("p",{children:["Considere a verificaÃ§Ã£o de primalidade. Um mÃ©todo ingÃªnuo que testa todos os divisores atÃ© $n$ tem complexidade $O(n)$. Melhorando para testar atÃ© $\\sqrt","{","n","}","$, reduzimos para $O(\\sqrt","{","n","}",")$. Para um nÃºmero de 18 dÃ­gitos, isso reduz as operaÃ§Ãµes de $10^","{","18","}","$ para $10^9$ â€” uma melhoria de um bilhÃ£o de vezes apenas com matemÃ¡tica, sem mudar uma linha de infraestrutura."]}),a.jsx("p",{children:"Algoritmos probabilÃ­sticos como Miller-Rabin levam isso alÃ©m, oferecendo complexidade polilogarÃ­tmica $O(k \\log^3 n)$, tornando viÃ¡vel verificar primos gigantescos em tempo real no navegador do usuÃ¡rio."})]}),a.jsxs("section",{children:[a.jsxs("h2",{className:"flex items-center gap-3 text-2xl font-bold text-white mb-6",children:[a.jsx(Tr,{className:"text-primary"}),"JavaScript Engine: V8 e JIT Compilation"]}),a.jsx("p",{children:'Para escrever JavaScript performÃ¡tico, Ã© preciso entender onde ele roda. O motor V8 (Chrome/Node.js) usa compilaÃ§Ã£o Just-In-Time (JIT). O cÃ³digo nÃ£o Ã© apenas interpretado; ele Ã© monitorado, "profilado" e recompilado dinamicamente para cÃ³digo de mÃ¡quina otimizado.'}),a.jsx("h3",{className:"text-xl font-bold text-white mt-8 mb-4",children:"Hidden Classes e Inline Caching"}),a.jsx("p",{children:'O V8 cria "classes ocultas" (hidden classes) para objetos em tempo de execuÃ§Ã£o. Se vocÃª adiciona propriedades a um objeto em ordens diferentes, vocÃª quebra essa otimizaÃ§Ã£o.'}),a.jsxs("div",{className:"bg-black/50 p-4 rounded-lg border border-white/10 font-mono text-sm mb-4",children:[a.jsx("p",{className:"text-red-400",children:"// Ruim para performance (cria formas diferentes)"}),a.jsxs("p",{children:["const p1 = ","{ x: 1, y: 2 }",";"]}),a.jsxs("p",{children:["const p2 = ","{ y: 2, x: 1 }",";"]}),a.jsx("br",{}),a.jsx("p",{className:"text-green-400",children:"// Bom para performance (mesma forma)"}),a.jsxs("p",{children:["const p1 = ","{ x: 1, y: 2 }",";"]}),a.jsxs("p",{children:["const p2 = ","{ x: 1, y: 2 }",";"]})]}),a.jsx("p",{children:"Manter a estrutura dos objetos consistente permite que o motor reutilize cÃ³digo otimizado, resultando em ganhos massivos de performance em loops intensivos."})]}),a.jsxs("section",{children:[a.jsxs("h2",{className:"flex items-center gap-3 text-2xl font-bold text-white mb-6",children:[a.jsx(Js,{className:"text-primary"}),"Web Workers: Paralelismo Real"]}),a.jsx("p",{children:"O JavaScript no navegador Ã© single-threaded por design para garantir a consistÃªncia do DOM. Isso significa que um loop `while(true)` trava a aba inteira, impedindo cliques, rolagens e atualizaÃ§Ãµes de tela."}),a.jsx("p",{children:'Web Workers permitem "escapar" dessa limitaÃ§Ã£o, criando threads de sistema operacional reais para execuÃ§Ã£o de script em segundo plano. Para nossa aplicaÃ§Ã£o de primos, isso Ã© vital. A thread principal (UI thread) fica livre para renderizar animaÃ§Ãµes a 60fps, enquanto um Worker "mastiga" nÃºmeros em segundo plano.'}),a.jsx("p",{children:"A comunicaÃ§Ã£o entre threads via `postMessage` tem um custo de serializaÃ§Ã£o. O uso de `SharedArrayBuffer` e `Atomics` permite que threads compartilhem memÃ³ria diretamente, eliminando cÃ³pias desnecessÃ¡rias e permitindo sincronizaÃ§Ã£o de baixo nÃ­vel, similar a linguagens como C++ ou Rust."})]}),a.jsxs("section",{children:[a.jsxs("h2",{className:"flex items-center gap-3 text-2xl font-bold text-white mb-6",children:[a.jsx(Dt,{className:"text-primary"}),"WebAssembly (Wasm): O PrÃ³ximo NÃ­vel"]}),a.jsx("p",{children:"Por mais otimizado que seja o JIT do JavaScript, ele ainda tem overheads de tipagem dinÃ¢mica e Garbage Collection. WebAssembly (Wasm) Ã© um formato de instruÃ§Ã£o binÃ¡ria para uma mÃ¡quina virtual baseada em pilha, projetada como um alvo portÃ¡til para compilaÃ§Ã£o de linguagens de alto nÃ­vel como C, C++ e Rust."}),a.jsx("p",{children:"Ao reescrever algoritmos crÃ­ticos de criptografia ou fatoraÃ§Ã£o em Rust e compilÃ¡-los para Wasm, obtemos:"}),a.jsxs("ul",{className:"list-disc pl-6 space-y-2 mt-4",children:[a.jsxs("li",{children:[a.jsx("strong",{children:"Performance PrevisÃ­vel:"})," Sem pausas inesperadas de Garbage Collection."]}),a.jsxs("li",{children:[a.jsx("strong",{children:"Tipagem EstÃ¡tica:"})," OtimizaÃ§Ãµes de compilador agressivas antes mesmo do cÃ³digo chegar ao navegador."]}),a.jsxs("li",{children:[a.jsx("strong",{children:"Tamanho Compacto:"})," O binÃ¡rio Wasm Ã© menor e carrega mais rÃ¡pido que o JS equivalente minificado."]})]}),a.jsx("p",{className:"mt-4",children:"Em nossos testes, a implementaÃ§Ã£o do Crivo de EratÃ³stenes em Wasm (Rust) foi cerca de 4x a 10x mais rÃ¡pida que a versÃ£o em JavaScript puro para $n > 10^9$."})]}),a.jsxs("section",{children:[a.jsxs("h2",{className:"flex items-center gap-3 text-2xl font-bold text-white mb-6",children:[a.jsx(Lt,{className:"text-primary"}),"Gerenciamento de MemÃ³ria e Typed Arrays"]}),a.jsx("p",{children:'O Garbage Collector (GC) Ã© conveniente, mas em aplicaÃ§Ãµes de alta performance, ele Ã© um vilÃ£o imprevisÃ­vel. Alocar e desalocar milhÃµes de objetos pequenos gera "pausas de GC" que causam "jank" (engasgos visuais).'}),a.jsx("p",{children:"Para dados numÃ©ricos massivos, `TypedArrays` (`Uint32Array`, `Float64Array`) sÃ£o essenciais. Eles alocam um bloco contÃ­guo de memÃ³ria binÃ¡ria, similar a um array em C."}),a.jsxs("ul",{className:"list-disc pl-6 space-y-2 mt-4",children:[a.jsxs("li",{children:[a.jsx("strong",{children:"Menor Overhead:"})," NÃ£o hÃ¡ cabeÃ§alhos de objeto ou ponteiros extras."]}),a.jsxs("li",{children:[a.jsx("strong",{children:"Cache Friendly:"})," Acesso sequencial em memÃ³ria contÃ­gua aproveita melhor o cache L1/L2 da CPU."]}),a.jsxs("li",{children:[a.jsx("strong",{children:"Interoperabilidade:"})," Podem ser passados diretamente para WebGL ou WebAssembly sem cÃ³pia."]})]})]}),a.jsxs("section",{children:[a.jsxs("h2",{className:"flex items-center gap-3 text-2xl font-bold text-white mb-6",children:[a.jsx(Q,{className:"text-primary"}),"ConclusÃ£o: O Navegador como Plataforma"]}),a.jsx("p",{children:"A combinaÃ§Ã£o de algoritmos eficientes ($O(n \\log n)$ ou melhor), paralelismo (Web Workers), execuÃ§Ã£o de baixo nÃ­vel (WebAssembly) e gerenciamento consciente de memÃ³ria transforma o navegador."}),a.jsx("p",{children:"NÃ£o estamos mais limitados a exibir documentos estÃ¡ticos. O navegador moderno Ã© um sistema operacional distribuÃ­do capaz de processamento cientÃ­fico, criptografia de ponta a ponta e renderizaÃ§Ã£o grÃ¡fica avanÃ§ada. O limite nÃ£o Ã© mais a tecnologia, mas nossa capacidade de arquitetar soluÃ§Ãµes que explorem esse potencial."})]})]}),a.jsxs("section",{className:"mt-16 pt-16 border-t border-white/10",children:[a.jsx("h2",{className:"text-3xl font-bold text-white mb-8 text-center",children:"Perguntas Frequentes"}),a.jsxs("div",{className:"grid gap-6",children:[a.jsxs("div",{className:"bg-white/5 p-6 rounded-xl border border-white/10",children:[a.jsxs("h3",{className:"text-lg font-bold text-white mb-2 flex items-center gap-2",children:[a.jsx(Et,{size:18,className:"text-primary"}),"OtimizaÃ§Ã£o prematura Ã© a raiz de todo mal?"]}),a.jsx("p",{className:"text-gray-400 text-sm",children:"A famosa frase de Donald Knuth Ã© frequentemente mal interpretada. Otimizar cÃ³digo ilegÃ­vel antes de saber onde estÃ¡ o gargalo Ã© ruim. Mas escolher a estrutura de dados correta e a complexidade algorÃ­tmica adequada desde o inÃ­cio nÃ£o Ã© otimizaÃ§Ã£o prematura, Ã© engenharia competente."})]}),a.jsxs("div",{className:"bg-white/5 p-6 rounded-xl border border-white/10",children:[a.jsxs("h3",{className:"text-lg font-bold text-white mb-2 flex items-center gap-2",children:[a.jsx(Et,{size:18,className:"text-primary"}),"Quando usar WebAssembly vs JavaScript?"]}),a.jsx("p",{className:"text-gray-400 text-sm",children:'Use JS para a lÃ³gica de UI, manipulaÃ§Ã£o de DOM e "cola" da aplicaÃ§Ã£o. Use Wasm para tarefas computacionalmente intensivas: processamento de imagem/vÃ­deo, fÃ­sica de jogos, criptografia pesada e algoritmos matemÃ¡ticos complexos.'})]})]})]}),a.jsx("footer",{className:"mt-16 text-center space-y-8",children:a.jsxs("div",{className:"flex justify-center gap-4",children:[a.jsxs("button",{className:"flex items-center gap-2 px-6 py-3 bg-white/5 hover:bg-white/10 border border-white/10 rounded-full transition-all text-white font-mono text-sm",children:[a.jsx(Rr,{size:16})," Compartilhar TÃ©cnicas"]}),a.jsxs(B,{to:"/",className:"flex items-center gap-2 px-6 py-3 bg-primary hover:bg-primary/90 text-black font-bold rounded-full transition-all font-mono text-sm",children:[a.jsx(_a,{size:16})," Ver CÃ³digo Fonte"]})]})})]})})),wd=()=>(f.useEffect(()=>{window.scrollTo(0,0)},[]),a.jsx("div",{className:"max-w-4xl mx-auto py-12 px-6",children:a.jsxs("article",{className:"prose prose-invert prose-lg max-w-none",children:[a.jsxs("nav",{className:"flex items-center gap-2 text-sm text-gray-500 mb-8 font-mono",children:[a.jsx(B,{to:"/",className:"hover:text-primary transition-colors",children:"Home"}),a.jsx(Z,{size:14}),a.jsx("span",{className:"text-primary",children:"Sistema"}),a.jsx(Z,{size:14}),a.jsx("span",{className:"text-white",children:"RelatÃ³rio de Telemetria"})]}),a.jsxs("header",{className:"mb-12",children:[a.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[a.jsxs("span",{className:"bg-green-500/20 text-green-400 px-3 py-1 rounded-full text-xs font-bold uppercase tracking-wider flex items-center gap-2",children:[a.jsx(ye,{size:12}),"Status: Operacional"]}),a.jsxs("span",{className:"text-gray-500 text-xs flex items-center gap-1",children:[a.jsx(ws,{size:12}),"Node: V1.0.14-VPS"]})]}),a.jsx("h1",{className:"text-4xl md:text-5xl font-bold mb-6 bg-gradient-to-r from-green-400 to-blue-500 bg-clip-text text-transparent font-mono",children:"RelatÃ³rio TÃ©cnico de Telemetria e Monitoramento de Rede"}),a.jsx("p",{className:"text-xl text-gray-400 leading-relaxed font-mono",children:"AnÃ¡lise detalhada da infraestrutura de monitoramento em tempo real, latÃªncia distribuÃ­da e mÃ©tricas de desempenho do cluster de processamento de nÃºmeros primos."})]}),a.jsxs("div",{className:"grid md:grid-cols-3 gap-6 mb-12",children:[a.jsxs("div",{className:"bg-black/40 border border-green-500/20 p-6 rounded-xl",children:[a.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[a.jsx(oo,{className:"text-green-500",size:24}),a.jsx("h3",{className:"text-lg font-bold text-white m-0",children:"LatÃªncia Global"})]}),a.jsx("p",{className:"text-4xl font-mono font-bold text-white mb-1",children:"24ms"}),a.jsx("p",{className:"text-xs text-gray-500",children:"MÃ©dia ponderada (AmÃ©rica do Sul)"})]}),a.jsxs("div",{className:"bg-black/40 border border-blue-500/20 p-6 rounded-xl",children:[a.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[a.jsx(Tr,{className:"text-blue-500",size:24}),a.jsx("h3",{className:"text-lg font-bold text-white m-0",children:"Carga da CPU"})]}),a.jsx("p",{className:"text-4xl font-mono font-bold text-white mb-1",children:"12%"}),a.jsx("p",{className:"text-xs text-gray-500",children:"Ocioso / Aguardando Jobs"})]}),a.jsxs("div",{className:"bg-black/40 border border-purple-500/20 p-6 rounded-xl",children:[a.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[a.jsx(Nt,{className:"text-purple-500",size:24}),a.jsx("h3",{className:"text-lg font-bold text-white m-0",children:"MitigaÃ§Ã£o"})]}),a.jsx("p",{className:"text-4xl font-mono font-bold text-white mb-1",children:"ATIVO"}),a.jsx("p",{className:"text-xs text-gray-500",children:"WAF & DDoS Protection"})]})]}),a.jsxs("div",{className:"space-y-8 text-gray-300",children:[a.jsxs("h2",{className:"text-2xl font-bold text-white flex items-center gap-2 mt-12",children:[a.jsx(Q,{className:"text-primary"}),"1. Arquitetura de Monitoramento DistribuÃ­do"]}),a.jsxs("p",{children:["O sistema ",a.jsx("strong",{children:"Primos.mat.br"})," utiliza uma arquitetura de monitoramento hÃ­brida, combinando verificaÃ§Ãµes ativas (Synthetic Monitoring) e passivas (Real User Monitoring - RUM). Nossa infraestrutura estÃ¡ hospedada em um ambiente VPS de alta performance, protegido por uma camada de Edge Computing (Cloudflare)."]}),a.jsx("p",{children:"O componente de telemetria visÃ­vel na pÃ¡gina inicial (TelemetryMonitor) executa pings assÃ­ncronos (mÃ©todo HEAD) contra nossa prÃ³pria infraestrutura para medir a latÃªncia real percebida pelo cliente, eliminando imprecisÃµes de testes sintÃ©ticos externos."}),a.jsxs("h2",{className:"text-2xl font-bold text-white flex items-center gap-2 mt-12",children:[a.jsx(ye,{className:"text-primary"}),"2. Metodologia de CÃ¡lculo de Uptime"]}),a.jsx("p",{children:"O cÃ¡lculo de disponibilidade (Uptime) exibido nÃ£o Ã© apenas um contador estÃ¡tico. Ele reflete o tempo de atividade do processo do servidor de aplicaÃ§Ã£o (Node.js/Nginx) desde a Ãºltima reinicializaÃ§Ã£o ou deploy."}),a.jsx("div",{className:"bg-gray-900 p-4 rounded-lg border-l-4 border-primary font-mono text-sm overflow-x-auto",children:a.jsxs("code",{children:["const uptime = Date.now() - serverStartTime;",a.jsx("br",{}),"// Onde serverStartTime Ã© sincronizado com o timestamp do deploy"]})}),a.jsx("p",{children:"Isso garante transparÃªncia total sobre a estabilidade do sistema. ReinicializaÃ§Ãµes para manutenÃ§Ã£o ou atualizaÃ§Ãµes de seguranÃ§a resetam este contador, mantendo a mÃ©trica honesta."}),a.jsxs("h2",{className:"text-2xl font-bold text-white flex items-center gap-2 mt-12",children:[a.jsx(Ye,{className:"text-primary"}),"3. SeguranÃ§a e DetecÃ§Ã£o de Anomalias"]}),a.jsx("p",{children:"O sistema inclui proteÃ§Ãµes integradas contra abuso (Rate Limiting) no Scanner de Primalidade. Tentativas de forÃ§a bruta ou escaneamento automatizado rÃ¡pido sÃ£o detectadas heuristicamente:"}),a.jsxs("ul",{className:"list-disc pl-6 space-y-4",children:[a.jsxs("li",{children:[a.jsx("strong",{children:"Throttling DinÃ¢mico:"})," Se um IP realiza mais de 5 verificaÃ§Ãµes por segundo, o acesso Ã© temporariamente suspenso."]}),a.jsxs("li",{children:[a.jsx("strong",{children:"AnÃ¡lise de PadrÃµes:"})," Entradas nÃ£o numÃ©ricas ou payloads maliciosos (SQL Injection, XSS) sÃ£o sanitizados e registrados antes mesmo de chegarem ao motor de processamento matemÃ¡tico."]}),a.jsxs("li",{children:[a.jsx("strong",{children:"IntegraÃ§Ã£o com Telegram:"})," Alertas crÃ­ticos de seguranÃ§a sÃ£o despachados em tempo real para o canal de administraÃ§Ã£o via API criptografada."]})]}),a.jsx("h2",{className:"text-2xl font-bold text-white mt-12 mb-6",children:"ConclusÃ£o TÃ©cnica"}),a.jsx("p",{children:'A telemetria nÃ£o Ã© apenas um "painel bonito"; Ã© a ferramenta vital que nos permite garantir a precisÃ£o dos cÃ¡lculos matemÃ¡ticos distribuÃ­dos. Ao monitorar a latÃªncia e a integridade do sistema em tempo real, asseguramos que cada verificaÃ§Ã£o de nÃºmero primo seja processada com a mÃ¡xima eficiÃªncia e confiabilidade.'})]})]})})),_d=({article:t})=>a.jsxs("div",{className:"min-h-screen bg-gray-50 text-gray-800 font-sans",children:[a.jsx("header",{className:"bg-white border-b border-gray-200 shadow-sm sticky top-0 z-50",children:a.jsxs("div",{className:"max-w-4xl mx-auto px-6 py-4 flex justify-between items-center",children:[a.jsx(B,{to:"/",className:"text-green-700 font-bold text-lg hover:text-green-800 transition-colors",children:"Primos.mat.br"}),a.jsxs("div",{className:"text-xs text-gray-500 font-mono flex items-center gap-2 bg-gray-100 px-3 py-1 rounded-full",children:[a.jsx(Q,{className:"w-3 h-3"}),"Arquivo Restaurado"]})]})}),a.jsxs("main",{className:"max-w-3xl mx-auto px-6 py-12",children:[a.jsxs("div",{className:"mb-10 text-center",children:[a.jsx("h1",{className:"text-3xl md:text-5xl font-extrabold text-gray-900 mb-6 leading-tight",children:t.title}),a.jsx("div",{className:"flex justify-center items-center gap-6 text-sm text-gray-500 font-mono",children:a.jsxs("span",{className:"flex items-center gap-2",children:[a.jsx(lt,{className:"w-4 h-4"}),"Restaurado em: ",new Date(t.created_at).toLocaleDateString()]})})]}),a.jsxs("div",{className:"bg-amber-50 border-l-4 border-amber-500 p-4 mb-10 rounded-r text-sm text-amber-800 flex items-start gap-3",children:[a.jsx(Ue,{className:"w-5 h-5 flex-shrink-0 mt-0.5"}),a.jsxs("p",{children:[a.jsx("strong",{children:"Nota do Arquivo:"})," Esta pÃ¡gina foi reconstruÃ­da automaticamente a partir de registros histÃ³ricos. O conteÃºdo original pode ter sido preservado do antigo ",a.jsx("em",{children:"primos.mat.br"}),"."]})]}),a.jsx("article",{className:"prose prose-lg prose-green mx-auto bg-white p-8 md:p-12 rounded-xl shadow-lg border border-gray-100",children:a.jsx("div",{className:"whitespace-pre-wrap leading-relaxed text-gray-700",children:t.content_markdown})}),a.jsx("footer",{className:"mt-16 pt-8 border-t border-gray-200 text-center text-sm text-gray-400",children:a.jsxs("p",{children:["Â© ",new Date().getFullYear()," Primos.mat.br - Preservando a MatemÃ¡tica."]})})]})]}),jd=()=>{const t=ie(),[e,r]=f.useState("logging"),[s,n]=f.useState(!0),[i,o]=f.useState(null);return f.useEffect(()=>{(async()=>{if(t.pathname.startsWith("/dashboard")||t.pathname.startsWith("/acervo")){n(!1);return}const c=await ve.getPublishedArticleByUrl(t.pathname);c&&o(c),n(!1)})()},[t.pathname]),f.useEffect(()=>{if(s||i)return;(async()=>{if(!P){r("error");return}try{const{error:c}=await P.from("traffic_logs").insert({url:t.pathname,referrer:document.referrer||"Direct",user_agent:navigator.userAgent,created_at:new Date().toISOString()});if(c)throw c;r("recorded")}catch(c){console.error("Failed to log 404:",c),r("error")}})()},[t,s,i]),s?a.jsx("div",{className:"min-h-screen bg-black flex items-center justify-center text-green-500 font-mono",children:a.jsxs("div",{className:"flex flex-col items-center gap-4",children:[a.jsx(De,{className:"w-8 h-8 animate-spin"}),a.jsx("p",{children:"Buscando nos arquivos..."})]})}):i?a.jsx(_d,{article:i}):a.jsxs("div",{className:"min-h-screen bg-black text-green-500 font-mono p-6 flex flex-col items-center justify-center",children:[a.jsxs("div",{className:"max-w-2xl w-full border border-green-900 bg-black/90 p-8 rounded shadow-[0_0_20px_rgba(0,255,0,0.1)]",children:[a.jsxs("div",{className:"flex items-center gap-3 mb-6 border-b border-green-900 pb-4",children:[a.jsx(vo,{className:"w-8 h-8 text-red-500 animate-pulse"}),a.jsx("h1",{className:"text-2xl font-bold tracking-wider",children:"404: ANOMALIA DETECTADA"})]}),a.jsxs("div",{className:"space-y-4 mb-8",children:[a.jsxs("div",{className:"flex items-center gap-2 text-sm text-green-400/80",children:[a.jsx(De,{className:"w-4 h-4"}),a.jsx("span",{children:"Analisando solicitaÃ§Ã£o de rota:"})]}),a.jsx("code",{className:"block bg-green-900/20 p-3 rounded text-green-300 break-all border border-green-900/50",children:t.pathname}),a.jsxs("div",{className:"mt-4 p-4 bg-green-900/10 rounded border border-green-900/30",children:[a.jsx("h3",{className:"text-xs uppercase tracking-widest text-green-600 mb-2",children:"System Logs"}),a.jsxs("div",{className:"space-y-1 text-xs font-mono",children:[a.jsx("p",{children:"[SYSTEM] Rota nÃ£o encontrada no mapa atual."}),a.jsx("p",{children:"[HONEYPOT] Capturando metadados da solicitaÃ§Ã£o..."}),e==="logging"&&a.jsx("p",{className:"animate-pulse",children:"[NETWORK] Enviando relatÃ³rio para a Base..."}),e==="recorded"&&a.jsx("p",{className:"text-green-400",children:"[SUCCESS] Anomalia registrada. Equipe de Reconhecimento notificada."}),e==="error"&&a.jsx("p",{className:"text-red-500",children:"[ERROR] Falha ao contatar servidor de logs (Modo Offline)."}),a.jsx("p",{children:"[ACTION] Aguardando recuperaÃ§Ã£o manual do operador."})]})]})]}),a.jsxs("div",{className:"text-center space-y-4",children:[a.jsxs("p",{className:"text-sm text-gray-400",children:["Esta pÃ¡gina pode ter sido removida ou o link que vocÃª seguiu Ã© antigo.",a.jsx("br",{}),"Nosso sistema de vigilÃ¢ncia jÃ¡ estÃ¡ ciente desta falha."]}),a.jsxs(B,{to:"/",className:"inline-flex items-center gap-2 bg-green-900/30 hover:bg-green-900/50 text-green-400 px-6 py-2 rounded transition-colors border border-green-800 hover:border-green-600",children:[a.jsx(to,{className:"w-4 h-4"}),"Retornar Ã  Base (Home)"]})]})]}),a.jsx("div",{className:"mt-8 text-xs text-green-900",children:"PRIMOS.MAT.BR // SYSTEM ID: RECON-404"})]})},Nd=()=>{var g,b,v;const t=Pt(),[e,r]=f.useState(!1),[s,n]=f.useState(""),[i,o]=f.useState(""),[l,c]=f.useState(""),[d,u]=f.useState(null),[h,p]=f.useState([]);f.useEffect(()=>{const x=document.createElement("meta");return x.name="robots",x.content="noindex, nofollow",document.head.appendChild(x),sessionStorage.getItem("recon_session")==="active"&&r(!0),()=>{document.head.removeChild(x)}},[]);const m=x=>{x.preventDefault(),s==="wandersantos"&&i==="rmd223128"?(r(!0),sessionStorage.setItem("recon_session","active"),c("")):c("Credenciais invÃ¡lidas. Acesso negado.")};return f.useEffect(()=>{e&&(ve.getLatestResults().then(x=>u(x)).catch(x=>console.error("Dashboard Data Error:",x)),P&&P.from("traffic_logs").select("*").order("created_at",{ascending:!1}).limit(10).then(({data:x})=>{x&&p(x)}))},[e]),e?a.jsxs("div",{className:"min-h-screen bg-black text-green-400 font-mono p-6",children:[a.jsxs("header",{className:"flex justify-between items-center mb-8 border-b border-green-900/50 pb-4",children:[a.jsxs("div",{className:"flex items-center gap-4",children:[a.jsx(ye,{className:"w-8 h-8 text-green-500 animate-pulse"}),a.jsxs("div",{children:[a.jsx("h1",{className:"text-2xl font-bold tracking-wider",children:"RECON MASTER CONTROL"}),a.jsx("p",{className:"text-xs text-green-700",children:"MODO: VIGILÃ‚NCIA PERPÃ‰TUA (AUTÃ”NOMO)"})]})]}),a.jsxs("div",{className:"flex items-center gap-4",children:[a.jsxs("div",{className:"text-right",children:[a.jsx("p",{className:"text-xs text-green-600",children:"OPERADOR"}),a.jsx("p",{className:"text-sm font-bold",children:"WANDER SANTOS"})]}),a.jsx("div",{className:"w-2 h-2 rounded-full bg-green-500 animate-ping"})]})]}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 mb-8",children:[a.jsxs("div",{className:"bg-gray-900/50 border border-green-900/50 p-6 rounded relative overflow-hidden group hover:border-green-500/50 transition-all",children:[a.jsx("div",{className:"absolute top-0 right-0 p-4 opacity-20 group-hover:opacity-40 transition-opacity",children:a.jsx(Lt,{className:"w-16 h-16"})}),a.jsx("h3",{className:"text-sm text-green-600 uppercase mb-2",children:"Links Recuperados"}),a.jsx("p",{className:"text-4xl font-bold text-white mb-2",children:(d==null?void 0:d.totalLinks)||0}),a.jsx("div",{className:"w-full bg-gray-800 h-1 rounded overflow-hidden",children:a.jsx("div",{className:"bg-green-500 h-full w-[75%]"})}),a.jsx("p",{className:"text-xs text-green-600 mt-2",children:"Cobertura estimada: 75%"})]}),a.jsxs("div",{className:"bg-gray-900/50 border border-green-900/50 p-6 rounded relative overflow-hidden group hover:border-green-500/50 transition-all",children:[a.jsx("div",{className:"absolute top-0 right-0 p-4 opacity-20 group-hover:opacity-40 transition-opacity",children:a.jsx(sr,{className:"w-16 h-16"})}),a.jsx("h3",{className:"text-sm text-green-600 uppercase mb-2",children:"Status do Agente"}),a.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[a.jsx("span",{className:"w-3 h-3 bg-green-500 rounded-full"}),a.jsx("p",{className:"text-lg font-bold text-white",children:"ONLINE / AGUARDANDO"})]}),a.jsx("p",{className:"text-xs text-green-600",children:"PrÃ³xima varredura automÃ¡tica: 03:00 UTC"}),a.jsx("p",{className:"text-xs text-green-800 mt-2",children:"Ciclo: 6 horas"})]}),a.jsxs("div",{className:"bg-gray-900/50 border border-green-900/50 p-6 rounded relative overflow-hidden group hover:border-green-500/50 transition-all",children:[a.jsx("div",{className:"absolute top-0 right-0 p-4 opacity-20 group-hover:opacity-40 transition-opacity",children:a.jsx(Nt,{className:"w-16 h-16"})}),a.jsx("h3",{className:"text-sm text-green-600 uppercase mb-2",children:"SeguranÃ§a do Painel"}),a.jsx("p",{className:"text-lg font-bold text-white mb-1",children:"BLINDADO"}),a.jsxs("div",{className:"flex items-center gap-2 text-xs text-green-600",children:[a.jsx(Ye,{className:"w-3 h-3"}),a.jsx("span",{children:"NOINDEX ATIVO"})]}),a.jsxs("div",{className:"flex items-center gap-2 text-xs text-green-600 mt-1",children:[a.jsx(Q,{className:"w-3 h-3"}),a.jsx("span",{children:"ACESSO RESTRITO"})]})]})]}),a.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[a.jsxs("div",{className:"bg-gray-900/50 border border-green-900/50 rounded p-6",children:[a.jsxs("h3",{className:"text-lg font-bold mb-4 flex items-center gap-2 border-b border-green-900/50 pb-2",children:[a.jsx(be,{className:"w-5 h-5"}),"O Acervo (Links Recuperados)"]}),a.jsxs("div",{className:"space-y-3",children:[(g=d==null?void 0:d.recoveredArticles)==null?void 0:g.map((x,w)=>a.jsxs("div",{className:"flex flex-col gap-2 bg-black/40 p-4 rounded border border-green-900/30 hover:border-green-500/30 transition-all group",children:[a.jsxs("div",{className:"flex justify-between items-start",children:[a.jsxs("div",{children:[a.jsx("h4",{className:"text-sm font-bold text-green-300 group-hover:text-green-200 transition-colors",children:x.title||"TÃ­tulo Desconhecido"}),a.jsxs("a",{href:`https://web.archive.org/web/*/${x.url.startsWith("/")?"primos.mat.br"+x.url:x.url}`,target:"_blank",rel:"noopener noreferrer",className:"text-xs text-green-700 font-mono hover:text-green-500 hover:underline flex items-center gap-1 mt-1",children:[a.jsx(Q,{className:"w-3 h-3"}),x.url]})]}),a.jsx("span",{className:"text-[10px] bg-green-900/30 px-2 py-1 rounded text-green-500 border border-green-900 whitespace-nowrap",children:x.source})]}),a.jsxs("div",{className:"flex justify-between items-center mt-2 border-t border-green-900/20 pt-2",children:[a.jsxs("span",{className:"text-[10px] text-green-800",children:["Status: ",a.jsx("span",{className:"text-green-600 uppercase",children:x.status})]}),a.jsxs("button",{onClick:()=>{var y;x.status==="referÃªncia_externa"&&((y=x.scan_data)!=null&&y.referring_url)?window.open(x.scan_data.referring_url,"_blank"):window.open(`http://web.archive.org/web/2/${"primos.mat.br"+x.url}`,"_blank")},className:"text-xs bg-green-900/20 hover:bg-green-700/40 text-green-400 py-1 px-3 rounded border border-green-800 hover:border-green-500 transition-all flex items-center gap-1",children:[x.status==="referÃªncia_externa"?a.jsx(Q,{className:"w-3 h-3"}):a.jsx(be,{className:"w-3 h-3"}),x.status==="referÃªncia_externa"?"Ver ReferÃªncia":"Visualizar Fonte"]})]})]},w)),a.jsx("div",{className:"text-center pt-2",children:a.jsx("button",{className:"text-xs text-green-600 hover:text-green-400 underline",children:d!=null&&d.totalLinks?`Ver todos os ${d.totalLinks} registros`:"Ver todos os registros"})})]})]}),a.jsxs("div",{className:"bg-gray-900/50 border border-green-900/50 rounded p-6 lg:col-span-2",children:[a.jsxs("h3",{className:"text-lg font-bold mb-4 flex items-center gap-2 border-b border-green-900/50 pb-2",children:[a.jsx(be,{className:"w-5 h-5 text-blue-400"}),a.jsx("span",{className:"text-blue-400",children:"Protocolo LÃ¡zaro: GestÃ£o de ConteÃºdo"})]}),a.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:((b=d==null?void 0:d.drafts)==null?void 0:b.length)===0?a.jsx("p",{className:"text-gray-500 italic text-sm p-4",children:"Nenhum rascunho gerado ainda."}):(v=d==null?void 0:d.drafts)==null?void 0:v.map(x=>a.jsxs("div",{className:`bg-blue-900/10 border ${x.status==="published"?"border-green-500/50":"border-blue-900/30"} p-4 rounded hover:border-blue-500/50 transition-all group`,children:[a.jsxs("div",{className:"flex justify-between items-start mb-2",children:[a.jsx("h4",{className:"text-blue-300 font-bold text-sm group-hover:text-blue-200 line-clamp-2",children:x.title}),a.jsx("span",{className:`text-[10px] px-2 py-1 rounded border uppercase font-bold flex items-center gap-1 ${x.status==="published"?"bg-green-900/30 text-green-400 border-green-900":"bg-yellow-900/30 text-yellow-400 border-yellow-900"}`,children:x.status==="published"?a.jsxs(a.Fragment,{children:[a.jsx(Q,{size:10})," PUBLICADO"]}):a.jsxs(a.Fragment,{children:[a.jsx(ye,{size:10})," PENDENTE"]})})]}),a.jsx("p",{className:"text-xs text-blue-500/70 font-mono mb-3 truncate",children:x.original_url}),a.jsxs("div",{className:"flex justify-between items-center text-xs",children:[a.jsx("span",{className:"text-gray-500",children:new Date(x.created_at).toLocaleDateString()}),a.jsx("button",{onClick:()=>t(`/acervo/draft/${x.id}`),className:"text-blue-400 hover:text-white underline",children:x.status==="published"?"Editar / Repubblicar":"Revisar e Publicar"})]})]},x.id))})]}),a.jsxs("div",{className:"bg-black border border-green-900 rounded p-4 font-mono text-xs h-64 overflow-y-auto custom-scrollbar",children:[a.jsxs("div",{className:"flex items-center gap-2 mb-2 text-green-700 border-b border-green-900/30 pb-1",children:[a.jsx(sr,{className:"w-3 h-3"}),a.jsx("span",{children:"SYSTEM LOG"})]}),a.jsxs("div",{className:"space-y-1 text-green-500/80",children:[a.jsx("p",{children:"[SYSTEM] Iniciando protocolo de seguranÃ§a..."}),a.jsx("p",{children:"[SYSTEM] Meta tag 'noindex' injetada com sucesso."}),a.jsx("p",{children:"[AUTH] UsuÃ¡rio 'wandersantos' autenticado via Secure Hash."}),a.jsx("p",{children:"[DAEMON] Conectando ao banco de dados distribuÃ­do..."}),a.jsx("p",{children:"[DAEMON] GitHub Actions Status: IDLE (Last run: Success)."}),a.jsx("p",{children:"[CRAWLER] WayBack Machine API: Online."}),a.jsx("p",{children:"[CRAWLER] Common Crawl Index: Carregado."}),a.jsx("p",{children:"[READY] Sistema aguardando instruÃ§Ãµes ou ciclo automÃ¡tico."}),a.jsx("p",{className:"animate-pulse",children:"_"})]})]})]}),a.jsxs("div",{className:"mt-6 bg-gray-900/50 border border-green-900/50 rounded p-6",children:[a.jsxs("h3",{className:"text-lg font-bold mb-4 flex items-center gap-2 border-b border-green-900/50 pb-2",children:[a.jsx(Ue,{className:"w-5 h-5 text-yellow-500"}),"TrÃ¡fego 404 Detectado (Honeypot Live)"]}),a.jsx("div",{className:"overflow-x-auto",children:a.jsxs("table",{className:"w-full text-xs text-left",children:[a.jsx("thead",{children:a.jsxs("tr",{className:"text-green-700 border-b border-green-900/30",children:[a.jsx("th",{className:"pb-2",children:"HORA"}),a.jsx("th",{className:"pb-2",children:"ROTA ALVO"}),a.jsx("th",{className:"pb-2",children:"ORIGEM (REFERRER)"}),a.jsx("th",{className:"pb-2",children:"AGENTE"})]})}),a.jsx("tbody",{className:"font-mono text-green-400",children:h.length===0?a.jsx("tr",{children:a.jsx("td",{colSpan:4,className:"py-4 text-center text-gray-500 italic",children:"Nenhuma anomalia detectada nas Ãºltimas 24h."})}):h.map((x,w)=>a.jsxs("tr",{className:"border-b border-green-900/10 hover:bg-green-900/20 transition-colors",children:[a.jsx("td",{className:"py-2 text-green-600",children:new Date(x.created_at).toLocaleTimeString()}),a.jsx("td",{className:"py-2 text-red-400 font-bold",children:x.url}),a.jsx("td",{className:"py-2 text-blue-400",children:x.referrer}),a.jsx("td",{className:"py-2 opacity-50 truncate max-w-[200px]",title:x.user_agent,children:x.user_agent})]},w))})]})})]})]}):a.jsx("div",{className:"min-h-screen bg-gray-900 flex items-center justify-center p-4 font-mono",children:a.jsxs("div",{className:"max-w-md w-full bg-black border border-green-900/50 p-8 rounded-lg shadow-2xl relative overflow-hidden",children:[a.jsx("div",{className:"absolute top-0 left-0 w-full h-1 bg-gradient-to-r from-transparent via-green-500 to-transparent opacity-50"}),a.jsx("div",{className:"flex justify-center mb-8",children:a.jsx("div",{className:"bg-green-900/20 p-4 rounded-full border border-green-500/30",children:a.jsx(Nt,{className:"w-12 h-12 text-green-500"})})}),a.jsx("h2",{className:"text-2xl text-green-500 text-center mb-2 tracking-widest uppercase",children:"Acesso Restrito"}),a.jsx("p",{className:"text-green-700 text-center mb-8 text-xs",children:"SISTEMA DE INTELIGÃŠNCIA E RECONHECIMENTO"}),a.jsxs("form",{onSubmit:m,className:"space-y-6",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-green-800 text-xs mb-1 uppercase",children:"IdentificaÃ§Ã£o"}),a.jsxs("div",{className:"relative",children:[a.jsx(Q,{className:"absolute left-3 top-3 w-4 h-4 text-green-700"}),a.jsx("input",{type:"text",value:s,onChange:x=>n(x.target.value),className:"w-full bg-gray-900/50 border border-green-900 text-green-400 pl-10 pr-4 py-2 focus:outline-none focus:border-green-500 focus:ring-1 focus:ring-green-500 transition-all rounded",placeholder:"UsuÃ¡rio"})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-green-800 text-xs mb-1 uppercase",children:"Chave de Acesso"}),a.jsxs("div",{className:"relative",children:[a.jsx(Ye,{className:"absolute left-3 top-3 w-4 h-4 text-green-700"}),a.jsx("input",{type:"password",value:i,onChange:x=>o(x.target.value),className:"w-full bg-gray-900/50 border border-green-900 text-green-400 pl-10 pr-4 py-2 focus:outline-none focus:border-green-500 focus:ring-1 focus:ring-green-500 transition-all rounded",placeholder:"Senha"})]})]}),l&&a.jsxs("div",{className:"flex items-center gap-2 text-red-500 text-xs bg-red-900/10 p-2 rounded border border-red-900/30",children:[a.jsx(Ue,{className:"w-4 h-4"}),l]}),a.jsx("button",{type:"submit",className:"w-full bg-green-900/30 hover:bg-green-800/40 text-green-400 border border-green-700/50 py-2 px-4 rounded transition-all uppercase tracking-widest text-sm font-bold hover:shadow-[0_0_15px_rgba(34,197,94,0.2)]",children:"Autenticar"})]}),a.jsx("div",{className:"mt-8 text-center",children:a.jsxs("p",{className:"text-[10px] text-green-900",children:["IP REGISTRADO. TENTATIVAS FALHAS SERÃƒO REPORTADAS.",a.jsx("br",{}),"SECURE CONNECTION: ENCRYPTED"]})})]})})},Sd=()=>{const{id:t}=$n(),e=Pt(),[r,s]=f.useState(null),[n,i]=f.useState(!0),[o,l]=f.useState(!1),[c,d]=f.useState(""),[u,h]=f.useState(!1);f.useEffect(()=>{t&&ve.getDraftById(t).then(g=>{s(g),d((g==null?void 0:g.content_markdown)||""),i(!1)})},[t]);const p=async()=>{if(!r)return;h(!0),await ve.saveDraft(r.id,c)&&(s({...r,content_markdown:c}),l(!1)),h(!1)},m=async()=>{r&&confirm("Tem certeza? Isso tornarÃ¡ o artigo pÃºblico e acessÃ­vel pela URL original.")&&(h(!0),await ve.publishDraft(r.id)&&s({...r,status:"published"}),h(!1))};return n?a.jsx("div",{className:"min-h-screen bg-black text-green-500 flex items-center justify-center font-mono",children:a.jsxs("div",{className:"flex flex-col items-center gap-4",children:[a.jsx("div",{className:"w-8 h-8 border-4 border-green-500 border-t-transparent rounded-full animate-spin"}),a.jsx("p",{children:"Decodificando Arquivos..."})]})}):r?a.jsxs("div",{className:"min-h-screen bg-gray-900 text-gray-200 font-sans selection:bg-green-900 selection:text-white",children:[a.jsxs("div",{className:"bg-black border-b border-green-900/30 p-4 sticky top-0 z-50 flex justify-between items-center backdrop-blur-md bg-opacity-80",children:[a.jsxs("button",{onClick:()=>e("/dashboard-recon-2026-x"),className:"flex items-center gap-2 text-green-500 hover:text-green-400 transition-colors font-mono text-sm",children:[a.jsx(Oi,{className:"w-4 h-4"}),"Voltar ao Comando"]}),a.jsxs("div",{className:"flex items-center gap-4",children:[a.jsx("span",{className:`px-2 py-1 border text-xs rounded uppercase font-bold tracking-wider ${r.status==="published"?"bg-green-900/30 border-green-700/50 text-green-500":"bg-yellow-900/30 border-yellow-700/50 text-yellow-500"}`,children:r.status}),r.status!=="published"&&a.jsxs("button",{onClick:m,disabled:u,className:"flex items-center gap-2 bg-green-600 hover:bg-green-500 disabled:opacity-50 text-white px-4 py-2 rounded text-sm font-medium transition-colors shadow-lg shadow-green-900/20",children:[a.jsx(Q,{className:"w-4 h-4"}),u?"Processando...":"Publicar Agora"]}),o?a.jsxs("div",{className:"flex gap-2",children:[a.jsx("button",{onClick:()=>l(!1),className:"bg-gray-700 hover:bg-gray-600 text-white px-4 py-2 rounded text-sm font-medium transition-colors",children:"Cancelar"}),a.jsxs("button",{onClick:p,disabled:u,className:"flex items-center gap-2 bg-blue-600 hover:bg-blue-500 disabled:opacity-50 text-white px-4 py-2 rounded text-sm font-medium transition-colors shadow-lg shadow-blue-900/20",children:[a.jsx(fo,{className:"w-4 h-4"}),u?"Salvando...":"Salvar AlteraÃ§Ãµes"]})]}):a.jsxs("button",{onClick:()=>l(!0),className:"flex items-center gap-2 bg-blue-600 hover:bg-blue-500 text-white px-4 py-2 rounded text-sm font-medium transition-colors shadow-lg shadow-blue-900/20",children:[a.jsx(ho,{className:"w-4 h-4"}),"Editar ConteÃºdo"]})]})]}),a.jsxs("div",{className:"max-w-4xl mx-auto p-8",children:[a.jsxs("header",{className:"mb-12 border-b border-gray-800 pb-8",children:[a.jsxs("div",{className:"flex items-center gap-2 text-green-500 mb-4 font-mono text-xs uppercase tracking-widest opacity-70",children:[a.jsx(be,{className:"w-4 h-4"}),"Protocolo LÃ¡zaro",a.jsx("span",{className:"mx-2 text-gray-700",children:"|"}),"ID: ",r.id.split("-")[0]]}),a.jsx("h1",{className:"text-4xl md:text-5xl font-bold text-white mb-6 leading-tight",children:r.title}),a.jsxs("div",{className:"flex flex-wrap gap-6 text-sm text-gray-400 font-mono",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(Q,{className:"w-4 h-4 text-blue-400"}),a.jsx("span",{className:"truncate max-w-xs",title:r.original_url,children:r.original_url})]}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(lt,{className:"w-4 h-4 text-purple-400"}),a.jsx("span",{children:new Date(r.created_at).toLocaleDateString()})]}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(ur,{className:"w-4 h-4 text-orange-400"}),a.jsx("span",{children:new Date(r.created_at).toLocaleTimeString()})]})]})]}),a.jsxs("div",{className:"bg-black/40 rounded-lg border border-gray-800 overflow-hidden shadow-2xl",children:[a.jsxs("div",{className:"bg-gray-900/80 px-4 py-2 border-b border-gray-800 flex justify-between items-center",children:[a.jsx("span",{className:"text-xs text-gray-500 font-mono",children:"source.md"}),a.jsxs("span",{className:"text-xs text-gray-600 font-mono",children:[c.length," chars"]})]}),o?a.jsx("textarea",{value:c,onChange:g=>d(g.target.value),className:"w-full h-[600px] bg-gray-900 text-gray-300 font-mono text-sm p-8 focus:outline-none resize-none",spellCheck:!1}):a.jsx("div",{className:"p-8 overflow-x-auto",children:a.jsx("pre",{className:"font-mono text-sm text-gray-300 whitespace-pre-wrap leading-relaxed",children:r.content_markdown})})]})]})]}):a.jsx("div",{className:"min-h-screen bg-black text-red-500 flex items-center justify-center font-mono",children:a.jsx("p",{children:"ERRO 404: Arquivo Corrompido ou Inexistente."})})},Ed=()=>{const[t,e]=f.useState([]),[r,s]=f.useState(!0),[n,i]=f.useState("");f.useEffect(()=>{(async()=>{try{const d=await ve.getPublishedArticles();d&&e(d)}catch(d){console.error("AcervoIndex error:",d)}finally{s(!1)}})()},[]);const o=t.filter(c=>c.title.toLowerCase().includes(n.toLowerCase())||c.meta_description&&c.meta_description.toLowerCase().includes(n.toLowerCase())),l=c=>{if(!c)return"from-gray-700 to-gray-900";const d=["from-green-400 to-blue-500","from-purple-500 to-pink-500","from-yellow-400 to-orange-500","from-red-500 to-pink-500","from-indigo-500 to-purple-500","from-blue-400 to-teal-500","from-green-500 to-emerald-700","from-gray-700 to-gray-900"];let u=0;for(let h=0;h<c.length;h++)u=c.charCodeAt(h)+((u<<5)-u);return d[Math.abs(u)%d.length]};return a.jsxs("div",{className:"min-h-screen bg-gray-50 text-gray-800 font-sans",children:[a.jsx("header",{className:"bg-white border-b border-gray-200 shadow-sm sticky top-0 z-10",children:a.jsxs("div",{className:"max-w-7xl mx-auto px-6 py-4 flex flex-col md:flex-row justify-between items-center gap-4",children:[a.jsxs(B,{to:"/",className:"text-green-700 font-bold text-xl hover:text-green-800 transition-colors flex items-center gap-2",children:[a.jsx($t,{className:"w-6 h-6"}),"O Acervo"]}),a.jsxs("div",{className:"flex items-center bg-gray-100 rounded-full px-4 py-2 w-full md:w-96 border border-gray-200 focus-within:border-green-500 focus-within:ring-1 focus-within:ring-green-500 transition-all shadow-inner",children:[a.jsx(De,{className:"w-5 h-5 text-gray-400 mr-3"}),a.jsx("input",{type:"text",placeholder:"Pesquisar no acervo...",className:"bg-transparent border-none outline-none text-sm w-full placeholder-gray-500 text-gray-700",value:n,onChange:c=>i(c.target.value)})]})]})}),a.jsx("div",{className:"bg-gradient-to-r from-green-900 to-green-800 text-white py-20 px-6 shadow-lg",children:a.jsxs("div",{className:"max-w-5xl mx-auto text-center",children:[a.jsx("h1",{className:"text-4xl md:text-6xl font-extrabold mb-6 tracking-tight drop-shadow-md",children:"MatemÃ¡tica Recuperada"}),a.jsxs("p",{className:"text-green-100 text-lg md:text-xl max-w-3xl mx-auto leading-relaxed font-light",children:["Um projeto de preservaÃ§Ã£o digital dedicado a resgatar o conhecimento matemÃ¡tico perdido do domÃ­nio ",a.jsx("em",{children:"primos.mat.br"}),"."]})]})}),a.jsx("main",{className:"max-w-7xl mx-auto px-6 py-12",children:r?a.jsxs("div",{className:"flex flex-col items-center justify-center py-32 text-gray-400",children:[a.jsx("div",{className:"w-12 h-12 border-4 border-green-600 border-t-transparent rounded-full animate-spin mb-4"}),a.jsx("p",{className:"text-lg font-medium text-gray-500",children:"Carregando o acervo..."})]}):o.length>0?a.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-8",children:o.map(c=>a.jsxs(B,{to:Ot(c.original_url),className:"group bg-white rounded-2xl border border-gray-100 shadow-sm hover:shadow-2xl hover:-translate-y-1 transition-all duration-300 overflow-hidden flex flex-col h-full",children:[a.jsxs("div",{className:`h-48 relative overflow-hidden bg-gradient-to-br ${l(c.id)}`,children:[a.jsx("div",{className:"absolute inset-0 bg-black/10 group-hover:bg-transparent transition-colors duration-300"}),a.jsx("div",{className:"absolute -bottom-6 -right-6 text-white/20 transform rotate-12 group-hover:scale-110 group-hover:rotate-0 transition-all duration-500",children:a.jsx(be,{className:"w-32 h-32"})}),a.jsx("div",{className:"absolute top-4 left-4",children:a.jsx("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-white/20 text-white backdrop-blur-sm border border-white/10",children:"Recuperado"})})]}),a.jsxs("div",{className:"p-6 flex-1 flex flex-col justify-between",children:[a.jsxs("div",{children:[a.jsx("h2",{className:"text-lg font-bold text-gray-900 mb-3 group-hover:text-green-700 transition-colors line-clamp-2 leading-tight",children:c.title}),a.jsx("p",{className:"text-xs text-gray-500 mb-4 font-mono truncate",children:Ot(c.original_url)})]}),a.jsxs("div",{className:"flex items-center justify-between mt-4 pt-4 border-t border-gray-50",children:[a.jsxs("span",{className:"text-xs text-gray-400 flex items-center gap-1",children:[a.jsx(lt,{className:"w-3 h-3"}),new Date(c.created_at).toLocaleDateString("pt-BR")]}),a.jsxs("span",{className:"text-green-600 text-sm font-semibold flex items-center gap-1 group-hover:translate-x-1 transition-transform",children:["Ler Artigo ",a.jsx($e,{className:"w-4 h-4"})]})]})]})]},c.id||Math.random().toString()))}):a.jsxs("div",{className:"text-center py-32 bg-white rounded-3xl shadow-sm border border-gray-100",children:[a.jsx(De,{className:"w-16 h-16 text-gray-300 mx-auto mb-4"}),a.jsx("h3",{className:"text-xl font-medium text-gray-900 mb-2",children:"Nenhum artigo encontrado"}),a.jsx("p",{className:"text-gray-500 max-w-md mx-auto",children:"NÃ£o encontramos nenhum artigo correspondente Ã  sua busca. Tente outros termos ou limpe o filtro."}),a.jsx("button",{onClick:()=>i(""),className:"mt-6 px-6 py-2 bg-green-600 text-white rounded-full font-medium hover:bg-green-700 transition-colors shadow-lg shadow-green-200",children:"Limpar Busca"})]})}),a.jsx("footer",{className:"bg-white border-t border-gray-200 mt-12 py-12",children:a.jsxs("div",{className:"max-w-6xl mx-auto px-6 text-center text-gray-400 text-sm",children:[a.jsxs("p",{children:["Â© ",new Date().getFullYear()," Primos.mat.br. Todos os direitos reservados."]}),a.jsx("p",{className:"mt-2",children:"Preservando a histÃ³ria da matemÃ¡tica na web."})]})})]})},vs=()=>a.jsxs("div",{className:"min-h-screen bg-slate-900 text-slate-200",children:[a.jsxs(Qa,{children:[a.jsx("title",{children:"The First 100 Billion Primes (AtÃ© 100 BilhÃµes de Primos) | Primos.mat.br"}),a.jsx("meta",{name:"description",content:"Access the historical dataset of the first 100 billion prime numbers. Acesso ao banco de dados histÃ³rico dos primeiros 100 bilhÃµes de nÃºmeros primos."}),a.jsx("link",{rel:"canonical",href:"https://primos.mat.br/Ate100G_en.html"})]}),a.jsxs("section",{className:"relative py-20 px-4 overflow-hidden",children:[a.jsx("div",{className:"absolute inset-0 bg-gradient-to-b from-slate-900 via-blue-950/20 to-slate-900"}),a.jsxs("div",{className:"max-w-4xl mx-auto relative z-10 text-center",children:[a.jsxs("div",{className:"inline-flex items-center gap-2 px-3 py-1 rounded-full bg-yellow-900/30 border border-yellow-700/50 text-yellow-500 text-sm mb-6",children:[a.jsx(Ue,{size:14}),a.jsx("span",{children:"Legacy Page Restored / PÃ¡gina HistÃ³rica Restaurada"})]}),a.jsxs("h1",{className:"text-4xl md:text-6xl font-bold text-white mb-6",children:["The First 100 Billion Primes",a.jsx("span",{className:"block text-2xl md:text-3xl text-blue-400 mt-2 font-light",children:"(Os Primeiros 100 BilhÃµes de Primos)"})]}),a.jsxs("p",{className:"text-lg text-slate-400 max-w-2xl mx-auto mb-10 leading-relaxed",children:["You have reached the official restoration page of the ",a.jsx("b",{children:"Primos.mat.br"})," project. The original datasets used by researchers worldwide are being brought back online."]}),a.jsxs("div",{className:"grid md:grid-cols-2 gap-6 max-w-2xl mx-auto",children:[a.jsxs("div",{className:"bg-slate-800/50 p-6 rounded-xl border border-slate-700 hover:border-blue-500/50 transition-all group text-left",children:[a.jsxs("h3",{className:"text-white font-bold text-lg mb-2 flex items-center gap-2",children:[a.jsx(Lt,{size:18,className:"text-blue-400"}),"For Researchers"]}),a.jsx("p",{className:"text-sm text-slate-400 mb-4",children:"Access the raw data files (txt/7z) for machine learning and cryptography research."}),a.jsxs("a",{href:"/public/primeiros_10000_primos.txt",download:!0,className:"inline-flex items-center gap-2 text-blue-400 hover:text-blue-300 font-medium text-sm",children:[a.jsx(Ki,{size:14})," Download Sample (10k)"]})]}),a.jsxs("div",{className:"bg-blue-900/20 p-6 rounded-xl border border-blue-800/50 hover:border-green-500/50 transition-all group text-left relative overflow-hidden",children:[a.jsx("div",{className:"absolute top-0 right-0 p-4 opacity-10",children:a.jsx($e,{size:100})}),a.jsxs("h3",{className:"text-white font-bold text-lg mb-2 flex items-center gap-2",children:[a.jsx("span",{className:"bg-green-500/20 text-green-400 text-xs px-2 py-0.5 rounded",children:"PT-BR"}),"Para Brasileiros"]}),a.jsx("p",{className:"text-sm text-slate-300 mb-4",children:"Leia o artigo completo sobre a histÃ³ria deste projeto e como calculamos esses nÃºmeros."}),a.jsxs(B,{to:"/acervo",className:"inline-flex items-center gap-2 text-green-400 hover:text-green-300 font-bold text-sm",children:["Ler Artigo Completo ",a.jsx($e,{size:14})]})]})]})]})]}),a.jsx("section",{className:"py-16 px-4 bg-slate-900 border-t border-slate-800",children:a.jsxs("div",{className:"max-w-3xl mx-auto",children:[a.jsx("h2",{className:"text-2xl font-bold text-white mb-6 border-l-4 border-blue-500 pl-4",children:"Technical Note: The 100 Billion Project"}),a.jsxs("div",{className:"prose prose-invert prose-slate max-w-none",children:[a.jsx("p",{children:'The "Up to 100 Billion" project was a distributed computing effort to verify and catalogue prime numbers distribution. The original servers were decommissioned, but the core data was preserved.'}),a.jsxs("p",{children:["We are currently re-indexing the massive 2TB dataset. If your research script is failing, please point it to the new static endpoints listed in our ",a.jsx(B,{to:"/acervo",className:"text-blue-400 hover:underline",children:"Archive Index"}),"."]}),a.jsxs("div",{className:"bg-slate-800 p-4 rounded-lg mt-8 font-mono text-xs text-slate-400",children:[a.jsx("p",{className:"mb-2 text-slate-500 uppercase tracking-widest font-bold",children:"Citation Format"}),"Primos.mat.br (2025). ",a.jsx("i",{children:"The First 100 Billion Primes Dataset"}),". Retrieved from https://primos.mat.br/Ate100G_en.html"]})]})]})})]}),ys=()=>(f.useEffect(()=>{const t=async()=>{try{const r=await fetch("/version.json?t="+Date.now(),{cache:"no-store"});if(!r.ok)return;const n=(await r.json()).version,i=localStorage.getItem("app_version");if(i&&i!==n){if(console.log(`New version detected: ${n} (Current: ${i}). Updating...`),"serviceWorker"in navigator){const o=await navigator.serviceWorker.getRegistrations();for(const l of o)await l.unregister()}localStorage.clear(),localStorage.setItem("app_version",n),window.location.reload()}else localStorage.setItem("app_version",n)}catch(r){console.error("Auto-update check failed:",r)}};t();const e=setInterval(t,5*60*1e3);return()=>clearInterval(e)},[]),null),kd=()=>{const t=ie();return t.pathname.startsWith("/dashboard-recon-2026-x")||t.pathname.startsWith("/acervo/draft/")?a.jsxs(a.Fragment,{children:[a.jsx(ys,{}),a.jsxs(Hr,{children:[a.jsx(F,{path:"/dashboard-recon-2026-x",element:a.jsx(Nd,{})}),a.jsx(F,{path:"/acervo/draft/:id",element:a.jsx(Sd,{})})]})]}):a.jsxs(va,{currentPage:t.pathname,children:[a.jsx(ys,{}),a.jsxs(Hr,{children:[a.jsx(F,{path:"/",element:a.jsx(bs,{})}),a.jsx(F,{path:"/index.html",element:a.jsx(bs,{})}),a.jsx(F,{path:"/acervo",element:a.jsx(Ed,{})}),a.jsx(F,{path:"/Ate100G_en.html",element:a.jsx(vs,{})}),a.jsx(F,{path:"/ate-100-bilhoes",element:a.jsx(vs,{})}),a.jsx(F,{path:"/criptografia-rsa-seguranca",element:a.jsx(bd,{})}),a.jsx(F,{path:"/teoria-dos-numeros-primos",element:a.jsx(vd,{})}),a.jsx(F,{path:"/engenharia-performance-web",element:a.jsx(yd,{})}),a.jsx(F,{path:"/telemetria-sistema",element:a.jsx(wd,{})}),a.jsx(F,{path:"*",element:a.jsx(jd,{})})]})]})},Ad=()=>a.jsx(vi,{children:a.jsx(kd,{})});ya(document.getElementById("root")).render(a.jsx(f.StrictMode,{children:a.jsx(As,{children:a.jsx(Ad,{})})}));
